(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15005,46018,52626,16203,97556,t=>{"use strict";let e;var i=t.i(47760),r=t.i(40069),s=t.i(69553),a=t.i(32677);let n=new s.Bounds;function l(t,e,i){t.measurable=!0,(0,a.getGlobalBounds)(t,i,n),e.addBoundsMask(n),t.measurable=!1}var o=t.i(92405),h=t.i(15111),u=t.i(85830);function c(t,e,i){let r=h.boundsPool.get();t.measurable=!0;let s=h.matrixPool.get().identity(),a=function t(e,i,r){return e?e!==i&&(t(e.parent,i,r),e.updateLocalTransform(),r.append(e.localTransform)):(0,u.warn)("Mask bounds, renderable is not inside the root container"),r}(t,i,s);(0,o.getLocalBounds)(t,r,a),t.measurable=!1,e.addBoundsMask(r),h.matrixPool.return(s),h.boundsPool.return(r)}class d{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof r.Sprite),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){null!==this.mask&&(this.mask.measurable=!0,this.mask=null)}addBounds(t,e){this.inverse||l(this.mask,t,e)}addLocalBounds(t,e){c(this.mask,t,e)}containsPoint(t,e){return e(this.mask,t)}destroy(){this.reset()}static test(t){return t instanceof r.Sprite}}d.extension=i.ExtensionType.MaskEffect,t.s(["AlphaMask",()=>d],15005);class p{constructor(t){this.priority=0,this.pipe="colorMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return"number"==typeof t}}p.extension=i.ExtensionType.MaskEffect,t.s(["ColorMask",()=>p],46018);var f=t.i(50147);class x{constructor(t){this.priority=0,this.pipe="stencilMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){null!==this.mask&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(t,e){l(this.mask,t,e)}addLocalBounds(t,e){c(this.mask,t,e)}containsPoint(t,e){return e(this.mask,t)}destroy(){this.reset()}static test(t){return t instanceof f.Container}}x.extension=i.ExtensionType.MaskEffect,t.s(["StencilMask",()=>x],52626);var y=t.i(95627);class g extends y.TextureSource{constructor(t){super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||"u">typeof ImageBitmap&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}g.extension=i.ExtensionType.TextureSource,t.s(["ImageSource",()=>g],16203);var _=t.i(6972),m=t.i(27402);async function S(){return e??(e=(async()=>{let t=m.DOMAdapter.get().createCanvas(1,1).getContext("webgl");if(!t)return"premultiply-alpha-on-upload";let e=await new Promise(t=>{let e=document.createElement("video");e.onloadeddata=()=>t(e),e.onerror=()=>t(null),e.autoplay=!1,e.crossOrigin="anonymous",e.preload="auto",e.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",e.load()});if(!e)return"premultiply-alpha-on-upload";let i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i);let r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);let s=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,s),t.deleteFramebuffer(r),t.deleteTexture(i),t.getExtension("WEBGL_lose_context")?.loseContext(),s[0]<=s[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),e}var b=y;let v=class t extends b.TextureSource{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...t.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==e.autoPlay,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),!1!==e.autoLoad&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){let t=_.Ticker.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;let t=this.resource,e=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(e.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await S(),this._load=new Promise((i,r)=>{this.isValid?i(this):(this._resolve=i,this._reject=r,void 0!==e.preloadTimeoutMs&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${e.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){let t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){let t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();let t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(_.Ticker.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),null===this._videoFrameRequestCallbackHandle&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(null!==this._videoFrameRequestCallbackHandle&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(_.Ticker.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(null!==this._videoFrameRequestCallbackHandle&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(_.Ticker.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};v.extension=i.ExtensionType.TextureSource,v.defaultOptions={...b.TextureSource.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1},v.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},t.s(["VideoSource",()=>v],97556)},89698,t=>{"use strict";let e=(t,e,i=!1)=>(Array.isArray(t)||(t=[t]),e)?t.map(t=>"string"==typeof t||i?e(t):t):t;t.s(["convertToList",()=>e])},10463,92206,58035,t=>{"use strict";var e=t.i(47760),i=t.i(15005),r=t.i(46018),s=t.i(52626),a=t.i(75324),n=t.i(70220),l=t.i(16203),o=t.i(97556),h=t.i(85830),u=t.i(89698);let c=new class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){let e=this._cache.get(t);return e||(0,h.warn)(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){let i,r=(0,u.convertToList)(t);for(let t=0;t<this.parsers.length;t++){let s=this.parsers[t];if(s.test(e)){i=s.getCacheableAssets(r,e);break}}let s=new Map(Object.entries(i||{}));i||r.forEach(t=>{s.set(t,e)});let a=[...s.keys()],n={cacheKeys:a,keys:r};r.forEach(t=>{this._cacheMap.set(t,n)}),a.forEach(t=>{let r=i?i[t]:e;this._cache.has(t)&&this._cache.get(t)!==r&&(0,h.warn)("[Cache] already has key:",t),this._cache.set(t,s.get(t))})}remove(t){if(!this._cacheMap.has(t))return void(0,h.warn)(`[Assets] Asset id ${t} was not found in the Cache`);let e=this._cacheMap.get(t);e.cacheKeys.forEach(t=>{this._cache.delete(t)}),e.keys.forEach(t=>{this._cacheMap.delete(t)})}get parsers(){return this._parsers}};t.s(["Cache",()=>c],92206);var d=t.i(95627),p=t.i(31320);let f=[];function x(t={}){let e=t&&t.resource,i=e?t.resource:t,r=e?t:{resource:t};for(let t=0;t<f.length;t++){let e=f[t];if(e.test(i))return new e(r)}throw Error(`Could not find a source type for resource: ${r.resource}`)}e.extensions.handleByList(e.ExtensionType.TextureSource,f),p.Texture.from=function(t,e=!1){return"string"==typeof t?c.get(t):t instanceof d.TextureSource?new p.Texture({source:t}):function(t={},e=!1){let i=t&&t.resource,r=i?t.resource:t,s=i?t:{resource:t};if(!e&&c.has(r))return c.get(r);let a=new p.Texture({source:x(s)});return a.on("destroy",()=>{c.has(r)&&c.remove(r)}),e||c.set(r,a),a}(t,e)},d.TextureSource.from=x,t.s([],58035),e.extensions.add(i.AlphaMask,r.ColorMask,s.StencilMask,o.VideoSource,l.ImageSource,n.CanvasSource,a.BufferImageSource),t.s([],10463)},81324,30774,t=>{"use strict";var e,i=((e=i||{})[e.Low=0]="Low",e[e.Normal=1]="Normal",e[e.High=2]="High",e);t.s(["LoaderParserPriority",()=>i],81324);var r=t.i(27402);function s(t){if("string"!=typeof t)throw TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function a(t){return t.split("?")[0].split("#")[0]}let n={toPosix:t=>{var e,i;return e=0,i=0,t.replace(RegExp("\\".replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),"/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl:t=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t),isBlobUrl:t=>t.startsWith("blob:"),hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){s(t),t=this.toPosix(t);let e=/^file:\/\/\//.exec(t);if(e)return e[0];let i=/^[^/:]+:\/{0,2}/.exec(t);return i?i[0]:""},toAbsolute(t,e,i){if(s(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;let l=a(this.toPosix(e??r.DOMAdapter.get().getBaseUrl())),o=a(this.toPosix(i??this.rootname(l)));return(t=this.toPosix(t)).startsWith("/")?n.join(o,t.slice(1)):this.isAbsolute(t)?t:this.join(l,t)},normalize(t){if(s(t),0===t.length)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;t=this.toPosix(t);let e="",i=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));let r=t.endsWith("/");return((t=function(t,e){let i="",r=0,s=-1,a=0,n=-1;for(let l=0;l<=t.length;++l){if(l<t.length)n=t.charCodeAt(l);else if(47===n)break;else n=47;if(47===n){if(s===l-1||1===a);else if(s!==l-1&&2===a){if(i.length<2||2!==r||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2)){if(i.length>2){let t=i.lastIndexOf("/");if(t!==i.length-1){-1===t?(i="",r=0):r=(i=i.slice(0,t)).length-1-i.lastIndexOf("/"),s=l,a=0;continue}}else if(2===i.length||1===i.length){i="",r=0,s=l,a=0;continue}}e&&(i.length>0?i+="/..":i="..",r=2)}else i.length>0?i+=`/${t.slice(s+1,l)}`:i=t.slice(s+1,l),r=l-s-1;s=l,a=0}else 46===n&&-1!==a?++a:a=-1}return i}(t,!1)).length>0&&r&&(t+="/"),i)?`/${t}`:e+t},isAbsolute(t){return s(t),t=this.toPosix(t),!!this.hasProtocol(t)||t.startsWith("/")},join(...t){let e;if(0===t.length)return".";for(let i=0;i<t.length;++i){let r=t[i];if(s(r),r.length>0)if(void 0===e)e=r;else{let s=t[i-1]??"";this.joinExtensions.includes(this.extname(s).toLowerCase())?e+=`/../${r}`:e+=`/${r}`}}return void 0===e?".":this.normalize(e)},dirname(t){if(s(t),0===t.length)return".";let e=(t=this.toPosix(t)).charCodeAt(0),i=47===e,r=-1,a=!0,n=this.getProtocol(t),l=t;t=t.slice(n.length);for(let i=t.length-1;i>=1;--i)if(47===(e=t.charCodeAt(i))){if(!a){r=i;break}}else a=!1;return -1===r?i?"/":this.isUrl(l)?n+t:n:i&&1===r?"//":n+t.slice(0,r)},rootname(t){s(t);let e="";if(e=(t=this.toPosix(t)).startsWith("/")?"/":this.getProtocol(t),this.isUrl(t)){let i=t.indexOf("/",e.length);(e=-1!==i?t.slice(0,i):t).endsWith("/")||(e+="/")}return e},basename(t,e){let i;s(t),e&&s(e),t=a(this.toPosix(t));let r=0,n=-1,l=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let s=e.length-1,a=-1;for(i=t.length-1;i>=0;--i){let o=t.charCodeAt(i);if(47===o){if(!l){r=i+1;break}}else -1===a&&(l=!1,a=i+1),s>=0&&(o===e.charCodeAt(s)?-1==--s&&(n=i):(s=-1,n=a))}return r===n?n=a:-1===n&&(n=t.length),t.slice(r,n)}for(i=t.length-1;i>=0;--i)if(47===t.charCodeAt(i)){if(!l){r=i+1;break}}else -1===n&&(l=!1,n=i+1);return -1===n?"":t.slice(r,n)},extname(t){s(t),t=a(this.toPosix(t));let e=-1,i=0,r=-1,n=!0,l=0;for(let s=t.length-1;s>=0;--s){let a=t.charCodeAt(s);if(47===a){if(!n){i=s+1;break}continue}-1===r&&(n=!1,r=s+1),46===a?-1===e?e=s:1!==l&&(l=1):-1!==e&&(l=-1)}return -1===e||-1===r||0===l||1===l&&e===r-1&&e===i+1?"":t.slice(e,r)},parse(t){let e;s(t);let i={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return i;let r=(t=a(this.toPosix(t))).charCodeAt(0),n=this.isAbsolute(t);i.root=this.rootname(t),e=n||this.hasProtocol(t)?1:0;let l=-1,o=0,h=-1,u=!0,c=t.length-1,d=0;for(;c>=e;--c){if(47===(r=t.charCodeAt(c))){if(!u){o=c+1;break}continue}-1===h&&(u=!1,h=c+1),46===r?-1===l?l=c:1!==d&&(d=1):-1!==l&&(d=-1)}return -1===l||-1===h||0===d||1===d&&l===h-1&&l===o+1?-1!==h&&(0===o&&n?i.base=i.name=t.slice(1,h):i.base=i.name=t.slice(o,h)):(0===o&&n?(i.name=t.slice(1,l),i.base=t.slice(1,h)):(i.name=t.slice(o,l),i.base=t.slice(o,h)),i.ext=t.slice(l,h)),i.dir=this.dirname(t),i},sep:"/",delimiter:":",joinExtensions:[".html"]};t.s(["path",()=>n],30774)},99650,t=>{"use strict";var e=t.i(47760),i=t.i(81324),r=t.i(85830),s=t.i(30774),a=t.i(89698);class n{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){"string"==typeof t?this._defaultSearchParams=t:this._defaultSearchParams=Object.keys(t).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join("&")}getAlias(t){let{alias:e,src:i}=t;return(0,a.convertToList)(e||i,t=>"string"==typeof t?t:Array.isArray(t)?t.map(t=>t?.src??t):t?.src?t.src:t,!0)}addManifest(t){this._manifest&&(0,r.warn)("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(t,e){let i=[],r=e;Array.isArray(e)||(r=Object.entries(e).map(([t,e])=>"string"==typeof e||Array.isArray(e)?{alias:t,src:e}:{alias:t,...e})),r.forEach(e=>{let r,s=e.src,a=e.alias;if("string"==typeof a){let e=this._createBundleAssetId(t,a);i.push(e),r=[a,e]}else{let e=a.map(e=>this._createBundleAssetId(t,e));i.push(...e),r=[...a,...e]}this.add({...e,alias:r,src:s})}),this._bundles[t]=i}add(t){let e,i=[];Array.isArray(t)?i.push(...t):i.push(t),e=t=>{this.hasKey(t)&&(0,r.warn)(`[Resolver] already has key: ${t} overwriting`)},(0,a.convertToList)(i).forEach(t=>{let{src:i}=t,{data:r,format:s,loadParser:n,parser:l}=t,o=(0,a.convertToList)(i).map(t=>{if("string"==typeof t){let e=t.match(/\{(.*?)\}/g),i=[];if(e){let r=[];e.forEach(t=>{let e=t.substring(1,t.length-1).split(",");r.push(e)}),function t(e,i,r,s,a){let n=i[r];for(let l=0;l<n.length;l++){let o=n[l];r<i.length-1?t(e.replace(s[r],o),i,r+1,s,a):a.push(e.replace(s[r],o))}}(t,r,0,e,i)}else i.push(t);return i}return Array.isArray(t)?t:[t]}),h=this.getAlias(t);Array.isArray(h)?h.forEach(e):e(h);let u=[],c=t=>{let e=this._parsers.find(e=>e.test(t));return{...e?.parse(t),src:t}};o.forEach(e=>{e.forEach(e=>{let i={};if("object"!=typeof e?i=c(e):(r=e.data??r,s=e.format??s,(e.loadParser||e.parser)&&(n=e.loadParser??n,l=e.parser??l),i={...c(e.src),...e}),!h)throw Error(`[Resolver] alias is undefined for this asset: ${i.src}`);i=this._buildResolvedAsset(i,{aliases:h,data:r,format:s,loadParser:n,parser:l,progressSize:t.progressSize}),u.push(i)})}),h.forEach(t=>{this._assetMap[t]=u})})}resolveBundle(t){let e=!Array.isArray(t);t=(0,a.convertToList)(t);let i={};return t.forEach(t=>{let e=this._bundles[t];if(e){let r=this.resolve(e),s={};for(let e in r){let i=r[e];s[this._extractAssetIdFromBundle(t,e)]=i}i[t]=s}}),e?i[t[0]]:i}resolveUrl(t){let e=this.resolve(t);if("string"!=typeof t){let t={};for(let i in e)t[i]=e[i].src;return t}return e.src}resolve(t){let e=!Array.isArray(t);t=(0,a.convertToList)(t);let i={};return t.forEach(t=>{if(!this._resolverHash[t])if(this._assetMap[t]){let e=this._assetMap[t],i=this._getPreferredOrder(e);i?.priority.forEach(t=>{i.params[t].forEach(i=>{let r=e.filter(e=>!!e[t]&&e[t]===i);r.length&&(e=r)})}),this._resolverHash[t]=e[0]}else this._resolverHash[t]=this._buildResolvedAsset({alias:[t],src:t},{});i[t]=this._resolverHash[t]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){let i=t[e],r=this._preferredOrder.find(t=>t.params.format.includes(i.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;let e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}_buildResolvedAsset(t,e){let{aliases:i,data:r,loadParser:a,parser:n,format:l,progressSize:o}=e;return(this._basePath||this._rootPath)&&(t.src=s.path.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=i??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...r||{},...t.data},t.loadParser=a??t.loadParser,t.parser=n??t.parser,t.format=l??t.format??t.src.split(".").pop().split("?").shift().split("#").shift(),void 0!==o&&(t.progressSize=o),t}}n.RETINA_PREFIX=/@([0-9\.]+)x/;let l=(t,e)=>{let i=e.split("?")[1];return i&&(t+=`?${i}`),t};var o=t.i(31320),h=t.i(63646),u=t.i(95627);let c=class t{constructor(t,e){this.linkedSheets=[];let i=t;t?.source instanceof u.TextureSource&&(i={texture:t,data:e});const{texture:r,data:s,cachePrefix:a=""}=i;this.cachePrefix=a,this._texture=r instanceof o.Texture?r:null,this.textureSource=r.source,this.textures={},this.animations={},this.data=s;const n=parseFloat(s.meta.scale);n?(this.resolution=n,r.source.resolution=this.resolution):this.resolution=r.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let i=e,r=t.BATCH_SIZE;for(;i-e<r&&i<this._frameKeys.length;){let t=this._frameKeys[i],e=this._frames[t],r=e.frame;if(r){let i=null,s=null,a=!1!==e.trimmed&&e.sourceSize?e.sourceSize:e.frame,n=new h.Rectangle(0,0,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution);i=e.rotated?new h.Rectangle(Math.floor(r.x)/this.resolution,Math.floor(r.y)/this.resolution,Math.floor(r.h)/this.resolution,Math.floor(r.w)/this.resolution):new h.Rectangle(Math.floor(r.x)/this.resolution,Math.floor(r.y)/this.resolution,Math.floor(r.w)/this.resolution,Math.floor(r.h)/this.resolution),!1!==e.trimmed&&e.spriteSourceSize&&(s=new h.Rectangle(Math.floor(e.spriteSourceSize.x)/this.resolution,Math.floor(e.spriteSourceSize.y)/this.resolution,Math.floor(r.w)/this.resolution,Math.floor(r.h)/this.resolution)),this.textures[t]=new o.Texture({source:this.textureSource,frame:i,orig:n,trim:s,rotate:2*!!e.rotated,defaultAnchor:e.anchor,defaultBorders:e.borders,label:t.toString()})}i++}}_processAnimations(){let t=this.data.animations||{};for(let e in t){this.animations[e]=[];for(let i=0;i<t[e].length;i++){let r=t[e][i];this.animations[e].push(this.textures[r])}}}_parseComplete(){let t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*t.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){for(let t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};c.BATCH_SIZE=1e3;let d=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"],p={extension:e.ExtensionType.Asset,cache:{test:t=>t instanceof c,getCacheableAssets:(t,e)=>(function t(e,i,r){let a={};if(e.forEach(t=>{a[t]=i}),Object.keys(i.textures).forEach(t=>{a[`${i.cachePrefix}${t}`]=i.textures[t]}),!r){let r=s.path.dirname(e[0]);i.linkedSheets.forEach((e,s)=>{Object.assign(a,t([`${r}/${i.data.meta.related_multi_packs[s]}`],e,!0))})}return a})(t,e,!1)},resolver:{extension:{type:e.ExtensionType.ResolveParser,name:"resolveSpritesheet"},test:t=>{let e=t.split("?")[0].split("."),i=e.pop(),r=e.pop();return"json"===i&&d.includes(r)},parse:t=>{let e=t.split(".");return{resolution:parseFloat(n.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:e.ExtensionType.LoadParser,priority:i.LoaderParserPriority.Normal,name:"spritesheetLoader"},testParse:async(t,e)=>".json"===s.path.extname(e.src).toLowerCase()&&!!t.frames,async parse(t,e,i){let r,{texture:a,imageFilename:n,textureOptions:h,cachePrefix:u}=e?.data??{},d=s.path.dirname(e.src);if(d&&d.lastIndexOf("/")!==d.length-1&&(d+="/"),a instanceof o.Texture)r=a;else{let s=l(d+(n??t.meta.image),e.src);r=(await i.load([{src:s,data:h}]))[s]}let p=new c({texture:r.source,data:t,cachePrefix:u});await p.parse();let f=t?.meta?.related_multi_packs;if(Array.isArray(f)){let t=[];for(let r of f){if("string"!=typeof r)continue;let s=d+r;e.data?.ignoreMultiPack||(s=l(s,e.src),t.push(i.load({src:s,data:{textureOptions:h,ignoreMultiPack:!0}})))}let r=await Promise.all(t);p.linkedSheets=r,r.forEach(t=>{t.linkedSheets=[p].concat(p.linkedSheets.filter(e=>e!==t))})}return p},async unload(t,e,i){await i.unload(t.textureSource._sourceOrigin),t.destroy(!1)}}};e.extensions.add(p),t.s([],99650)},3936,(t,e,i)=>{e.exports=function(t){var e=[];return t.replace(s,function(t,i,s){var n,l=i.toLowerCase();for(s=(n=s.match(a))?n.map(Number):[],"m"==l&&s.length>2&&(e.push([i].concat(s.splice(0,2))),l="l",i="m"==i?"l":"L");;){if(s.length==r[l])return s.unshift(i),e.push(s);if(s.length<r[l])throw Error("malformed path data");e.push([i].concat(s.splice(0,r[l])))}}),e};var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},s=/([astvzqmhlc])([^astvzqmhlc]*)/ig,a=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig},65767,19258,6290,60295,84332,t=>{"use strict";let e,i;var r=t.i(3936),s=t.i(85830);function a(t,e){let i=(0,r.default)(t),a=[],n=null,l=0,o=0;for(let t=0;t<i.length;t++){let r=i[t],h=r[0];switch(h){case"M":l=r[1],o=r[2],e.moveTo(l,o);break;case"m":l+=r[1],o+=r[2],e.moveTo(l,o);break;case"H":l=r[1],e.lineTo(l,o);break;case"h":l+=r[1],e.lineTo(l,o);break;case"V":o=r[1],e.lineTo(l,o);break;case"v":o+=r[1],e.lineTo(l,o);break;case"L":l=r[1],o=r[2],e.lineTo(l,o);break;case"l":l+=r[1],o+=r[2],e.lineTo(l,o);break;case"C":l=r[5],o=r[6],e.bezierCurveTo(r[1],r[2],r[3],r[4],l,o);break;case"c":e.bezierCurveTo(l+r[1],o+r[2],l+r[3],o+r[4],l+r[5],o+r[6]),l+=r[5],o+=r[6];break;case"S":l=r[3],o=r[4],e.bezierCurveToShort(r[1],r[2],l,o);break;case"s":e.bezierCurveToShort(l+r[1],o+r[2],l+r[3],o+r[4]),l+=r[3],o+=r[4];break;case"Q":l=r[3],o=r[4],e.quadraticCurveTo(r[1],r[2],l,o);break;case"q":e.quadraticCurveTo(l+r[1],o+r[2],l+r[3],o+r[4]),l+=r[3],o+=r[4];break;case"T":l=r[1],o=r[2],e.quadraticCurveToShort(l,o);break;case"t":l+=r[1],o+=r[2],e.quadraticCurveToShort(l,o);break;case"A":l=r[6],o=r[7],e.arcToSvg(r[1],r[2],r[3],r[4],r[5],l,o);break;case"a":l+=r[6],o+=r[7],e.arcToSvg(r[1],r[2],r[3],r[4],r[5],l,o);break;case"Z":case"z":e.closePath(),a.length>0&&((n=a.pop())?(l=n.startX,o=n.startY):(l=0,o=0)),n=null;break;default:(0,s.warn)(`Unknown SVG path command: ${h}`)}"Z"!==h&&"z"!==h&&null===n&&(n={startX:l,startY:o},a.push(n))}return e}t.s(["parseSVGPath",()=>a],65767);var n=t.i(63646);class l{constructor(t=0,e=0,i=0){this.type="circle",this.x=t,this.y=e,this.radius=i}clone(){return new l(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;let i=this.radius*this.radius,r=this.x-t,s=this.y-e;return r*=r,s*=s,r+s<=i}strokeContains(t,e,i,r=.5){if(0===this.radius)return!1;let s=this.x-t,a=this.y-e,n=this.radius,l=(1-r)*i,o=Math.sqrt(s*s+a*a);return o<=n+l&&o>n-(i-l)}getBounds(t){return t||(t=new n.Rectangle),t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=2*this.radius,t.height=2*this.radius,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}t.s(["Circle",()=>l],19258);class o{constructor(t=0,e=0,i=0,r=0){this.type="ellipse",this.x=t,this.y=e,this.halfWidth=i,this.halfHeight=r}clone(){return new o(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(t-this.x)/this.halfWidth,r=(e-this.y)/this.halfHeight;return i*=i,r*=r,i+r<=1}strokeContains(t,e,i,r=.5){let{halfWidth:s,halfHeight:a}=this;if(s<=0||a<=0)return!1;let n=i*(1-r),l=i-n,o=s-l,h=a-l,u=s+n,c=a+n,d=t-this.x,p=e-this.y;return d*d/(o*o)+p*p/(h*h)>1&&d*d/(u*u)+p*p/(c*c)<=1}getBounds(t){return t||(t=new n.Rectangle),t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=2*this.halfWidth,t.height=2*this.halfHeight,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}t.s(["Ellipse",()=>o],6290);var h=t.i(49864);class u{constructor(...t){this.type="polygon";let e=Array.isArray(t[0])?t[0]:t;if("number"!=typeof e[0]){const t=[];for(let i=0,r=e.length;i<r;i++)t.push(e[i].x,e[i].y);e=t}this.points=e,this.closePath=!0}isClockwise(){let t=0,e=this.points,i=e.length;for(let r=0;r<i;r+=2){let s=e[r],a=e[r+1];t+=(e[(r+2)%i]-s)*(e[(r+3)%i]+a)}return t<0}containsPolygon(t){let r=this.getBounds(e),s=t.getBounds(i);if(!r.containsRect(s))return!1;let a=t.points;for(let t=0;t<a.length;t+=2){let e=a[t],i=a[t+1];if(!this.contains(e,i))return!1}return!0}clone(){let t=new u(this.points.slice());return t.closePath=this.closePath,t}contains(t,e){let i=!1,r=this.points.length/2;for(let s=0,a=r-1;s<r;a=s++){let r=this.points[2*s],n=this.points[2*s+1],l=this.points[2*a],o=this.points[2*a+1];n>e!=o>e&&t<(e-n)/(o-n)*(l-r)+r&&(i=!i)}return i}strokeContains(t,e,i,r=.5){let s=i*i,a=s*(1-r),n=s-a,{points:l}=this,o=l.length-2*!this.closePath;for(let i=0;i<o;i+=2){let r=l[i],s=l[i+1],o=l[(i+2)%l.length],h=l[(i+3)%l.length];if(function(t,e,i,r,s,a){let n,l,o=s-i,h=a-r,u=o*o+h*h,c=-1;0!==u&&(c=((t-i)*o+(e-r)*h)/u),c<0?(n=i,l=r):c>1?(n=s,l=a):(n=i+c*o,l=r+c*h);let d=t-n,p=e-l;return d*d+p*p}(t,e,r,s,o,h)<=(0>Math.sign((o-r)*(e-s)-(h-s)*(t-r))?n:a))return!0}return!1}getBounds(t){t||(t=new n.Rectangle);let e=this.points,i=1/0,r=-1/0,s=1/0,a=-1/0;for(let t=0,n=e.length;t<n;t+=2){let n=e[t],l=e[t+1];i=n<i?n:i,r=n>r?n:r,s=l<s?l:s,a=l>a?l:a}return t.x=i,t.width=r-i,t.y=s,t.height=a-s,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return(0,h.deprecation)("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return(0,h.deprecation)("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}t.s(["Polygon",()=>u],60295);let c=(t,e,i,r,s,a,n)=>{let l=t-i,o=e-r,h=Math.sqrt(l*l+o*o);return h>=s-a&&h<=s+n};class d{constructor(t=0,e=0,i=0,r=0,s=20){this.type="roundedRectangle",this.x=t,this.y=e,this.width=i,this.height=r,this.radius=s}getBounds(t){return t||(t=new n.Rectangle),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new d(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){let i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let r=t-(this.x+i),s=e-(this.y+i),a=i*i;if(r*r+s*s<=a||(r=t-(this.x+this.width-i))*r+s*s<=a||r*r+(s=e-(this.y+this.height-i))*s<=a||(r=t-(this.x+i))*r+s*s<=a)return!0}return!1}strokeContains(t,e,i,r=.5){let{x:s,y:a,width:n,height:l,radius:o}=this,h=i*(1-r),u=i-h,d=s+o,p=a+o,f=n-2*o,x=l-2*o,y=s+n,g=a+l;return(t>=s-h&&t<=s+u||t>=y-u&&t<=y+h)&&e>=p&&e<=p+x||(e>=a-h&&e<=a+u||e>=g-u&&e<=g+h)&&t>=d&&t<=d+f||t<d&&e<p&&c(t,e,d,p,o,u,h)||t>y-o&&e<p&&c(t,e,y-o,p,o,u,h)||t>y-o&&e>g-o&&c(t,e,y-o,g-o,o,u,h)||t<d&&e>g-o&&c(t,e,d,g-o,o,u,h)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}t.s(["RoundedRectangle",()=>d],84332)},99166,1187,81541,t=>{"use strict";var e=t.i(47760),i=t.i(68750),r=t.i(97828),s=t.i(30725),a=t.i(33219),n=t.i(49864),l=t.i(74179),o=t.i(28959),h=t.i(63646);function u(t,e,i,r,s){let a=e.a,n=e.b,l=e.c,o=e.d,h=e.tx,u=e.ty;i||(i=0),r||(r=2),s||(s=t.length/r-i);let c=i*r;for(let e=0;e<s;e++){let e=t[c],i=t[c+1];t[c]=a*e+l*i+h,t[c+1]=n*e+o*i+u,c+=r}}var c=t.i(31320),d=t.i(79276);let p=new o.Matrix;class f{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){let t=this.baseColor,e=t>>16|65280&t|(255&t)<<16,i=this.renderable;return i?(0,d.multiplyHexColors)(e,i.groupColor)+(this.alpha*i.groupAlpha*255<<24):e+(255*this.alpha<<24)}get transform(){return this.renderable?.groupTransform||p}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}t.s(["BatchableGraphics",()=>f],1187);let x={extension:{type:e.ExtensionType.ShapeBuilder,name:"circle"},build(t,e){let i,r,s,a,n,l;if("circle"===t.type){if((n=l=t.radius)<=0)return!1;i=t.x,r=t.y,s=a=0}else if("ellipse"===t.type){if(n=t.halfWidth,l=t.halfHeight,n<=0||l<=0)return!1;i=t.x,r=t.y,s=a=0}else{let e=t.width/2,o=t.height/2;i=t.x+e,r=t.y+o,n=l=Math.max(0,Math.min(t.radius,Math.min(e,o))),s=e-n,a=o-l}if(s<0||a<0)return!1;let o=Math.ceil(2.3*Math.sqrt(n+l)),h=8*o+4*!!s+4*!!a;if(0===h)return!1;if(0===o)return e[0]=e[6]=i+s,e[1]=e[3]=r+a,e[2]=e[4]=i-s,e[5]=e[7]=r-a,!0;let u=0,c=4*o+2*!!s+2,d=c,p=h,f=s+n,x=a,y=i+f,g=i-f,_=r+x;if(e[u++]=y,e[u++]=_,e[--c]=_,e[--c]=g,a){let t=r-x;e[d++]=g,e[d++]=t,e[--p]=t,e[--p]=y}for(let t=1;t<o;t++){let h=Math.PI/2*(t/o),f=s+Math.cos(h)*n,x=a+Math.sin(h)*l,y=i+f,g=i-f,_=r+x,m=r-x;e[u++]=y,e[u++]=_,e[--c]=_,e[--c]=g,e[d++]=g,e[d++]=m,e[--p]=m,e[--p]=y}f=s,x=a+l,y=i+f,g=i-f,_=r+x;let m=r-x;return e[u++]=y,e[u++]=_,e[--p]=m,e[--p]=y,s&&(e[u++]=g,e[u++]=_,e[--p]=m,e[--p]=g),!0},triangulate(t,e,i,r,s,a){if(0===t.length)return;let n=0,l=0;for(let e=0;e<t.length;e+=2)n+=t[e],l+=t[e+1];n/=t.length/2,l/=t.length/2;let o=r;e[o*i]=n,e[o*i+1]=l;let h=o++;for(let r=0;r<t.length;r+=2)e[o*i]=t[r],e[o*i+1]=t[r+1],r>0&&(s[a++]=o,s[a++]=h,s[a++]=o-1),o++;s[a++]=h+1,s[a++]=h,s[a++]=o-1}},y={...x,extension:{...x.extension,name:"ellipse"}},g={...x,extension:{...x.extension,name:"roundedRectangle"}};var _=t.i(26963);function m(t,e,i,r,s,a,n,l){let o,h;n?(o=r,h=-i):(o=-r,h=i);let u=t-i*s+o,c=e-r*s+h,d=t+i*a+o,p=e+r*a+h;return l.push(u,c),l.push(d,p),2}function S(t,e,i,r,s,a,n,l){let o=i-t,h=r-e,u=Math.atan2(o,h),c=Math.atan2(s-t,a-e);l&&u<c?u+=2*Math.PI:!l&&u>c&&(c+=2*Math.PI);let d=u,p=c-u,f=Math.sqrt(o*o+h*h),x=(15*Math.abs(p)*Math.sqrt(f)/Math.PI|0)+1,y=p/x;if(d+=y,l){n.push(t,e),n.push(i,r);for(let i=1,r=d;i<x;i++,r+=y)n.push(t,e),n.push(t+Math.sin(r)*f,e+Math.cos(r)*f);n.push(t,e),n.push(s,a)}else{n.push(i,r),n.push(t,e);for(let i=1,r=d;i<x;i++,r+=y)n.push(t+Math.sin(r)*f,e+Math.cos(r)*f),n.push(t,e);n.push(s,a),n.push(t,e)}return 2*x}function b(t,e,i=2){let r,s,a,n=e&&e.length,l=n?e[0]*i:t.length,o=v(t,0,l,i,!0),h=[];if(!o||o.next===o.prev)return h;if(n&&(o=function(t,e,i,r){let s=[];for(let i=0,a=e.length;i<a;i++){let n=e[i]*r,l=i<a-1?e[i+1]*r:t.length,o=v(t,n,l,r,!1);o===o.next&&(o.steiner=!0),s.push(function(t){let e=t,i=t;do(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next;while(e!==t)return i}(o))}s.sort(P);for(let t=0;t<s.length;t++)i=function(t,e){let i=function(t,e){let i,r=e,s=t.x,a=t.y,n=-1/0;if(C(t,r))return r;do{if(C(t,r.next))return r.next;if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){let t=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(t<=s&&t>n&&(n=t,i=r.x<r.next.x?r:r.next,t===s))return i}r=r.next}while(r!==e)if(!i)return null;let l=i,o=i.x,h=i.y,u=1/0;r=i;do{if(s>=r.x&&r.x>=o&&s!==r.x&&w(a<h?s:n,a,o,h,a<h?n:s,a,r.x,r.y)){var c,d;let e=Math.abs(a-r.y)/(s-r.x);R(r,t)&&(e<u||e===u&&(r.x>i.x||r.x===i.x&&(c=i,d=r,0>T(c.prev,c,d.prev)&&0>T(d.next,c,c.next))))&&(i=r,u=e)}r=r.next}while(r!==l)return i}(t,e);if(!i)return e;let r=I(i,t);return k(r,r.next),k(i,i.next)}(s[t],i);return i}(t,e,o,i)),t.length>80*i){r=t[0],s=t[1];let e=r,n=s;for(let a=i;a<l;a+=i){let i=t[a],l=t[a+1];i<r&&(r=i),l<s&&(s=l),i>e&&(e=i),l>n&&(n=l)}a=0!==(a=Math.max(e-r,n-s))?32767/a:0}return function t(e,i,r,s,a,n,l){if(!e)return;!l&&n&&function(t,e,i,r){let s=t;do 0===s.z&&(s.z=A(s.x,s.y,e,i,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==t)s.prevZ.nextZ=null,s.prevZ=null,function(t){let e,i=1;do{let r,s=t;t=null;let a=null;for(e=0;s;){e++;let n=s,l=0;for(let t=0;t<i&&(l++,n=n.nextZ);t++);let o=i;for(;l>0||o>0&&n;)0!==l&&(0===o||!n||s.z<=n.z)?(r=s,s=s.nextZ,l--):(r=n,n=n.nextZ,o--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;s=n}a.nextZ=null,i*=2}while(e>1)}(s)}(e,s,a,n);let o=e;for(;e.prev!==e.next;){let h=e.prev,u=e.next;if(n?function(t,e,i,r){let s=t.prev,a=t.next;if(T(s,t,a)>=0)return!1;let n=s.x,l=t.x,o=a.x,h=s.y,u=t.y,c=a.y,d=Math.min(n,l,o),p=Math.min(h,u,c),f=Math.max(n,l,o),x=Math.max(h,u,c),y=A(d,p,e,i,r),g=A(f,x,e,i,r),_=t.prevZ,m=t.nextZ;for(;_&&_.z>=y&&m&&m.z<=g;){if(_.x>=d&&_.x<=f&&_.y>=p&&_.y<=x&&_!==s&&_!==a&&M(n,h,l,u,o,c,_.x,_.y)&&T(_.prev,_,_.next)>=0||(_=_.prevZ,m.x>=d&&m.x<=f&&m.y>=p&&m.y<=x&&m!==s&&m!==a&&M(n,h,l,u,o,c,m.x,m.y)&&T(m.prev,m,m.next)>=0))return!1;m=m.nextZ}for(;_&&_.z>=y;){if(_.x>=d&&_.x<=f&&_.y>=p&&_.y<=x&&_!==s&&_!==a&&M(n,h,l,u,o,c,_.x,_.y)&&T(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;m&&m.z<=g;){if(m.x>=d&&m.x<=f&&m.y>=p&&m.y<=x&&m!==s&&m!==a&&M(n,h,l,u,o,c,m.x,m.y)&&T(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}(e,s,a,n):function(t){let e=t.prev,i=t.next;if(T(e,t,i)>=0)return!1;let r=e.x,s=t.x,a=i.x,n=e.y,l=t.y,o=i.y,h=Math.min(r,s,a),u=Math.min(n,l,o),c=Math.max(r,s,a),d=Math.max(n,l,o),p=i.next;for(;p!==e;){if(p.x>=h&&p.x<=c&&p.y>=u&&p.y<=d&&M(r,n,s,l,a,o,p.x,p.y)&&T(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}(e)){i.push(h.i,e.i,u.i),z(e),e=u.next,o=u.next;continue}if((e=u)===o){l?1===l?t(e=function(t,e){let i=t;do{let r=i.prev,s=i.next.next;!C(r,s)&&E(r,i,i.next,s)&&R(r,s)&&R(s,r)&&(e.push(r.i,i.i,s.i),z(i),z(i.next),i=t=s),i=i.next}while(i!==t)return k(i)}(k(e),i),i,r,s,a,n,2):2===l&&function(e,i,r,s,a,n){let l=e;do{let e=l.next.next;for(;e!==l.prev;){var o,h;if(l.i!==e.i&&(o=l,h=e,o.next.i!==h.i&&o.prev.i!==h.i&&!function(t,e){let i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&E(i,i.next,t,e))return!0;i=i.next}while(i!==t)return!1}(o,h)&&(R(o,h)&&R(h,o)&&function(t,e){let i=t,r=!1,s=(t.x+e.x)/2,a=(t.y+e.y)/2;do i.y>a!=i.next.y>a&&i.next.y!==i.y&&s<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==t)return r}(o,h)&&(T(o.prev,o,h.prev)||T(o,h.prev,h))||C(o,h)&&T(o.prev,o,o.next)>0&&T(h.prev,h,h.next)>0))){let o=I(l,e);l=k(l,l.next),o=k(o,o.next),t(l,i,r,s,a,n,0),t(o,i,r,s,a,n,0);return}e=e.next}l=l.next}while(l!==e)}(e,i,r,s,a,n):t(k(e),i,r,s,a,n,1);break}}}(o,h,i,r,s,a,0),h}function v(t,e,i,r,s){let a;if(s===function(t,e,i,r){let s=0;for(let a=e,n=i-r;a<i;a+=r)s+=(t[n]-t[a])*(t[a+1]+t[n+1]),n=a;return s}(t,e,i,r)>0)for(let s=e;s<i;s+=r)a=L(s/r|0,t[s],t[s+1],a);else for(let s=i-r;s>=e;s-=r)a=L(s/r|0,t[s],t[s+1],a);return a&&C(a,a.next)&&(z(a),a=a.next),a}function k(t,e){if(!t)return t;e||(e=t);let i=t,r;do if(r=!1,!i.steiner&&(C(i,i.next)||0===T(i.prev,i,i.next))){if(z(i),(i=e=i.prev)===i.next)break;r=!0}else i=i.next;while(r||i!==e)return e}function P(t,e){let i=t.x-e.x;return 0===i&&0==(i=t.y-e.y)&&(i=(t.next.y-t.y)/(t.next.x-t.x)-(e.next.y-e.y)/(e.next.x-e.x)),i}function A(t,e,i,r,s){return(t=((t=((t=((t=((t=(t-i)*s|0)|t<<8)&0xff00ff)|t<<4)&0xf0f0f0f)|t<<2)&0x33333333)|t<<1)&0x55555555)|(e=((e=((e=((e=((e=(e-r)*s|0)|e<<8)&0xff00ff)|e<<4)&0xf0f0f0f)|e<<2)&0x33333333)|e<<1)&0x55555555)<<1}function w(t,e,i,r,s,a,n,l){return(s-n)*(e-l)>=(t-n)*(a-l)&&(t-n)*(r-l)>=(i-n)*(e-l)&&(i-n)*(a-l)>=(s-n)*(r-l)}function M(t,e,i,r,s,a,n,l){return(t!==n||e!==l)&&w(t,e,i,r,s,a,n,l)}function T(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function C(t,e){return t.x===e.x&&t.y===e.y}function E(t,e,i,r){let s=F(T(t,e,i)),a=F(T(t,e,r)),n=F(T(i,r,t)),l=F(T(i,r,e));return!!(s!==a&&n!==l||0===s&&B(t,i,e)||0===a&&B(t,r,e)||0===n&&B(i,t,r)||0===l&&B(i,e,r))}function B(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function F(t){return t>0?1:t<0?-1:0}function R(t,e){return 0>T(t.prev,t,t.next)?T(t,e,t.next)>=0&&T(t,t.prev,e)>=0:0>T(t,e,t.prev)||0>T(t,t.next,e)}function I(t,e){let i=G(t.i,t.x,t.y),r=G(e.i,e.x,e.y),s=t.next,a=e.prev;return t.next=e,e.prev=t,i.next=s,s.prev=i,r.next=i,i.prev=r,a.next=r,r.prev=a,r}function L(t,e,i,r){let s=G(t,e,i);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function z(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function G(t,e,i){return{i:t,x:e,y:i,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}t.i(95932);let W=b.default||b;function O(t,e,i,r,s,a,n){let l=W(t,e,2);if(!l)return;for(let t=0;t<l.length;t+=3)a[n++]=l[t]+s,a[n++]=l[t+1]+s,a[n++]=l[t+2]+s;let o=s*r;for(let e=0;e<t.length;e+=2)i[o]=t[e],i[o+1]=t[e+1],o+=r}let D=[],U={extension:{type:e.ExtensionType.ShapeBuilder,name:"polygon"},build(t,e){for(let i=0;i<t.points.length;i++)e[i]=t.points[i];return!0},triangulate(t,e,i,r,s,a){O(t,D,e,i,r,s,a)}},H={extension:{type:e.ExtensionType.ShapeBuilder,name:"rectangle"},build(t,e){let i=t.x,r=t.y,s=t.width,a=t.height;return!!(s>0&&a>0)&&(e[0]=i,e[1]=r,e[2]=i+s,e[3]=r,e[4]=i+s,e[5]=r+a,e[6]=i,e[7]=r+a,!0)},triangulate(t,e,i,r,s,a){let n=0;e[(r*=i)+n]=t[0],e[r+n+1]=t[1],n+=i,e[r+n]=t[2],e[r+n+1]=t[3],n+=i,e[r+n]=t[6],e[r+n+1]=t[7],n+=i,e[r+n]=t[4],e[r+n+1]=t[5],n+=i;let l=r/i;s[a++]=l,s[a++]=l+1,s[a++]=l+2,s[a++]=l+1,s[a++]=l+3,s[a++]=l+2}},V={extension:{type:e.ExtensionType.ShapeBuilder,name:"triangle"},build:(t,e)=>(e[0]=t.x,e[1]=t.y,e[2]=t.x2,e[3]=t.y2,e[4]=t.x3,e[5]=t.y3,!0),triangulate(t,e,i,r,s,a){let n=0;e[(r*=i)+n]=t[0],e[r+n+1]=t[1],n+=i,e[r+n]=t[2],e[r+n+1]=t[3],n+=i,e[r+n]=t[4],e[r+n+1]=t[5];let l=r/i;s[a++]=l,s[a++]=l+1,s[a++]=l+2}};var N=t.i(57471),$=t.i(27402),q=t.i(16203),j=t.i(24314),Z=t.i(40373);let Y=[{offset:0,color:"white"},{offset:1,color:"black"}],X=class t{constructor(...e){this.uid=(0,j.uid)("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let i=function(t){let e=t[0]??{};return("number"==typeof e||t[1])&&((0,n.deprecation)("8.5.2","use options object instead"),e={type:"linear",start:{x:t[0],y:t[1]},end:{x:t[2],y:t[3]},textureSpace:t[4],textureSize:t[5]??X.defaultLinearOptions.textureSize}),e}(e);i={..."radial"===i.type?t.defaultRadialOptions:t.defaultLinearOptions,...(0,Z.definedProps)(i)},this._textureSize=i.textureSize,this._wrapMode=i.wrapMode,"radial"===i.type?(this.center=i.center,this.outerCenter=i.outerCenter??this.center,this.innerRadius=i.innerRadius,this.outerRadius=i.outerRadius,this.scale=i.scale,this.rotation=i.rotation):(this.start=i.start,this.end=i.end),this.textureSpace=i.textureSpace,this.type=i.type,i.colorStops.forEach(t=>{this.addColorStop(t.offset,t.color)})}addColorStop(t,e){return this.colorStops.push({offset:t,color:N.Color.shared.setValue(e).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:t,y:e}=this.start,{x:i,y:r}=this.end,s=i-t,a=r-e,n=s<0||a<0;if("clamp-to-edge"===this._wrapMode){if(s<0){let e=t;t=i,i=e,s*=-1}if(a<0){let t=e;e=r,r=t,a*=-1}}let l=this.colorStops.length?this.colorStops:Y,h=this._textureSize,{canvas:u,context:d}=Q(h,1),p=n?d.createLinearGradient(this._textureSize,0,0,0):d.createLinearGradient(0,0,this._textureSize,0);K(p,l),d.fillStyle=p,d.fillRect(0,0,h,1),this.texture=new c.Texture({source:new q.ImageSource({resource:u,addressMode:this._wrapMode})});let f=Math.sqrt(s*s+a*a),x=Math.atan2(a,s),y=new o.Matrix;y.scale(f/h,1),y.rotate(x),y.translate(t,e),"local"===this.textureSpace&&y.scale(h,h),this.transform=y}buildGradient(){!this.texture&&this._tick++,"linear"===this.type?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;let t=this.colorStops.length?this.colorStops:Y,e=this._textureSize,{canvas:i,context:r}=Q(e,e),{x:s,y:a}=this.center,{x:n,y:l}=this.outerCenter,h=this.innerRadius,u=this.outerRadius,d=n-u,p=l-u,f=e/(2*u),x=(s-d)*f,y=(a-p)*f,g=r.createRadialGradient(x,y,h*f,(n-d)*f,(l-p)*f,u*f);K(g,t),r.fillStyle=t[t.length-1].color,r.fillRect(0,0,e,e),r.fillStyle=g,r.translate(x,y),r.rotate(this.rotation),r.scale(1,this.scale),r.translate(-x,-y),r.fillRect(0,0,e,e),this.texture=new c.Texture({source:new q.ImageSource({resource:i,addressMode:this._wrapMode})});let _=new o.Matrix;_.scale(1/f,1/f),_.translate(d,p),"local"===this.textureSpace&&_.scale(e,e),this.transform=_}destroy(){this.texture?.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};function K(t,e){for(let i=0;i<e.length;i++){let r=e[i];t.addColorStop(r.offset,r.color)}}function Q(t,e){let i=$.DOMAdapter.get().createCanvas(t,e),r=i.getContext("2d");return{canvas:i,context:r}}X.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"},X.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"},t.s(["FillGradient",()=>X],81541);let J=new o.Matrix,tt=new h.Rectangle,te={};e.extensions.handleByMap(e.ExtensionType.ShapeBuilder,te),e.extensions.add(H,U,V,x,y,g);let ti=new h.Rectangle,tr=new o.Matrix;function ts(t,e,i,r,s){let{vertices:a,uvs:n,indices:o}=s;t.shapePrimitives.forEach(({shape:t,transform:h,holes:d})=>{let p=[],x=te[t.type];if(!x.build(t,p))return;let y=o.length,g=a.length/2,b="triangle-list";if(h&&u(p,h),i){let i=t.closePath??!0;e.pixelLine?(!function(t,e,i,r){if(0===t.length)return;let s=t[0],a=t[1],n=t[t.length-2],l=t[t.length-1],o=e||1e-4>Math.abs(s-n)&&1e-4>Math.abs(a-l),h=t.length/2,u=i.length/2;for(let e=0;e<h;e++)i.push(t[2*e]),i.push(t[2*e+1]);for(let t=0;t<h-1;t++)r.push(u+t,u+t+1);o&&r.push(u+h-1,u)}(p,i,a,o),b="line-list"):function(t,e,i,r,s,a){if(0===t.length)return;let n=e.alignment;if(.5!==e.alignment){let e=function(t){let e=t.length;if(e<6)return 1;let i=0;for(let r=0,s=t[e-2],a=t[e-1];r<e;r+=2){let e=t[r],n=t[r+1];i+=(e-s)*(n+a),s=e,a=n}return i<0?-1:1}(t);i&&(e*=-1),n=(n-.5)*e+.5}let l=new _.Point(t[0],t[1]),o=new _.Point(t[t.length-2],t[t.length-1]),h=1e-4>Math.abs(l.x-o.x)&&1e-4>Math.abs(l.y-o.y);if(r){t=t.slice(),h&&(t.pop(),t.pop(),o.set(t[t.length-2],t[t.length-1]));let e=(l.x+o.x)*.5,i=(o.y+l.y)*.5;t.unshift(e,i),t.push(e,i)}let u=t.length/2,c=t.length,d=s.length/2,p=e.width/2,f=p*p,x=e.miterLimit*e.miterLimit,y=t[0],g=t[1],b=t[2],v=t[3],k=0,P=0,A=-(g-v),w=y-b,M=0,T=0,C=Math.sqrt(A*A+w*w);A/=C,w/=C,A*=p,w*=p;let E=n,B=(1-E)*2,F=2*E;r||("round"===e.cap?c+=S(y-A*(B-F)*.5,g-w*(B-F)*.5,y-A*B,g-w*B,y+A*F,g+w*F,s,!0)+2:"square"===e.cap&&(c+=m(y,g,A,w,B,F,!0,s))),s.push(y-A*B,g-w*B),s.push(y+A*F,g+w*F);for(let i=1;i<u-1;++i){y=t[(i-1)*2],g=t[(i-1)*2+1],b=t[2*i],v=t[2*i+1],k=t[(i+1)*2],P=t[(i+1)*2+1],C=Math.sqrt((A=-(g-v))*A+(w=y-b)*w),A/=C,w/=C,A*=p,w*=p,C=Math.sqrt((M=-(v-P))*M+(T=b-k)*T),M/=C,T/=C,M*=p,T*=p;let r=b-y,a=g-v,n=b-k,l=P-v,o=r*n+a*l,h=a*n-l*r,u=h<0;if(Math.abs(h)<.001*Math.abs(o)){s.push(b-A*B,v-w*B),s.push(b+A*F,v+w*F),o>=0&&("round"===e.join?c+=S(b,v,b-A*B,v-w*B,b-M*B,v-T*B,s,!1)+4:c+=2,s.push(b-M*F,v-T*F),s.push(b+M*B,v+T*B));continue}let d=(-A+y)*(-w+v)-(-A+b)*(-w+g),_=(-M+k)*(-T+v)-(-M+b)*(-T+P),m=(r*_-n*d)/h,E=(l*d-a*_)/h,R=(m-b)*(m-b)+(E-v)*(E-v),I=b+(m-b)*B,L=v+(E-v)*B,z=b-(m-b)*F,G=v-(E-v)*F,W=u?B:F;R<=Math.min(r*r+a*a,n*n+l*l)+W*W*f?"bevel"===e.join||R/f>x?(u?(s.push(I,L),s.push(b+A*F,v+w*F),s.push(I,L),s.push(b+M*F,v+T*F)):(s.push(b-A*B,v-w*B),s.push(z,G),s.push(b-M*B,v-T*B),s.push(z,G)),c+=2):"round"===e.join?u?(s.push(I,L),s.push(b+A*F,v+w*F),c+=S(b,v,b+A*F,v+w*F,b+M*F,v+T*F,s,!0)+4,s.push(I,L),s.push(b+M*F,v+T*F)):(s.push(b-A*B,v-w*B),s.push(z,G),c+=S(b,v,b-A*B,v-w*B,b-M*B,v-T*B,s,!1)+4,s.push(b-M*B,v-T*B),s.push(z,G)):(s.push(I,L),s.push(z,G)):(s.push(b-A*B,v-w*B),s.push(b+A*F,v+w*F),"round"===e.join?u?c+=S(b,v,b+A*F,v+w*F,b+M*F,v+T*F,s,!0)+2:c+=S(b,v,b-A*B,v-w*B,b-M*B,v-T*B,s,!1)+2:"miter"===e.join&&R/f<=x&&(u?(s.push(z,G),s.push(z,G)):(s.push(I,L),s.push(I,L)),c+=2),s.push(b-M*B,v-T*B),s.push(b+M*F,v+T*F),c+=2)}y=t[(u-2)*2],g=t[(u-2)*2+1],b=t[(u-1)*2],C=Math.sqrt((A=-(g-(v=t[(u-1)*2+1])))*A+(w=y-b)*w),A/=C,w/=C,A*=p,w*=p,s.push(b-A*B,v-w*B),s.push(b+A*F,v+w*F),r||("round"===e.cap?c+=S(b-A*(B-F)*.5,v-w*(B-F)*.5,b-A*B,v-w*B,b+A*F,v+w*F,s,!1)+2:"square"===e.cap&&(c+=m(b,v,A,w,B,F,!1,s)));let R=1e-4*1e-4;for(let t=d;t<c+d-2;++t)y=s[2*t],g=s[2*t+1],b=s[(t+1)*2],v=s[(t+1)*2+1],k=s[(t+2)*2],Math.abs(y*(v-(P=s[(t+2)*2+1]))+b*(P-g)+k*(g-v))<R||a.push(t,t+1,t+2)}(p,e,!1,i,a,o)}else if(d){let t=[],e=p.slice();(function(t){let e=[];for(let i=0;i<t.length;i++){let r=t[i].shape,s=[];te[r.type].build(r,s)&&e.push(s)}return e})(d).forEach(i=>{t.push(e.length/2),e.push(...i)}),O(e,t,a,2,g,o,y)}else x.triangulate(p,a,2,g,o,y);let v=n.length/2,k=e.texture;if(k!==c.Texture.WHITE){let i=function(t,e,i,r){let s=e.matrix?t.copyFrom(e.matrix).invert():t.identity();if("local"===e.textureSpace){let t=i.getBounds(tt);e.width&&t.pad(e.width);let{x:r,y:a}=t,n=1/t.width,l=1/t.height,o=-r*n,h=-a*l,u=s.a,c=s.b,d=s.c,p=s.d;s.a*=n,s.b*=n,s.c*=l,s.d*=l,s.tx=o*u+h*d+s.tx,s.ty=o*c+h*p+s.ty}else s.translate(e.texture.frame.x,e.texture.frame.y),s.scale(1/e.texture.source.width,1/e.texture.source.height);let a=e.texture.source.style;return e.fill instanceof X||"clamp-to-edge"!==a.addressMode||(a.addressMode="repeat",a.update()),r&&s.append(J.copyFrom(r).invert()),s}(tr,e,t,h);!function(t,e,i,r,s,a,n,l=null){let o=0;i*=2,s*=2;let h=l.a,u=l.b,c=l.c,d=l.d,p=l.tx,f=l.ty;for(;o<n;){let e=t[i],a=t[i+1];r[s]=h*e+c*a+p,r[s+1]=u*e+d*a+f,s+=2,i+=2,o++}}(a,0,g,n,v,0,a.length/2-g,i)}else{var P=v,A=a.length/2-g;let t=0;for(P*=2;t<A;)n[P]=0,n[P+1]=0,P+=2,t++}let w=l.BigPool.get(f);w.indexOffset=y,w.indexSize=o.length-y,w.attributeOffset=g,w.attributeSize=a.length/2-g,w.baseColor=e.color,w.alpha=e.alpha,w.texture=k,w.geometryData=s,w.topology=b,r.push(w)})}class ta{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}reset(){this.batches&&this.batches.forEach(t=>{l.BigPool.return(t)}),this.graphicsData&&l.BigPool.return(this.graphicsData),this.isBatchable=!1,this.context=null,this.batches.length=0,this.geometryData.indices.length=0,this.geometryData.vertices.length=0,this.geometryData.uvs.length=0,this.graphicsData=null}destroy(){this.reset(),this.batches=null,this.geometryData=null}}class tn{constructor(){this.instructions=new s.InstructionSet}init(t){let e=t.maxTextures;this.batcher?this.batcher._updateMaxTextures(e):this.batcher=new r.DefaultBatcher({maxTextures:e}),this.instructions.reset()}get geometry(){return(0,n.deprecation)(n.v8_3_4,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}let tl=class t{constructor(t){this._renderer=t,this._managedContexts=new a.GCManagedHash({renderer:t,type:"resource",name:"graphicsContext"})}init(e){t.defaultOptions.bezierSmoothness=e?.bezierSmoothness??t.defaultOptions.bezierSmoothness}getContextRenderData(t){return t._gpuData[this._renderer.uid].graphicsData||this._initContextRenderData(t)}updateGpuContext(t){let e=!!t._gpuData[this._renderer.uid],i=t._gpuData[this._renderer.uid]||this._initContext(t);if(t.dirty||!e){e&&i.reset(),function(t,e){let{geometryData:i,batches:r}=e;r.length=0,i.indices.length=0,i.vertices.length=0,i.uvs.length=0;for(let e=0;e<t.instructions.length;e++){let s=t.instructions[e];if("texture"===s.action)!function(t,e,i){let r=[],s=te.rectangle;ti.x=t.dx,ti.y=t.dy,ti.width=t.dw,ti.height=t.dh;let a=t.transform;if(!s.build(ti,r))return;let{vertices:n,uvs:o,indices:h}=i,c=h.length,d=n.length/2;a&&u(r,a),s.triangulate(r,n,2,d,h,c);let p=t.image,x=p.uvs;o.push(x.x0,x.y0,x.x1,x.y1,x.x3,x.y3,x.x2,x.y2);let y=l.BigPool.get(f);y.indexOffset=c,y.indexSize=h.length-c,y.attributeOffset=d,y.attributeSize=n.length/2-d,y.baseColor=t.style,y.alpha=t.alpha,y.texture=p,y.geometryData=i,e.push(y)}(s.data,r,i);else if("fill"===s.action||"stroke"===s.action){let t="stroke"===s.action,e=s.data.path.shapePath,a=s.data.style,n=s.data.hole;t&&n&&ts(n.shapePath,a,!0,r,i),n&&(e.shapePrimitives[e.shapePrimitives.length-1].holes=n.shapePath.shapePrimitives),ts(e,a,t,r,i)}}}(t,i);let r=t.batchMode;t.customShader||"no-batch"===r?i.isBatchable=!1:"auto"===r?i.isBatchable=i.geometryData.vertices.length<400:i.isBatchable=!0,t.dirty=!1}return i}getGpuContext(t){return t._gpuData[this._renderer.uid]||this._initContext(t)}_initContextRenderData(t){let e=l.BigPool.get(tn,{maxTextures:this._renderer.limits.maxBatchableTextures}),r=t._gpuData[this._renderer.uid],{batches:s,geometryData:a}=r;r.graphicsData=e;let n=a.vertices.length,o=a.indices.length;for(let t=0;t<s.length;t++)s[t].applyTransform=!1;let h=e.batcher;h.ensureAttributeBuffer(n),h.ensureIndexBuffer(o),h.begin();for(let t=0;t<s.length;t++){let e=s[t];h.add(e)}h.finish(e.instructions);let u=h.geometry;u.indexBuffer.setDataWithSize(h.indexBuffer,h.indexSize,!0),u.buffers[0].setDataWithSize(h.attributeBuffer.float32View,h.attributeSize,!0);let c=h.batches;for(let t=0;t<c.length;t++){let e=c[t];e.bindGroup=(0,i.getTextureBatchBindGroup)(e.textures.textures,e.textures.count,this._renderer.limits.maxBatchableTextures)}return e}_initContext(t){let e=new ta;return e.context=t,t._gpuData[this._renderer.uid]=e,this._managedContexts.add(t),e}destroy(){this._managedContexts.destroy(),this._renderer=null}};tl.extension={type:[e.ExtensionType.WebGLSystem,e.ExtensionType.WebGPUSystem,e.ExtensionType.CanvasSystem],name:"graphicsContext"},tl.defaultOptions={bezierSmoothness:.5},t.s(["GraphicsContextSystem",()=>tl],99166)},44252,91166,t=>{"use strict";var e=t.i(26963),i=t.i(24314),r=t.i(85830),s=t.i(65767),a=t.i(19258),n=t.i(6290),l=t.i(60295),o=t.i(63646),h=t.i(84332),u=t.i(69553),c=t.i(99166);function d(t,e,i,r,s,a,n,l,o,h){var u,d,p;let f=(1-Math.min(.99,Math.max(0,h??c.GraphicsContextSystem.defaultOptions.bezierSmoothness)))/1;return f*=f,function t(e,i,r,s,a,n,l,o,h,u,c){if(c>8)return;let d=(e+r)/2,p=(i+s)/2,f=(r+a)/2,x=(s+n)/2,y=(a+l)/2,g=(n+o)/2,_=(d+f)/2,m=(p+x)/2,S=(f+y)/2,b=(x+g)/2,v=(_+S)/2,k=(m+b)/2;if(c>0){let t=l-e,c=o-i,d=Math.abs((r-l)*c-(s-o)*t),p=Math.abs((a-l)*c-(n-o)*t);if(d>11920929e-14&&p>11920929e-14){if((d+p)*(d+p)<=u*(t*t+c*c))return void h.push(v,k)}else if(d>11920929e-14){if(d*d<=u*(t*t+c*c))return void h.push(v,k)}else if(p>11920929e-14){if(p*p<=u*(t*t+c*c))return void h.push(v,k)}else if((t=v-(e+l)/2)*t+(c=k-(i+o)/2)*c<=u)return void h.push(v,k)}t(e,i,d,p,_,m,v,k,h,u,c+1),t(v,k,S,b,y,g,l,o,h,u,c+1)}(e,i,r,s,a,n,u=l,d=o,p=t,f,0),p.push(u,d),t}function p(t,e,i,r,s,a,n,l){let o=Math.abs(s-a);!n&&s>a?o=2*Math.PI-o:n&&a>s&&(o=2*Math.PI-o),l||(l=Math.max(6,Math.floor(6*Math.pow(r,1/3)*(o/Math.PI))));let h=o/(l=Math.max(l,3)),u=s;h*=n?-1:1;for(let s=0;s<l+1;s++){let s=e+Math.cos(u)*r,a=i+Math.sin(u)*r;t.push(s,a),u+=h}}let f=2*Math.PI,x={centerX:0,centerY:0,ang1:0,ang2:0},y=({x:t,y:e},i,r,s,a,n,l,o)=>{let h=s*(t*=i)-a*(e*=r),u=a*t+s*e;return o.x=h+n,o.y=u+l,o},g=(t,e,i,r)=>{let s=t*i+e*r;return s>1&&(s=1),s<-1&&(s=-1),(t*r-e*i<0?-1:1)*Math.acos(s)},_=new o.Rectangle;class m{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new u.Bounds,this._graphicsPath2D=t,this.signed=t.checkForHoles}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();let i=this._currentPoly.points,r=i[i.length-2],s=i[i.length-1];return(r!==t||s!==e)&&i.push(t,e),this}arc(t,e,i,r,s,a){return this._ensurePoly(!1),p(this._currentPoly.points,t,e,i,r,s,a),this}arcTo(t,e,i,r,s){return this._ensurePoly(),!function(t,e,i,r,s,a){let n=t[t.length-2],l=t[t.length-1]-i,o=n-e,h=s-i,u=r-e,c=Math.abs(l*u-o*h);if(c<1e-8||0===a){(t[t.length-2]!==e||t[t.length-1]!==i)&&t.push(e,i);return}let d=l*l+o*o,f=h*h+u*u,x=l*h+o*u,y=a*Math.sqrt(d)/c,g=a*Math.sqrt(f)/c,_=y*x/d,m=g*x/f,S=y*u+g*o,b=y*h+g*l,v=Math.atan2(l*(g+_)-b,o*(g+_)-S),k=Math.atan2(h*(y+m)-b,u*(y+m)-S);p(t,S+e,b+i,a,v,k,o*h>u*l)}(this._currentPoly.points,t,e,i,r,s),this}arcToSvg(t,e,i,r,s,a,n){return!function(t,e,i,r,s,a,n,l=0,o=0,h=0){var u,c;let p,_,m,S,b,v,k,P,A,w,M;if(0===a||0===n)return;let T=Math.sin(l*f/360),C=Math.cos(l*f/360),E=C*(e-r)/2+T*(i-s)/2,B=-T*(e-r)/2+C*(i-s)/2;if(0===E&&0===B)return;let F=Math.pow(E,2)/Math.pow(a=Math.abs(a),2)+Math.pow(B,2)/Math.pow(n=Math.abs(n),2);F>1&&(a*=Math.sqrt(F),n*=Math.sqrt(F)),u=a,c=n,p=Math.pow(u,2),_=Math.pow(c,2),m=Math.pow(E,2),(b=p*_-p*(S=Math.pow(B,2))-_*m)<0&&(b=0),b/=p*S+_*m,v=(b=Math.sqrt(b)*(o===h?-1:1))*u/c*B,k=-(b*c)/u*E,w=g(1,0,P=(E-v)/u,A=(B-k)/c),M=g(P,A,(-E-v)/u,(-B-k)/c),0===h&&M>0&&(M-=f),1===h&&M<0&&(M+=f),x.centerX=C*v-T*k+(e+r)/2,x.centerY=T*v+C*k+(i+s)/2,x.ang1=w,x.ang2=M;let{ang1:R,ang2:I}=x,{centerX:L,centerY:z}=x,G=Math.abs(I)/(f/4);1e-7>Math.abs(1-G)&&(G=1);let W=Math.max(Math.ceil(G),1);I/=W;let O=t[t.length-2],D=t[t.length-1],U={x:0,y:0};for(let e=0;e<W;e++){let e=function(t,e){let i=-1.5707963267948966===e?-.551915024494:4/3*Math.tan(e/4),r=1.5707963267948966===e?.551915024494:i,s=Math.cos(t),a=Math.sin(t),n=Math.cos(t+e),l=Math.sin(t+e);return[{x:s-a*r,y:a+s*r},{x:n+l*r,y:l-n*r},{x:n,y:l}]}(R,I),{x:i,y:r}=y(e[0],a,n,C,T,L,z,U),{x:s,y:l}=y(e[1],a,n,C,T,L,z,U),{x:o,y:h}=y(e[2],a,n,C,T,L,z,U);d(t,O,D,i,r,s,l,o,h),O=o,D=h,R+=I}}(this._currentPoly.points,this._currentPoly.lastX,this._currentPoly.lastY,a,n,t,e,i,r,s),this}bezierCurveTo(t,e,i,r,s,a,n){this._ensurePoly();let l=this._currentPoly;return d(this._currentPoly.points,l.lastX,l.lastY,t,e,i,r,s,a,n),this}quadraticCurveTo(t,e,i,r,s){var a,n,l,o,h,u,d,p,f,x,y;let g;this._ensurePoly();let _=this._currentPoly;return a=this._currentPoly.points,n=_.lastX,l=_.lastY,g=(1-Math.min(.99,Math.max(0,s??c.GraphicsContextSystem.defaultOptions.bezierSmoothness)))/1,o=n,h=l,u=t,d=e,p=i,f=r,x=a,y=g*=g,function t(e,i,r,s,a,n,l,o,h){if(h>8)return;let u=(i+s)/2,c=(r+a)/2,d=(s+n)/2,p=(a+l)/2,f=(u+d)/2,x=(c+p)/2,y=n-i,g=l-r,_=Math.abs((s-n)*g-(a-l)*y);if(_>11920929e-14){if(_*_<=o*(y*y+g*g))return void e.push(f,x)}else if((y=f-(i+n)/2)*y+(g=x-(r+l)/2)*g<=o)return void e.push(f,x);t(e,i,r,u,c,f,x,o,h+1),t(e,f,x,d,p,n,l,o,h+1)}(x,o,h,u,d,p,f,y,0),x.push(p,f),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0)).transform(e);let i=this.shapePrimitives,r=i.length;for(let e=0;e<t.instructions.length;e++){let i=t.instructions[e];this[i.action](...i.data)}if(t.checkForHoles&&i.length-r>1){let t=null;for(let e=r;e<i.length;e++){let r=i[e];if("polygon"===r.shape.type){let s=r.shape,a=t?.shape;a&&a.containsPolygon(s)?(t.holes||(t.holes=[]),t.holes.push(r),i.copyWithin(e,e+1),i.length--,e--):t=r}}}return this}finish(t=!1){this.endPoly(t)}rect(t,e,i,r,s){return this.drawShape(new o.Rectangle(t,e,i,r),s),this}circle(t,e,i,r){return this.drawShape(new a.Circle(t,e,i),r),this}poly(t,e,i){let r=new l.Polygon(t);return r.closePath=e,this.drawShape(r,i),this}regularPoly(t,e,i,r,s=0,a){let n=-1*Math.PI/2+s,l=2*Math.PI/(r=Math.max(0|r,3)),o=[];for(let s=0;s<r;s++){let r=n-s*l;o.push(t+i*Math.cos(r),e+i*Math.sin(r))}return this.poly(o,!0,a),this}roundPoly(t,e,i,r,s,a=0,n){if(r=Math.max(0|r,3),s<=0)return this.regularPoly(t,e,i,r,a);s=Math.min(s,i*Math.sin(Math.PI/r)-.001);let l=-1*Math.PI/2+a,o=2*Math.PI/r,h=(r-2)*Math.PI/r/2;for(let a=0;a<r;a++){let r=a*o+l,u=t+i*Math.cos(r),c=e+i*Math.sin(r),d=r+Math.PI+h,p=r-Math.PI-h,f=u+s*Math.cos(d),x=c+s*Math.sin(d),y=u+s*Math.cos(p),g=c+s*Math.sin(p);0===a?this.moveTo(f,x):this.lineTo(f,x),this.quadraticCurveTo(u,c,y,g,n)}return this.closePath()}roundShape(t,e,i=!1,r){return t.length<3?this:(i?!function(t,e,i,r){let s=(t,e)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),a=(t,e,i)=>({x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}),n=e.length;for(let l=0;l<n;l++){let o,h,u=e[(l+1)%n],c=u.radius??i;if(c<=0){0===l?t.moveTo(u.x,u.y):t.lineTo(u.x,u.y);continue}let d=e[l],p=e[(l+2)%n],f=s(d,u);o=f<1e-4?u:a(u,d,Math.min(f/2,c)/f);let x=s(p,u);h=x<1e-4?u:a(u,p,Math.min(x/2,c)/x),0===l?t.moveTo(o.x,o.y):t.lineTo(o.x,o.y),t.quadraticCurveTo(u.x,u.y,h.x,h.y,r)}}(this,t,e,r):!function(t,e,i){let r=(t,e)=>{let i=e.x-t.x,r=e.y-t.y,s=Math.sqrt(i*i+r*r);return{len:s,nx:i/s,ny:r/s}},s=(e,i)=>{0===e?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y)},a=e[e.length-1];for(let n=0;n<e.length;n++){let l,o=e[n%e.length],h=o.radius??i;if(h<=0){s(n,o),a=o;continue}let u=e[(n+1)%e.length],c=r(o,a),d=r(o,u);if(c.len<1e-4||d.len<1e-4){s(n,o),a=o;continue}let p=Math.asin(c.nx*d.ny-c.ny*d.nx),f=1,x=!1;c.nx*d.nx- -(c.ny*d.ny)<0?p<0?p=Math.PI+p:(p=Math.PI-p,f=-1,x=!0):p>0&&(f=-1,x=!0);let y=p/2,g=Math.abs(Math.cos(y)*h/Math.sin(y));l=g>Math.min(c.len/2,d.len/2)?Math.abs((g=Math.min(c.len/2,d.len/2))*Math.sin(y)/Math.cos(y)):h;let _=o.x+d.nx*g+-d.ny*l*f,m=o.y+d.ny*g+d.nx*l*f,S=Math.atan2(c.ny,c.nx)+Math.PI/2*f,b=Math.atan2(d.ny,d.nx)-Math.PI/2*f;0===n&&t.moveTo(_+Math.cos(S)*l,m+Math.sin(S)*l),t.arc(_,m,l,S,b,x),a=o}}(this,t,e),this.closePath())}filletRect(t,e,i,r,s){if(0===s)return this.rect(t,e,i,r);let a=Math.min(i,r)/2,n=Math.min(a,Math.max(-a,s)),l=t+i,o=e+r,h=n<0?-n:0,u=Math.abs(n);return this.moveTo(t,e+u).arcTo(t+h,e+h,t+u,e,u).lineTo(l-u,e).arcTo(l-h,e+h,l,e+u,u).lineTo(l,o-u).arcTo(l-h,o-h,t+i-u,o,u).lineTo(t+u,o).arcTo(t+h,o-h,t,o-u,u).closePath()}chamferRect(t,e,i,r,s,a){if(s<=0)return this.rect(t,e,i,r);let n=Math.min(s,Math.min(i,r)/2),l=t+i,o=e+r,h=[t+n,e,l-n,e,l,e+n,l,o-n,l-n,o,t+n,o,t,o-n,t,e+n];for(let t=h.length-1;t>=2;t-=2)h[t]===h[t-2]&&h[t-1]===h[t-3]&&h.splice(t-1,2);return this.poly(h,!0,a)}ellipse(t,e,i,r,s){return this.drawShape(new n.Ellipse(t,e,i,r),s),this}roundRect(t,e,i,r,s,a){return this.drawShape(new h.RoundedRectangle(t,e,i,r,s),a),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let i=this._currentPoly;return i&&this.endPoly(),(i=new l.Polygon).points.push(t,e),this._currentPoly=i,this}endPoly(t=!1){let e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new l.Polygon,t)){let t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let e=t.shape.x,i=t.shape.y;if(t.transform&&!t.transform.isIdentity()){let r=t.transform,s=e;e=r.a*e+r.c*i+r.tx,i=r.b*s+r.d*i+r.ty}this._currentPoly.points.push(e,i)}else this._currentPoly.points.push(0,0)}}buildPath(){let t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){let i=t.instructions[e];this[i.action](...i.data)}this.finish()}get bounds(){let t=this._bounds;t.clear();let e=this.shapePrimitives;for(let i=0;i<e.length;i++){let r=e[i],s=r.shape.getBounds(_);r.transform?t.addRect(s,r.transform):t.addRect(s)}return t}}class S{constructor(t,e=!1){this.instructions=[],this.uid=(0,i.uid)("graphicsPath"),this._dirty=!0,this.checkForHoles=e,"string"==typeof t?(0,s.parseSVGPath)(t,this):this.instructions=t?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new m(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,i,r,s,a){let n=this.instructions[this.instructions.length-1],l=this.getLastPoint(e.Point.shared),o=0,h=0;if(n&&"bezierCurveTo"===n.action){o=n.data[2],h=n.data[3];let t=l.x,e=l.y;o=t+(t-o),h=e+(e-h)}else o=l.x,h=l.y;return this.instructions.push({action:"bezierCurveTo",data:[o,h,t,i,r,s,a]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,i,r){let s=this.instructions[this.instructions.length-1],a=this.getLastPoint(e.Point.shared),n=0,l=0;if(s&&"quadraticCurveTo"===s.action){n=s.data[0],l=s.data[1];let t=a.x,e=a.y;n=t+(t-n),l=e+(e-l)}else n=a.x,l=a.y;return this.instructions.push({action:"quadraticCurveTo",data:[n,l,t,i,r]}),this._dirty=!0,this}rect(t,e,i,r,s){return this.instructions.push({action:"rect",data:[t,e,i,r,s]}),this._dirty=!0,this}circle(t,e,i,r){return this.instructions.push({action:"circle",data:[t,e,i,r]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,e,i,r,s,a,n){s||(s=r/2);let l=-1*Math.PI/2+a,o=2*i,h=2*Math.PI/o,u=[];for(let i=0;i<o;i++){let a=i%2?s:r,n=i*h+l;u.push(t+a*Math.cos(n),e+a*Math.sin(n))}return this.poly(u,!0,n),this}clone(t=!1){let e=new S;if(e.checkForHoles=this.checkForHoles,t)for(let t=0;t<this.instructions.length;t++){let i=this.instructions[t];e.instructions.push({action:i.action,data:i.data.slice()})}else e.instructions=this.instructions.slice();return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;let e=t.a,i=t.b,s=t.c,a=t.d,n=t.tx,l=t.ty,o=0,h=0,u=0,c=0,d=0,p=0,f=0,x=0;for(let y=0;y<this.instructions.length;y++){let g=this.instructions[y],_=g.data;switch(g.action){case"moveTo":case"lineTo":o=_[0],h=_[1],_[0]=e*o+s*h+n,_[1]=i*o+a*h+l;break;case"bezierCurveTo":u=_[0],c=_[1],d=_[2],p=_[3],o=_[4],h=_[5],_[0]=e*u+s*c+n,_[1]=i*u+a*c+l,_[2]=e*d+s*p+n,_[3]=i*d+a*p+l,_[4]=e*o+s*h+n,_[5]=i*o+a*h+l;break;case"quadraticCurveTo":u=_[0],c=_[1],o=_[2],h=_[3],_[0]=e*u+s*c+n,_[1]=i*u+a*c+l,_[2]=e*o+s*h+n,_[3]=i*o+a*h+l;break;case"arcToSvg":o=_[5],h=_[6],f=_[0],x=_[1],_[0]=e*f+s*x,_[1]=i*f+a*x,_[5]=e*o+s*h+n,_[6]=i*o+a*h+l;break;case"circle":_[4]=b(_[3],t);break;case"rect":_[4]=b(_[4],t);break;case"ellipse":_[8]=b(_[8],t);break;case"roundRect":_[5]=b(_[5],t);break;case"addPath":_[0].transform(t);break;case"poly":_[2]=b(_[2],t);break;default:(0,r.warn)("unknown transform action",g.action)}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let e=this.instructions.length-1,i=this.instructions[e];if(!i)return t.x=0,t.y=0,t;for(;"closePath"===i.action;){if(--e<0)return t.x=0,t.y=0,t;i=this.instructions[e]}switch(i.action){case"moveTo":case"lineTo":t.x=i.data[0],t.y=i.data[1];break;case"quadraticCurveTo":t.x=i.data[2],t.y=i.data[3];break;case"bezierCurveTo":t.x=i.data[4],t.y=i.data[5];break;case"arc":case"arcToSvg":t.x=i.data[5],t.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(t)}return t}}function b(t,e){return t?t.prepend(e):e.clone()}t.s(["GraphicsPath",()=>S],44252);var v=t.i(57471),k=t.i(81541);function P(t,e,i){let r=t.getAttribute(e);return r?Number(r):i}function A(t){let e=t.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}let w={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function M(t,e){let i=t.getAttribute("style"),r={},s={},a={strokeStyle:r,fillStyle:s,useFill:!1,useStroke:!1};for(let i in w){let r=t.getAttribute(i);r&&T(e,a,i,r.trim())}if(i){let t=i.split(";");for(let i=0;i<t.length;i++){let[r,s]=t[i].trim().split(":");w[r]&&T(e,a,r,s.trim())}}return{strokeStyle:a.useStroke?r:null,fillStyle:a.useFill?s:null,useFill:a.useFill,useStroke:a.useStroke}}function T(t,e,i,r){switch(i){case"stroke":if("none"!==r){if(r.startsWith("url(")){let i=A(r);e.strokeStyle.fill=t.defs[i]}else e.strokeStyle.color=v.Color.shared.setValue(r).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(r);break;case"fill":if("none"!==r){if(r.startsWith("url(")){let i=A(r);e.fillStyle.fill=t.defs[i]}else e.fillStyle.color=v.Color.shared.setValue(r).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(r);break;case"stroke-opacity":e.strokeStyle.alpha=Number(r);break;case"opacity":e.fillStyle.alpha=Number(r),e.strokeStyle.alpha=Number(r)}}function C(t,e){for(let i of new S(t,!1).instructions)e.instructions.push(i)}function E(t,e){if("string"==typeof t){let e=document.createElement("div");e.innerHTML=t.trim(),t=e.querySelector("svg")}let i={context:e,defs:{},path:new S};!function(t,e){let i=t.querySelectorAll("defs");for(let t=0;t<i.length;t++){let s=i[t];for(let t=0;t<s.children.length;t++){let i=s.children[t];switch(i.nodeName.toLowerCase()){case"lineargradient":e.defs[i.id]=function(t){let e=P(t,"x1",0),i=P(t,"y1",0),r=P(t,"x2",1),s=P(t,"y2",0),a=t.getAttribute("gradientUnits")||"objectBoundingBox",n=new k.FillGradient(e,i,r,s,"objectBoundingBox"===a?"local":"global");for(let e=0;e<t.children.length;e++){let i=t.children[e],r=P(i,"offset",0),s=v.Color.shared.setValue(i.getAttribute("stop-color")).toNumber();n.addColorStop(r,s)}return n}(i);break;case"radialgradient":e.defs[i.id]=((0,r.warn)("[SVG Parser] Radial gradients are not yet supported"),new k.FillGradient(0,0,1,0))}}}}(t,i);let s=t.children,{fillStyle:a,strokeStyle:n}=M(t,i);for(let t=0;t<s.length;t++){let e=s[t];"defs"!==e.nodeName.toLowerCase()&&function t(e,i,s,a){let n,l,o,h,u,c,d,p,f,x,y,g,_,m,b,v,k=e.children,{fillStyle:A,strokeStyle:w}=M(e,i);A&&s?s={...s,...A}:A&&(s=A),w&&a?a={...a,...w}:w&&(a=w);let T=!s&&!a;switch(T&&(s={color:0}),e.nodeName.toLowerCase()){case"path":{_=e.getAttribute("d");let t=e.getAttribute("fill-rule"),r=_.split(/(?=[Mm])/).filter(t=>t.trim().length>0),n=r.length>1;if("evenodd"===t&&n){let t=r.map(t=>({path:t,area:function(t){let e=t.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!e||e.length<4)return 0;let i=e.map(Number),r=[],s=[];for(let t=0;t<i.length;t+=2)t+1<i.length&&(r.push(i[t]),s.push(i[t+1]));if(0===r.length||0===s.length)return 0;let a=Math.min(...r),n=Math.min(...s);return(Math.max(...r)-a)*(Math.max(...s)-n)}(t)}));if(t.sort((t,e)=>e.area-t.area),r.length>3||!function(t){if(t.length<=2)return!0;let e=t.map(t=>t.area).sort((t,e)=>e-t),[i,r]=e,s=e[e.length-1];return!(i/r>3)||!(r/s<2)}(t))for(let e=0;e<t.length;e++){let r=t[e],n=0===e;i.context.beginPath();let l=new S(void 0,!0);C(r.path,l),i.context.path(l),n?(s&&i.context.fill(s),a&&i.context.stroke(a)):i.context.cut()}else for(let e=0;e<t.length;e++){let r=t[e],n=e%2==1;i.context.beginPath();let l=new S(void 0,!0);C(r.path,l),i.context.path(l),n?i.context.cut():(s&&i.context.fill(s),a&&i.context.stroke(a))}}else m=new S(_,!t||"evenodd"===t),i.context.path(m),s&&i.context.fill(s),a&&i.context.stroke(a);break}case"circle":d=P(e,"cx",0),p=P(e,"cy",0),f=P(e,"r",0),i.context.ellipse(d,p,f,f),s&&i.context.fill(s),a&&i.context.stroke(a);break;case"rect":n=P(e,"x",0),l=P(e,"y",0),b=P(e,"width",0),v=P(e,"height",0),x=P(e,"rx",0),y=P(e,"ry",0),x||y?i.context.roundRect(n,l,b,v,x||y):i.context.rect(n,l,b,v),s&&i.context.fill(s),a&&i.context.stroke(a);break;case"ellipse":d=P(e,"cx",0),p=P(e,"cy",0),x=P(e,"rx",0),y=P(e,"ry",0),i.context.beginPath(),i.context.ellipse(d,p,x,y),s&&i.context.fill(s),a&&i.context.stroke(a);break;case"line":o=P(e,"x1",0),h=P(e,"y1",0),u=P(e,"x2",0),c=P(e,"y2",0),i.context.beginPath(),i.context.moveTo(o,h),i.context.lineTo(u,c),a&&i.context.stroke(a);break;case"polygon":g=e.getAttribute("points").match(/-?\d+/g).map(t=>parseInt(t,10)),i.context.poly(g,!0),s&&i.context.fill(s),a&&i.context.stroke(a);break;case"polyline":g=e.getAttribute("points").match(/-?\d+/g).map(t=>parseInt(t,10)),i.context.poly(g,!1),a&&i.context.stroke(a);break;case"g":case"svg":break;default:(0,r.warn)(`[SVG parser] <${e.nodeName}> elements unsupported`)}T&&(s=null);for(let e=0;e<k.length;e++)t(k[e],i,s,a)}(e,i,a,n)}return e}t.s(["SVGParser",()=>E],91166)},37836,t=>{"use strict";var e=t.i(28959),i=t.i(24314);let r={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class s{constructor(t,s){this.uid=(0,i.uid)("fillPattern"),this._tick=0,this.transform=new e.Matrix,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),s&&(t.source.style.addressModeU=r[s].addressModeU,t.source.style.addressModeV=r[s].addressModeV)}setTransform(t){let e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height),this._tick++}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture=t,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}t.s(["FillPattern",()=>s])},20446,86230,t=>{"use strict";var e=t.i(95932),i=t.i(57471),r=t.i(28959),s=t.i(26963),a=t.i(31320),n=t.i(24314),l=t.i(49864),o=t.i(69553),h=t.i(44252),u=t.i(91166),c=t.i(81541),d=t.i(37836);function p(t){return t instanceof d.FillPattern}function f(t){return t instanceof c.FillGradient}function x(t,e,i){return t.fill=e,t.color=0xffffff,t.texture=e.texture,t.matrix=e.transform,{...i,...t}}function y(t,e,i){return e.buildGradient(),t.fill=e,t.color=0xffffff,t.texture=e.texture,t.matrix=e.transform,t.textureSpace=e.textureSpace,{...i,...t}}function g(t,e){let r,s;if(null==t)return null;let n={};if(i.Color.isColorLike(t)){let r;return n.color=(r=i.Color.shared.setValue(t??0)).toNumber(),n.alpha=1===r.alpha?e.alpha:r.alpha,n.texture=a.Texture.WHITE,{...e,...n}}if(t instanceof a.Texture)return n.texture=t,{...e,...n};if(p(t))return x(n,t,e);if(f(t))return y(n,t,e);else if(t.fill&&p(t.fill))return x(t,t.fill,e);else if(t.fill&&f(t.fill))return y(t,t.fill,e);return r={...e,...t},s=i.Color.shared.setValue(r.color),r.alpha*=s.alpha,r.color=s.toNumber(),r}function _(t,e){let{width:i,alignment:r,miterLimit:s,cap:a,join:n,pixelLine:l,...o}=e,h=g(t,o);return h?{width:i,alignment:r,miterLimit:s,cap:a,join:n,pixelLine:l,...h}:null}t.s(["toFillStyle",()=>g,"toStrokeStyle",()=>_],86230);let m=new s.Point,S=new r.Matrix,b=class t extends e.default{constructor(){super(...arguments),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=(0,n.uid)("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this.destroyed=!1,this._activePath=new h.GraphicsPath,this._transform=new r.Matrix,this._fillStyle={...t.defaultFillStyle},this._strokeStyle={...t.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new o.Bounds,this._boundsDirty=!0}clone(){let e=new t;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=g(e,t.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=_(e,t.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=g(e,t.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=g(e,t.defaultStrokeStyle),this}texture(t,e,r,s,a,n){return this.instructions.push({action:"texture",data:{image:t,dx:r||0,dy:s||0,dw:a||t.frame.width,dh:n||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:e?i.Color.shared.setValue(e).toNumber():0xffffff}}),this.onUpdate(),this}beginPath(){return this._activePath=new h.GraphicsPath,this}fill(e,i){let r,s=this.instructions[this.instructions.length-1];return(r=0===this._tick&&s?.action==="stroke"?s.data.path:this._activePath.clone())&&(null!=e&&(void 0!==i&&"number"==typeof e&&((0,l.deprecation)(l.v8_0_0,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:i}),this._fillStyle=g(e,t.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:r}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0),this}_initNextPathLocation(){let{x:t,y:e}=this._activePath.getLastPoint(s.Point.shared);this._activePath.clear(),this._activePath.moveTo(t,e)}stroke(e){let i,r=this.instructions[this.instructions.length-1];return(i=0===this._tick&&r?.action==="fill"?r.data.path:this._activePath.clone())&&(null!=e&&(this._strokeStyle=_(e,t.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0),this}cut(){for(let t=0;t<2;t++){let e=this.instructions[this.instructions.length-1-t],i=this._activePath.clone();if(e&&("stroke"===e.action||"fill"===e.action))if(e.data.hole)e.data.hole.addPath(i);else{e.data.hole=i;break}}return this._initNextPathLocation(),this}arc(t,e,i,r,s,a){this._tick++;let n=this._transform;return this._activePath.arc(n.a*t+n.c*e+n.tx,n.b*t+n.d*e+n.ty,i,r,s,a),this}arcTo(t,e,i,r,s){this._tick++;let a=this._transform;return this._activePath.arcTo(a.a*t+a.c*e+a.tx,a.b*t+a.d*e+a.ty,a.a*i+a.c*r+a.tx,a.b*i+a.d*r+a.ty,s),this}arcToSvg(t,e,i,r,s,a,n){this._tick++;let l=this._transform;return this._activePath.arcToSvg(t,e,i,r,s,l.a*a+l.c*n+l.tx,l.b*a+l.d*n+l.ty),this}bezierCurveTo(t,e,i,r,s,a,n){this._tick++;let l=this._transform;return this._activePath.bezierCurveTo(l.a*t+l.c*e+l.tx,l.b*t+l.d*e+l.ty,l.a*i+l.c*r+l.tx,l.b*i+l.d*r+l.ty,l.a*s+l.c*a+l.tx,l.b*s+l.d*a+l.ty,n),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(t,e,i,r){return this._tick++,this._activePath.ellipse(t,e,i,r,this._transform.clone()),this}circle(t,e,i){return this._tick++,this._activePath.circle(t,e,i,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,e){this._tick++;let i=this._transform;return this._activePath.lineTo(i.a*t+i.c*e+i.tx,i.b*t+i.d*e+i.ty),this}moveTo(t,e){this._tick++;let i=this._transform,r=this._activePath.instructions,s=i.a*t+i.c*e+i.tx,a=i.b*t+i.d*e+i.ty;return 1===r.length&&"moveTo"===r[0].action?(r[0].data[0]=s,r[0].data[1]=a):this._activePath.moveTo(s,a),this}quadraticCurveTo(t,e,i,r,s){this._tick++;let a=this._transform;return this._activePath.quadraticCurveTo(a.a*t+a.c*e+a.tx,a.b*t+a.d*e+a.ty,a.a*i+a.c*r+a.tx,a.b*i+a.d*r+a.ty,s),this}rect(t,e,i,r){return this._tick++,this._activePath.rect(t,e,i,r,this._transform.clone()),this}roundRect(t,e,i,r,s){return this._tick++,this._activePath.roundRect(t,e,i,r,s,this._transform.clone()),this}poly(t,e){return this._tick++,this._activePath.poly(t,e,this._transform.clone()),this}regularPoly(t,e,i,r,s=0,a){return this._tick++,this._activePath.regularPoly(t,e,i,r,s,a),this}roundPoly(t,e,i,r,s,a){return this._tick++,this._activePath.roundPoly(t,e,i,r,s,a),this}roundShape(t,e,i,r){return this._tick++,this._activePath.roundShape(t,e,i,r),this}filletRect(t,e,i,r,s){return this._tick++,this._activePath.filletRect(t,e,i,r,s),this}chamferRect(t,e,i,r,s,a){return this._tick++,this._activePath.chamferRect(t,e,i,r,s,a),this}star(t,e,i,r,s=0,a=0){return this._tick++,this._activePath.star(t,e,i,r,s,a,this._transform.clone()),this}svg(t){return this._tick++,(0,u.SVGParser)(t,this),this}restore(){let t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,e=t){return this._transform.scale(t,e),this}setTransform(t,e,i,s,a,n){return t instanceof r.Matrix?this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty):this._transform.set(t,e,i,s,a,n),this}transform(t,e,i,s,a,n){return t instanceof r.Matrix?this._transform.append(t):(S.set(t,e,i,s,a,n),this._transform.append(S)),this}translate(t,e=t){return this._transform.translate(t,e),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,this.dirty||(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;let t=this._bounds;t.clear();for(let e=0;e<this.instructions.length;e++){let i=this.instructions[e],r=i.action;if("fill"===r){let e=i.data;t.addBounds(e.path.bounds)}else if("texture"===r){let e=i.data;t.addFrame(e.dx,e.dy,e.dx+e.dw,e.dy+e.dh,e.transform)}if("stroke"===r){let e=i.data,r=e.style.alignment,s=e.style.width*(1-r),a=e.path.bounds;t.addFrame(a.minX-s,a.minY-s,a.maxX+s,a.maxY+s)}}return t}containsPoint(t){if(!this.bounds.containsPoint(t.x,t.y))return!1;let e=this.instructions,i=!1;for(let r=0;r<e.length;r++){let s=e[r],a=s.data,n=a.path;if(!s.action||!n)continue;let l=a.style,o=n.shapePath.shapePrimitives;for(let e=0;e<o.length;e++){let r=o[e].shape;if(!l||!r)continue;let n=o[e].transform,h=n?n.applyInverse(t,m):t;i="fill"===s.action?r.contains(h.x,h.y):r.strokeContains(h.x,h.y,l.width,l.alignment);let u=a.hole;if(u){let t=u.shapePath?.shapePrimitives;if(t)for(let e=0;e<t.length;e++)t[e].shape.contains(h.x,h.y)&&(i=!1)}if(i)return!0}}return i}unload(){for(let t in this.emit("unload",this),this._gpuData)this._gpuData[t]?.destroy();this._gpuData=Object.create(null)}destroy(t=!1){if(!this.destroyed){if(this.destroyed=!0,this._stateStack.length=0,this._transform=null,this.unload(),this.emit("destroy",this),this.removeAllListeners(),"boolean"==typeof t?t:t?.texture){let e="boolean"==typeof t?t:t?.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(e)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(e))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}}};b.defaultFillStyle={color:0xffffff,alpha:1,texture:a.Texture.WHITE,matrix:null,fill:null,textureSpace:"local"},b.defaultStrokeStyle={width:1,color:0xffffff,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:a.Texture.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1},t.s(["GraphicsContext",()=>b],20446)},94425,t=>{"use strict";var e=t.i(49864),i=t.i(97377),r=t.i(20446);class s extends i.ViewContainer{constructor(t){t instanceof r.GraphicsContext&&(t={context:t});const{context:e,roundPixels:i,...s}=t||{};super({label:"Graphics",...s}),this.renderPipeId="graphics",e?this.context=e:(this.context=this._ownedContext=new r.GraphicsContext,this.context.autoGarbageCollect=this.autoGarbageCollect),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=i??!1}set context(t){t!==this._context&&(this._context&&(this._context.off("update",this.onViewUpdate,this),this._context.off("unload",this.unload,this)),this._context=t,this._context.on("update",this.onViewUpdate,this),this._context.on("unload",this.unload,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(t){return this._context.containsPoint(t)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(!0===t||t?.context===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_onTouch(t){this._gcLastUsed=t,this._context._gcLastUsed=t}_callContextMethod(t,e){return this.context[t](...e),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new s(this._context.clone()):(this._ownedContext=null,new s(this._context))}lineStyle(t,i,r){(0,e.deprecation)(e.v8_0_0,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");let s={};return t&&(s.width=t),i&&(s.color=i),r&&(s.alpha=r),this.context.strokeStyle=s,this}beginFill(t,i){(0,e.deprecation)(e.v8_0_0,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");let r={};return void 0!==t&&(r.color=t),void 0!==i&&(r.alpha=i),this.context.fillStyle=r,this}endFill(){(0,e.deprecation)(e.v8_0_0,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();let t=this.context.strokeStyle;return(t.width!==r.GraphicsContext.defaultStrokeStyle.width||t.color!==r.GraphicsContext.defaultStrokeStyle.color||t.alpha!==r.GraphicsContext.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return(0,e.deprecation)(e.v8_0_0,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return(0,e.deprecation)(e.v8_0_0,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return(0,e.deprecation)(e.v8_0_0,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return(0,e.deprecation)(e.v8_0_0,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return(0,e.deprecation)(e.v8_0_0,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return(0,e.deprecation)(e.v8_0_0,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}t.s(["Graphics",()=>s])},24183,77397,264,78266,70,t=>{"use strict";var e=t.i(57471),i=t.i(63646),r=t.i(81735),s=t.i(27402),a=t.i(61411);let n=null,l=null;function o(t,e,i){for(let r=0,s=4*i*e;r<e;++r,s+=4)if(0!==t[s+3])return!1;return!0}function h(t,e,i,r,s){let a=4*e;for(let e=r,n=r*a+4*i;e<=s;++e,n+=a)if(0!==t[n+3])return!1;return!0}class u{constructor(t=0,e=0,i=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=t,this.resetTtl=i,this.size=0,this.ttl=e}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(t){if(this.has(t)){let e=this.items[t];delete this.items[t],this.size--,null!==e.prev&&(e.prev.next=e.next),null!==e.next&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),this.last===e&&(this.last=e.prev)}return this}entries(t=this.keys()){let e=Array(t.length);for(let i=0;i<t.length;i++){let r=t[i];e[i]=[r,this.get(r)]}return e}evict(t=!1){if(t||this.size>0){let t=this.first;delete this.items[t.key],0==--this.size?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}return this}expiresAt(t){let e;return this.has(t)&&(e=this.items[t].expiry),e}get(t){let e=this.items[t];if(void 0!==e)return this.ttl>0&&e.expiry<=Date.now()?void this.delete(t):(this.moveToEnd(e),e.value)}has(t){return t in this.items}moveToEnd(t){this.last!==t&&(null!==t.prev&&(t.prev.next=t.next),null!==t.next&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),t.prev=this.last,t.next=null,null!==this.last&&(this.last.next=t),this.last=t,null===this.first&&(this.first=t))}keys(){let t=Array(this.size),e=this.first,i=0;for(;null!==e;)t[i++]=e.key,e=e.next;return t}setWithEvicted(t,e,i=this.resetTtl){let r=null;if(this.has(t))this.set(t,e,!0,i);else{this.max>0&&this.size===this.max&&(r={...this.first},this.evict(!0));let i=this.items[t]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:e};1==++this.size?this.first=i:this.last.next=i,this.last=i}return r}set(t,e,i=!1,r=this.resetTtl){let s=this.items[t];return i||void 0!==s?(s.value=e,!1===i&&r&&(s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(s)):(this.max>0&&this.size===this.max&&this.evict(!0),s=this.items[t]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:e},1==++this.size?this.first=s:this.last.next=s,this.last=s),this}values(t=this.keys()){let e=Array(t.length);for(let i=0;i<t.length;i++)e[i]=this.get(t[i]);return e}}function c(t=1e3,e=0,i=!1){if(isNaN(t)||t<0)throw TypeError("Invalid max value");if(isNaN(e)||e<0)throw TypeError("Invalid ttl value");if("boolean"!=typeof i)throw TypeError("Invalid resetTtl value");return new u(t,e,i)}t.s(["lru",()=>c],77397);let d=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function p(t){let e="number"==typeof t.fontSize?`${t.fontSize}px`:t.fontSize,i=t.fontFamily;Array.isArray(t.fontFamily)||(i=t.fontFamily.split(","));for(let t=i.length-1;t>=0;t--){let e=i[t].trim();/([\"\'])[^\'\"]+\1/.test(e)||d.includes(e)||(e=`"${e}"`),i[t]=e}return`${t.fontStyle} ${t.fontVariant} ${t.fontWeight} ${e} ${i.join(",")}`}t.s(["fontStringFromTextStyle",()=>p],264);let f={willReadFrequently:!0},x=class t{static get experimentalLetterSpacingSupported(){let e=t._experimentalLetterSpacingSupported;if(void 0===e){let i=s.DOMAdapter.get().getCanvasRenderingContext2D().prototype;e=t._experimentalLetterSpacingSupported="letterSpacing"in i||"textLetterSpacing"in i}return e}constructor(t,e,i,r,s,a,n,l,o){this.text=t,this.style=e,this.width=i,this.height=r,this.lines=s,this.lineWidths=a,this.lineHeight=n,this.maxLineWidth=l,this.fontProperties=o}static measureText(e=" ",i,r=t._canvas,s=i.wordWrap){let a=`${e}-${i.styleKey}-wordWrap-${s}`;if(t._measurementCache.has(a))return t._measurementCache.get(a);let n=p(i),l=t.measureFont(n);0===l.fontSize&&(l.fontSize=i.fontSize,l.ascent=i.fontSize);let o=t.__context;o.font=n;let h=(s?t._wordWrap(e,i,r):e).split(/(?:\r\n|\r|\n)/),u=Array(h.length),c=0;for(let e=0;e<h.length;e++){let r=t._measureText(h[e],i.letterSpacing,o);u[e]=r,c=Math.max(c,r)}let d=i._stroke?.width||0,f=c+d;i.dropShadow&&(f+=i.dropShadow.distance);let x=i.lineHeight||l.fontSize,y=Math.max(x,l.fontSize+d)+(h.length-1)*(x+i.leading);i.dropShadow&&(y+=i.dropShadow.distance);let g=new t(e,i,f,y,h,u,x+i.leading,c,l);return t._measurementCache.set(a,g),g}static _measureText(e,i,r){let s=!1;t.experimentalLetterSpacingSupported&&(t.experimentalLetterSpacing?(r.letterSpacing=`${i}px`,r.textLetterSpacing=`${i}px`,s=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let a=r.measureText(e),n=a.width,l=-a.actualBoundingBoxLeft,o=a.actualBoundingBoxRight-l;if(n>0)if(s)n-=i,o-=i;else{let r=(t.graphemeSegmenter(e).length-1)*i;n+=r,o+=r}return Math.max(n,o)}static _wordWrap(e,i,r=t._canvas){let s=r.getContext("2d",f),a=0,n="",l="",o=Object.create(null),{letterSpacing:h,whiteSpace:u}=i,c=t._collapseSpaces(u),d=t._collapseNewlines(u),p=!c,x=i.wordWrapWidth+h,y=t._tokenize(e);for(let e=0;e<y.length;e++){let r=y[e];if(t._isNewline(r)){if(!d){l+=t._addLine(n),p=!c,n="",a=0;continue}r=" "}if(c){let e=t.isBreakingSpace(r),i=t.isBreakingSpace(n[n.length-1]);if(e&&i)continue}let u=t._getFromCache(r,h,o,s);if(u>x)if(""!==n&&(l+=t._addLine(n),n="",a=0),t.canBreakWords(r,i.breakWords)){let e=t.wordWrapSplit(r);for(let u=0;u<e.length;u++){let c=e[u],d=c,f=1;for(;e[u+f];){let s=e[u+f];if(t.canBreakChars(d,s,r,u,i.breakWords))break;c+=s,d=s,f++}u+=f-1;let y=t._getFromCache(c,h,o,s);y+a>x&&(l+=t._addLine(n),p=!1,n="",a=0),n+=c,a+=y}}else{n.length>0&&(l+=t._addLine(n),n="",a=0);let i=e===y.length-1;l+=t._addLine(r,!i),p=!1,n="",a=0}else u+a>x&&(p=!1,l+=t._addLine(n),n="",a=0),(n.length>0||!t.isBreakingSpace(r)||p)&&(n+=r,a+=u)}return l+t._addLine(n,!1)}static _addLine(e,i=!0){return e=t._trimRight(e),e=i?`${e}
`:e}static _getFromCache(e,i,r,s){let a=r[e];return"number"!=typeof a&&(a=t._measureText(e,i,s)+i,r[e]=a),a}static _collapseSpaces(t){return"normal"===t||"pre-line"===t}static _collapseNewlines(t){return"normal"===t}static _trimRight(e){if("string"!=typeof e)return"";for(let i=e.length-1;i>=0;i--){let r=e[i];if(!t.isBreakingSpace(r))break;e=e.slice(0,-1)}return e}static _isNewline(e){return"string"==typeof e&&t._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,i){return"string"==typeof e&&t._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){let i=[],r="";if("string"!=typeof e)return i;for(let s=0;s<e.length;s++){let a=e[s],n=e[s+1];if(t.isBreakingSpace(a,n)||t._isNewline(a)){""!==r&&(i.push(r),r=""),"\r"===a&&"\n"===n?(i.push("\r\n"),s++):i.push(a);continue}r+=a}return""!==r&&i.push(r),i}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,r,s){return!0}static wordWrapSplit(e){return t.graphemeSegmenter(e)}static measureFont(e){if(t._fonts[e])return t._fonts[e];let i=t._context;i.font=e;let r=i.measureText(t.METRICS_STRING+t.BASELINE_SYMBOL),s={ascent:r.actualBoundingBoxAscent,descent:r.actualBoundingBoxDescent,fontSize:r.actualBoundingBoxAscent+r.actualBoundingBoxDescent};return t._fonts[e]=s,s}static clearMetrics(e=""){e?delete t._fonts[e]:t._fonts={}}static get _canvas(){if(!t.__canvas){let e;try{let i=new OffscreenCanvas(0,0),r=i.getContext("2d",f);if(r?.measureText)return t.__canvas=i,i;e=s.DOMAdapter.get().createCanvas()}catch(t){e=s.DOMAdapter.get().createCanvas()}e.width=e.height=10,t.__canvas=e}return t.__canvas}static get _context(){return t.__context||(t.__context=t._canvas.getContext("2d",f)),t.__context}};x.METRICS_STRING="|q",x.BASELINE_SYMBOL="M",x.BASELINE_MULTIPLIER=1.4,x.HEIGHT_MULTIPLIER=2,x.graphemeSegmenter=(()=>{if("function"==typeof Intl?.Segmenter){let t=new Intl.Segmenter;return e=>{let i=t.segment(e),r=[],s=0;for(let t of i)r[s++]=t.segment;return r}}return t=>[...t]})(),x.experimentalLetterSpacing=!1,x._fonts={},x._newlines=[10,13],x._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],x._measurementCache=c(1e3),t.s(["CanvasTextMetrics",()=>x],78266);var y=t.i(28959),g=t.i(31320),_=t.i(85830),m=t.i(81541),S=t.i(37836);function b(t,i,r,s=0){if(t.texture===g.Texture.WHITE&&!t.fill)return e.Color.shared.setValue(t.color).setAlpha(t.alpha??1).toHexa();if(t.fill){if(t.fill instanceof S.FillPattern){let e=t.fill,r=i.createPattern(e.texture.source.resource,"repeat"),s=e.transform.copyTo(y.Matrix.shared);return s.scale(e.texture.frame.width,e.texture.frame.height),r.setTransform(s),r}else if(t.fill instanceof m.FillGradient){let a,n=t.fill,l="linear"===n.type,o="local"===n.textureSpace,h=1,u=1;o&&r&&(h=r.width+s,u=r.height+s);let c=!1;if(l){let{start:t,end:e}=n;a=i.createLinearGradient(t.x*h,t.y*u,e.x*h,e.y*u),c=Math.abs(e.x-t.x)<Math.abs((e.y-t.y)*.1)}else{let{center:t,innerRadius:e,outerCenter:r,outerRadius:s}=n;a=i.createRadialGradient(t.x*h,t.y*u,e*h,r.x*h,r.y*u,s*h)}if(c&&o&&r){let t=r.lineHeight/u;for(let i=0;i<r.lines.length;i++){let l=(i*r.lineHeight+s/2)/u;n.colorStops.forEach(i=>{let r=l+i.offset*t;a.addColorStop(Math.floor(1e5*r)/1e5,e.Color.shared.setValue(i.color).toHex())})}}else n.colorStops.forEach(t=>{a.addColorStop(t.offset,e.Color.shared.setValue(t.color).toHex())});return a}}else{let e=i.createPattern(t.texture.source.resource,"repeat"),r=t.matrix.copyTo(y.Matrix.shared);return r.scale(t.texture.frame.width,t.texture.frame.height),e.setTransform(r),e}return(0,_.warn)("FillStyle not recognised",t),"red"}t.s(["getCanvasFillStyle",()=>b],70);let v=new i.Rectangle,k=new class{getCanvasAndContext(t){let{text:e,style:u,resolution:c=1}=t,d=u._getFinalPadding(),p=x.measureText(e||" ",u),f=Math.ceil(Math.ceil(Math.max(1,p.width)+2*d)*c),y=Math.ceil(Math.ceil(Math.max(1,p.height)+2*d)*c),g=r.CanvasPool.getOptimalCanvasAndContext(f,y);this._renderTextToCanvas(e,u,d,c,g);let _=u.trim?function(...t){let e=t[0];e.canvas||(e={canvas:t[0],resolution:t[1]});let{canvas:r}=e,u=Math.min(e.resolution??1,1),c=e.width??r.width,d=e.height??r.height,p=e.output;if(n||((l=(n=s.DOMAdapter.get().createCanvas(256,128)).getContext("2d",{willReadFrequently:!0})).globalCompositeOperation="copy",l.globalAlpha=1),(n.width<c||n.height<d)&&(n.width=(0,a.nextPow2)(c),n.height=(0,a.nextPow2)(d)),!l)throw TypeError("Failed to get canvas 2D context");l.drawImage(r,0,0,c,d,0,0,c*u,d*u);let f=l.getImageData(0,0,c,d).data,x=0,y=0,g=c-1,_=d-1;for(;y<d&&o(f,c,y);)++y;if(y===d)return i.Rectangle.EMPTY;for(;o(f,c,_);)--_;for(;h(f,c,x,y,_);)++x;for(;h(f,c,g,y,_);)--g;return++g,++_,l.globalCompositeOperation="source-over",l.strokeRect(x,y,g-x,_-y),l.globalCompositeOperation="copy",p??(p=new i.Rectangle),p.set(x/u,y/u,(g-x)/u,(_-y)/u),p}({canvas:g.canvas,width:f,height:y,resolution:1,output:v}):v.set(0,0,f,y);return{canvasAndContext:g,frame:_}}returnCanvasAndContext(t){r.CanvasPool.returnCanvasAndContext(t)}_renderTextToCanvas(t,i,r,s,a){let n,l,{canvas:o,context:h}=a,u=p(i),c=x.measureText(t||" ",i),d=c.lines,f=c.lineHeight,y=c.lineWidths,g=c.maxLineWidth,_=c.fontProperties,m=o.height;if(h.resetTransform(),h.scale(s,s),h.textBaseline=i.textBaseline,i._stroke?.width){let t=i._stroke;h.lineWidth=t.width,h.miterLimit=t.miterLimit,h.lineJoin=t.join,h.lineCap=t.cap}h.font=u;let S=i.dropShadow?2:1;for(let t=0;t<S;++t){let o=i.dropShadow&&0===t,u=o?Math.ceil(Math.max(1,m)+2*r):0,p=u*s;if(o){h.fillStyle="black",h.strokeStyle="black";let t=i.dropShadow,r=t.color,a=t.alpha;h.shadowColor=e.Color.shared.setValue(r).setAlpha(a).toRgbaString();let n=t.blur*s,l=t.distance*s;h.shadowBlur=n,h.shadowOffsetX=Math.cos(t.angle)*l,h.shadowOffsetY=Math.sin(t.angle)*l+p}else{if(h.fillStyle=i._fill?b(i._fill,h,c,2*r):null,i._stroke?.width){let t=.5*i._stroke.width+2*r;h.strokeStyle=b(i._stroke,h,c,t)}h.shadowColor="black"}let x=(f-_.fontSize)/2;f-_.fontSize<0&&(x=0);let S=i._stroke?.width??0;for(let t=0;t<d.length;t++)n=S/2,l=S/2+t*f+_.ascent+x,"right"===i.align?n+=g-y[t]:"center"===i.align&&(n+=(g-y[t])/2),i._stroke?.width&&this._drawLetterSpacing(d[t],i,a,n+r,l+r-u,!0),void 0!==i._fill&&this._drawLetterSpacing(d[t],i,a,n+r,l+r-u)}}_drawLetterSpacing(t,e,i,r,s,a=!1){let{context:n}=i,l=e.letterSpacing,o=!1;if(x.experimentalLetterSpacingSupported&&(x.experimentalLetterSpacing?(n.letterSpacing=`${l}px`,n.textLetterSpacing=`${l}px`,o=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px")),0===l||o)return void(a?n.strokeText(t,r,s):n.fillText(t,r,s));let h=r,u=x.graphemeSegmenter(t),c=n.measureText(t).width,d=0;for(let t=0;t<u.length;++t){let e=u[t];a?n.strokeText(e,h,s):n.fillText(e,h,s);let i="";for(let e=t+1;e<u.length;++e)i+=u[e];h+=c-(d=n.measureText(i).width)+l,c=d}}};t.s(["CanvasTextGenerator",()=>k],24183)},73239,t=>{"use strict";var e=t.i(95932),i=t.i(57471),r=t.i(24314),s=t.i(49864),a=t.i(85830),n=t.i(81541),l=t.i(37836),o=t.i(20446),h=t.i(86230);let u=class t extends e.default{constructor(e={}){super(),this.uid=(0,r.uid)("textStyle"),this._tick=0,function(t){if("boolean"==typeof t.dropShadow&&t.dropShadow){let e=u.defaultDropShadow;t.dropShadow={alpha:t.dropShadowAlpha??e.alpha,angle:t.dropShadowAngle??e.angle,blur:t.dropShadowBlur??e.blur,color:t.dropShadowColor??e.color,distance:t.dropShadowDistance??e.distance}}if(void 0!==t.strokeThickness){(0,s.deprecation)(s.v8_0_0,"strokeThickness is now a part of stroke");let e=t.stroke,r={};if(i.Color.isColorLike(e))r.color=e;else if(e instanceof n.FillGradient||e instanceof l.FillPattern)r.fill=e;else if(Object.hasOwnProperty.call(e,"color")||Object.hasOwnProperty.call(e,"fill"))r=e;else throw Error("Invalid stroke value.");t.stroke={...r,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){if((0,s.deprecation)(s.v8_0_0,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(t.fill)||0===t.fill.length)throw Error("Invalid fill value. Expected an array of colors for gradient fill.");t.fill.length!==t.fillGradientStops.length&&(0,a.warn)("The number of fill colors must match the number of fill gradient stops.");let e=new n.FillGradient({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),r=t.fillGradientStops.slice(),l=t.fill.map(t=>i.Color.shared.setValue(t).toNumber());r.forEach((t,i)=>{e.addColorStop(t,l[i])}),t.fill={fill:e}}}(e);const o={...t.defaultTextStyle,...e};for(const t in o)this[t]=o[t];this.update(),this._tick=0}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.update())}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(null!==e&&"object"==typeof e?this._dropShadow=this._createProxy({...t.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...t.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily!==t&&(this._fontFamily=t,this.update())}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&("string"==typeof t?this._fontSize=parseInt(t,10):this._fontSize=t,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.update())}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.update())}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.update())}get filters(){return this._filters}set filters(t){this._filters!==t&&(this._filters=Object.freeze(t),this.update())}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.update())}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...o.GraphicsContext.defaultFillStyle,...t},()=>{this._fill=(0,h.toFillStyle)({...this._originalFill},o.GraphicsContext.defaultFillStyle)})),this._fill=(0,h.toFillStyle)(0===t?"black":t,o.GraphicsContext.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...o.GraphicsContext.defaultStrokeStyle,...t},()=>{this._stroke=(0,h.toStrokeStyle)({...this._originalStroke},o.GraphicsContext.defaultStrokeStyle)})),this._stroke=(0,h.toStrokeStyle)(t,o.GraphicsContext.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){let e=t.defaultTextStyle;for(let t in e)this[t]=e[t]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new t({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let t=0;if(this._filters)for(let e=0;e<this._filters.length;e++)t+=this._filters[e].padding;return Math.max(this._padding,t)}destroy(t=!1){if(this.removeAllListeners(),"boolean"==typeof t?t:t?.texture){let e="boolean"==typeof t?t:t?.textureSource;this._fill?.texture&&this._fill.texture.destroy(e),this._originalFill?.texture&&this._originalFill.texture.destroy(e),this._stroke?.texture&&this._stroke.texture.destroy(e),this._originalStroke?.texture&&this._originalStroke.texture.destroy(e)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,e){return new Proxy(t,{set:(t,i,r)=>t[i]===r||(t[i]=r,e?.(i,r),this.update(),!0)})}_isFillStyle(t){return(t??null)!==null&&!(i.Color.isColorLike(t)||t instanceof n.FillGradient||t instanceof l.FillPattern)}};u.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5},u.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100},t.s(["TextStyle",()=>u])}]);