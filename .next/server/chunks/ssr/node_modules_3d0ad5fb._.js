module.exports=[48406,95318,85863,19548,55609,a=>{"use strict";let b;var c=a.i(44373),d=a.i(66184),e=a.i(83813),f=a.i(89341);let g=new e.Bounds;function h(a,b,c){a.measurable=!0,(0,f.getGlobalBounds)(a,c,g),b.addBoundsMask(g),a.measurable=!1}var i=a.i(62959),j=a.i(1344),k=a.i(51983);function l(a,b,c){let d=j.boundsPool.get();a.measurable=!0;let e=j.matrixPool.get().identity(),f=function a(b,c,d){return b?b!==c&&(a(b.parent,c,d),b.updateLocalTransform(),d.append(b.localTransform)):(0,k.warn)("Mask bounds, renderable is not inside the root container"),d}(a,c,e);(0,i.getLocalBounds)(a,d,f),a.measurable=!1,b.addBoundsMask(d),j.matrixPool.return(e),j.boundsPool.return(d)}class m{constructor(a){this.priority=0,this.inverse=!1,this.pipe="alphaMask",a?.mask&&this.init(a.mask)}init(a){this.mask=a,this.renderMaskToTexture=!(a instanceof d.Sprite),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){null!==this.mask&&(this.mask.measurable=!0,this.mask=null)}addBounds(a,b){this.inverse||h(this.mask,a,b)}addLocalBounds(a,b){l(this.mask,a,b)}containsPoint(a,b){return b(this.mask,a)}destroy(){this.reset()}static test(a){return a instanceof d.Sprite}}m.extension=c.ExtensionType.MaskEffect,a.s(["AlphaMask",()=>m],48406);class n{constructor(a){this.priority=0,this.pipe="colorMask",a?.mask&&this.init(a.mask)}init(a){this.mask=a}destroy(){}static test(a){return"number"==typeof a}}n.extension=c.ExtensionType.MaskEffect,a.s(["ColorMask",()=>n],95318);var o=a.i(84764);class p{constructor(a){this.priority=0,this.pipe="stencilMask",a?.mask&&this.init(a.mask)}init(a){this.mask=a,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){null!==this.mask&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(a,b){h(this.mask,a,b)}addLocalBounds(a,b){l(this.mask,a,b)}containsPoint(a,b){return b(this.mask,a)}destroy(){this.reset()}static test(a){return a instanceof o.Container}}p.extension=c.ExtensionType.MaskEffect,a.s(["StencilMask",()=>p],85863);var q=a.i(31394);class r extends q.TextureSource{constructor(a){super(a),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(a){return globalThis.HTMLImageElement&&a instanceof HTMLImageElement||"u">typeof ImageBitmap&&a instanceof ImageBitmap||globalThis.VideoFrame&&a instanceof VideoFrame}}r.extension=c.ExtensionType.TextureSource,a.s(["ImageSource",()=>r],19548);var s=a.i(83717),t=a.i(58422);async function u(){return b??(b=(async()=>{let a=t.DOMAdapter.get().createCanvas(1,1).getContext("webgl");if(!a)return"premultiply-alpha-on-upload";let b=await new Promise(a=>{let b=document.createElement("video");b.onloadeddata=()=>a(b),b.onerror=()=>a(null),b.autoplay=!1,b.crossOrigin="anonymous",b.preload="auto",b.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",b.load()});if(!b)return"premultiply-alpha-on-upload";let c=a.createTexture();a.bindTexture(a.TEXTURE_2D,c);let d=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,d),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,c,0),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,a.NONE),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b);let e=new Uint8Array(4);return a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,e),a.deleteFramebuffer(d),a.deleteTexture(c),a.getExtension("WEBGL_lose_context")?.loseContext(),e[0]<=e[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),b}var v=q;let w=class a extends v.TextureSource{constructor(b){super(b),this.isReady=!1,this.uploadMethodId="video",b={...a.defaultOptions,...b},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=b.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==b.autoPlay,this.alphaMode=b.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),!1!==b.autoLoad&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){let a=s.Ticker.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-a)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;let a=this.resource,b=this.options;return(a.readyState===a.HAVE_ENOUGH_DATA||a.readyState===a.HAVE_FUTURE_DATA)&&a.width&&a.height&&(a.complete=!0),a.addEventListener("play",this._onPlayStart),a.addEventListener("pause",this._onPlayStop),a.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(b.preload||a.addEventListener("canplay",this._onCanPlay),a.addEventListener("canplaythrough",this._onCanPlayThrough),a.addEventListener("error",this._onError,!0)),this.alphaMode=await u(),this._load=new Promise((c,d)=>{this.isValid?c(this):(this._resolve=c,this._reject=d,void 0!==b.preloadTimeoutMs&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${b.preloadTimeoutMs}ms`))})),a.load())}),this._load}_onError(a){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",a),this._reject&&(this._reject(a),this._reject=null,this._resolve=null)}_isSourcePlaying(){let a=this.resource;return!a.paused&&!a.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){let a=this.resource;this.isValid&&(this.isReady=!0,this.resize(a.videoWidth,a.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();let a=this.resource;a&&(a.removeEventListener("play",this._onPlayStart),a.removeEventListener("pause",this._onPlayStop),a.removeEventListener("seeked",this._onSeeked),a.removeEventListener("canplay",this._onCanPlay),a.removeEventListener("canplaythrough",this._onCanPlayThrough),a.removeEventListener("error",this._onError,!0),a.pause(),a.src="",a.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(a){a!==this._autoUpdate&&(this._autoUpdate=a,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(a){a!==this._updateFPS&&(this._updateFPS=a,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(s.Ticker.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),null===this._videoFrameRequestCallbackHandle&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(null!==this._videoFrameRequestCallbackHandle&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(s.Ticker.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(null!==this._videoFrameRequestCallbackHandle&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(s.Ticker.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(a){return globalThis.HTMLVideoElement&&a instanceof HTMLVideoElement}};w.extension=c.ExtensionType.TextureSource,w.defaultOptions={...v.TextureSource.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1},w.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},a.s(["VideoSource",()=>w],55609)},53386,a=>{"use strict";let b=(a,b,c=!1)=>(Array.isArray(a)||(a=[a]),b)?a.map(a=>"string"==typeof a||c?b(a):a):a;a.s(["convertToList",()=>b])},28755,33221,68087,a=>{"use strict";var b=a.i(44373),c=a.i(48406),d=a.i(95318),e=a.i(85863),f=a.i(85942),g=a.i(39238),h=a.i(19548),i=a.i(55609),j=a.i(51983),k=a.i(53386);let l=new class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(a){return this._cache.has(a)}get(a){let b=this._cache.get(a);return b||(0,j.warn)(`[Assets] Asset id ${a} was not found in the Cache`),b}set(a,b){let c,d=(0,k.convertToList)(a);for(let a=0;a<this.parsers.length;a++){let e=this.parsers[a];if(e.test(b)){c=e.getCacheableAssets(d,b);break}}let e=new Map(Object.entries(c||{}));c||d.forEach(a=>{e.set(a,b)});let f=[...e.keys()],g={cacheKeys:f,keys:d};d.forEach(a=>{this._cacheMap.set(a,g)}),f.forEach(a=>{let d=c?c[a]:b;this._cache.has(a)&&this._cache.get(a)!==d&&(0,j.warn)("[Cache] already has key:",a),this._cache.set(a,e.get(a))})}remove(a){if(!this._cacheMap.has(a))return void(0,j.warn)(`[Assets] Asset id ${a} was not found in the Cache`);let b=this._cacheMap.get(a);b.cacheKeys.forEach(a=>{this._cache.delete(a)}),b.keys.forEach(a=>{this._cacheMap.delete(a)})}get parsers(){return this._parsers}};a.s(["Cache",()=>l],33221);var m=a.i(31394),n=a.i(71805);let o=[];function p(a={}){let b=a&&a.resource,c=b?a.resource:a,d=b?a:{resource:a};for(let a=0;a<o.length;a++){let b=o[a];if(b.test(c))return new b(d)}throw Error(`Could not find a source type for resource: ${d.resource}`)}b.extensions.handleByList(b.ExtensionType.TextureSource,o),n.Texture.from=function(a,b=!1){return"string"==typeof a?l.get(a):a instanceof m.TextureSource?new n.Texture({source:a}):function(a={},b=!1){let c=a&&a.resource,d=c?a.resource:a,e=c?a:{resource:a};if(!b&&l.has(d))return l.get(d);let f=new n.Texture({source:p(e)});return f.on("destroy",()=>{l.has(d)&&l.remove(d)}),b||l.set(d,f),f}(a,b)},m.TextureSource.from=p,a.s([],68087),b.extensions.add(c.AlphaMask,d.ColorMask,e.StencilMask,i.VideoSource,h.ImageSource,g.CanvasSource,f.BufferImageSource),a.s([],28755)},26925,99531,a=>{"use strict";var b,c=((b=c||{})[b.Low=0]="Low",b[b.Normal=1]="Normal",b[b.High=2]="High",b);a.s(["LoaderParserPriority",()=>c],26925);var d=a.i(58422);function e(a){if("string"!=typeof a)throw TypeError(`Path must be a string. Received ${JSON.stringify(a)}`)}function f(a){return a.split("?")[0].split("#")[0]}let g={toPosix:a=>{var b,c;return b=0,c=0,a.replace(RegExp("\\".replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),"/")},isUrl(a){return/^https?:/.test(this.toPosix(a))},isDataUrl:a=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(a),isBlobUrl:a=>a.startsWith("blob:"),hasProtocol(a){return/^[^/:]+:/.test(this.toPosix(a))},getProtocol(a){e(a),a=this.toPosix(a);let b=/^file:\/\/\//.exec(a);if(b)return b[0];let c=/^[^/:]+:\/{0,2}/.exec(a);return c?c[0]:""},toAbsolute(a,b,c){if(e(a),this.isDataUrl(a)||this.isBlobUrl(a))return a;let h=f(this.toPosix(b??d.DOMAdapter.get().getBaseUrl())),i=f(this.toPosix(c??this.rootname(h)));return(a=this.toPosix(a)).startsWith("/")?g.join(i,a.slice(1)):this.isAbsolute(a)?a:this.join(h,a)},normalize(a){if(e(a),0===a.length)return".";if(this.isDataUrl(a)||this.isBlobUrl(a))return a;a=this.toPosix(a);let b="",c=a.startsWith("/");this.hasProtocol(a)&&(b=this.rootname(a),a=a.slice(b.length));let d=a.endsWith("/");return((a=function(a,b){let c="",d=0,e=-1,f=0,g=-1;for(let h=0;h<=a.length;++h){if(h<a.length)g=a.charCodeAt(h);else if(47===g)break;else g=47;if(47===g){if(e===h-1||1===f);else if(e!==h-1&&2===f){if(c.length<2||2!==d||46!==c.charCodeAt(c.length-1)||46!==c.charCodeAt(c.length-2)){if(c.length>2){let a=c.lastIndexOf("/");if(a!==c.length-1){-1===a?(c="",d=0):d=(c=c.slice(0,a)).length-1-c.lastIndexOf("/"),e=h,f=0;continue}}else if(2===c.length||1===c.length){c="",d=0,e=h,f=0;continue}}b&&(c.length>0?c+="/..":c="..",d=2)}else c.length>0?c+=`/${a.slice(e+1,h)}`:c=a.slice(e+1,h),d=h-e-1;e=h,f=0}else 46===g&&-1!==f?++f:f=-1}return c}(a,!1)).length>0&&d&&(a+="/"),c)?`/${a}`:b+a},isAbsolute(a){return e(a),a=this.toPosix(a),!!this.hasProtocol(a)||a.startsWith("/")},join(...a){let b;if(0===a.length)return".";for(let c=0;c<a.length;++c){let d=a[c];if(e(d),d.length>0)if(void 0===b)b=d;else{let e=a[c-1]??"";this.joinExtensions.includes(this.extname(e).toLowerCase())?b+=`/../${d}`:b+=`/${d}`}}return void 0===b?".":this.normalize(b)},dirname(a){if(e(a),0===a.length)return".";let b=(a=this.toPosix(a)).charCodeAt(0),c=47===b,d=-1,f=!0,g=this.getProtocol(a),h=a;a=a.slice(g.length);for(let c=a.length-1;c>=1;--c)if(47===(b=a.charCodeAt(c))){if(!f){d=c;break}}else f=!1;return -1===d?c?"/":this.isUrl(h)?g+a:g:c&&1===d?"//":g+a.slice(0,d)},rootname(a){e(a);let b="";if(b=(a=this.toPosix(a)).startsWith("/")?"/":this.getProtocol(a),this.isUrl(a)){let c=a.indexOf("/",b.length);(b=-1!==c?a.slice(0,c):a).endsWith("/")||(b+="/")}return b},basename(a,b){let c;e(a),b&&e(b),a=f(this.toPosix(a));let d=0,g=-1,h=!0;if(void 0!==b&&b.length>0&&b.length<=a.length){if(b.length===a.length&&b===a)return"";let e=b.length-1,f=-1;for(c=a.length-1;c>=0;--c){let i=a.charCodeAt(c);if(47===i){if(!h){d=c+1;break}}else -1===f&&(h=!1,f=c+1),e>=0&&(i===b.charCodeAt(e)?-1==--e&&(g=c):(e=-1,g=f))}return d===g?g=f:-1===g&&(g=a.length),a.slice(d,g)}for(c=a.length-1;c>=0;--c)if(47===a.charCodeAt(c)){if(!h){d=c+1;break}}else -1===g&&(h=!1,g=c+1);return -1===g?"":a.slice(d,g)},extname(a){e(a),a=f(this.toPosix(a));let b=-1,c=0,d=-1,g=!0,h=0;for(let e=a.length-1;e>=0;--e){let f=a.charCodeAt(e);if(47===f){if(!g){c=e+1;break}continue}-1===d&&(g=!1,d=e+1),46===f?-1===b?b=e:1!==h&&(h=1):-1!==b&&(h=-1)}return -1===b||-1===d||0===h||1===h&&b===d-1&&b===c+1?"":a.slice(b,d)},parse(a){let b;e(a);let c={root:"",dir:"",base:"",ext:"",name:""};if(0===a.length)return c;let d=(a=f(this.toPosix(a))).charCodeAt(0),g=this.isAbsolute(a);c.root=this.rootname(a),b=g||this.hasProtocol(a)?1:0;let h=-1,i=0,j=-1,k=!0,l=a.length-1,m=0;for(;l>=b;--l){if(47===(d=a.charCodeAt(l))){if(!k){i=l+1;break}continue}-1===j&&(k=!1,j=l+1),46===d?-1===h?h=l:1!==m&&(m=1):-1!==h&&(m=-1)}return -1===h||-1===j||0===m||1===m&&h===j-1&&h===i+1?-1!==j&&(0===i&&g?c.base=c.name=a.slice(1,j):c.base=c.name=a.slice(i,j)):(0===i&&g?(c.name=a.slice(1,h),c.base=a.slice(1,j)):(c.name=a.slice(i,h),c.base=a.slice(i,j)),c.ext=a.slice(h,j)),c.dir=this.dirname(a),c},sep:"/",delimiter:":",joinExtensions:[".html"]};a.s(["path",()=>g],99531)},91540,a=>{"use strict";var b=a.i(44373),c=a.i(26925),d=a.i(51983),e=a.i(99531),f=a.i(53386);class g{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(a,b)=>`${a}${this._bundleIdConnector}${b}`,extractAssetIdFromBundle:(a,b)=>b.replace(`${a}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(a){if(this._bundleIdConnector=a.connector??this._bundleIdConnector,this._createBundleAssetId=a.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=a.extractAssetIdFromBundle??this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...a){a.forEach(a=>{this._preferredOrder.push(a),a.priority||(a.priority=Object.keys(a.params))}),this._resolverHash={}}set basePath(a){this._basePath=a}get basePath(){return this._basePath}set rootPath(a){this._rootPath=a}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(a){"string"==typeof a?this._defaultSearchParams=a:this._defaultSearchParams=Object.keys(a).map(b=>`${encodeURIComponent(b)}=${encodeURIComponent(a[b])}`).join("&")}getAlias(a){let{alias:b,src:c}=a;return(0,f.convertToList)(b||c,a=>"string"==typeof a?a:Array.isArray(a)?a.map(a=>a?.src??a):a?.src?a.src:a,!0)}addManifest(a){this._manifest&&(0,d.warn)("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=a,a.bundles.forEach(a=>{this.addBundle(a.name,a.assets)})}addBundle(a,b){let c=[],d=b;Array.isArray(b)||(d=Object.entries(b).map(([a,b])=>"string"==typeof b||Array.isArray(b)?{alias:a,src:b}:{alias:a,...b})),d.forEach(b=>{let d,e=b.src,f=b.alias;if("string"==typeof f){let b=this._createBundleAssetId(a,f);c.push(b),d=[f,b]}else{let b=f.map(b=>this._createBundleAssetId(a,b));c.push(...b),d=[...f,...b]}this.add({...b,alias:d,src:e})}),this._bundles[a]=c}add(a){let b,c=[];Array.isArray(a)?c.push(...a):c.push(a),b=a=>{this.hasKey(a)&&(0,d.warn)(`[Resolver] already has key: ${a} overwriting`)},(0,f.convertToList)(c).forEach(a=>{let{src:c}=a,{data:d,format:e,loadParser:g,parser:h}=a,i=(0,f.convertToList)(c).map(a=>{if("string"==typeof a){let b=a.match(/\{(.*?)\}/g),c=[];if(b){let d=[];b.forEach(a=>{let b=a.substring(1,a.length-1).split(",");d.push(b)}),function a(b,c,d,e,f){let g=c[d];for(let h=0;h<g.length;h++){let i=g[h];d<c.length-1?a(b.replace(e[d],i),c,d+1,e,f):f.push(b.replace(e[d],i))}}(a,d,0,b,c)}else c.push(a);return c}return Array.isArray(a)?a:[a]}),j=this.getAlias(a);Array.isArray(j)?j.forEach(b):b(j);let k=[],l=a=>{let b=this._parsers.find(b=>b.test(a));return{...b?.parse(a),src:a}};i.forEach(b=>{b.forEach(b=>{let c={};if("object"!=typeof b?c=l(b):(d=b.data??d,e=b.format??e,(b.loadParser||b.parser)&&(g=b.loadParser??g,h=b.parser??h),c={...l(b.src),...b}),!j)throw Error(`[Resolver] alias is undefined for this asset: ${c.src}`);c=this._buildResolvedAsset(c,{aliases:j,data:d,format:e,loadParser:g,parser:h,progressSize:a.progressSize}),k.push(c)})}),j.forEach(a=>{this._assetMap[a]=k})})}resolveBundle(a){let b=!Array.isArray(a);a=(0,f.convertToList)(a);let c={};return a.forEach(a=>{let b=this._bundles[a];if(b){let d=this.resolve(b),e={};for(let b in d){let c=d[b];e[this._extractAssetIdFromBundle(a,b)]=c}c[a]=e}}),b?c[a[0]]:c}resolveUrl(a){let b=this.resolve(a);if("string"!=typeof a){let a={};for(let c in b)a[c]=b[c].src;return a}return b.src}resolve(a){let b=!Array.isArray(a);a=(0,f.convertToList)(a);let c={};return a.forEach(a=>{if(!this._resolverHash[a])if(this._assetMap[a]){let b=this._assetMap[a],c=this._getPreferredOrder(b);c?.priority.forEach(a=>{c.params[a].forEach(c=>{let d=b.filter(b=>!!b[a]&&b[a]===c);d.length&&(b=d)})}),this._resolverHash[a]=b[0]}else this._resolverHash[a]=this._buildResolvedAsset({alias:[a],src:a},{});c[a]=this._resolverHash[a]}),b?c[a[0]]:c}hasKey(a){return!!this._assetMap[a]}hasBundle(a){return!!this._bundles[a]}_getPreferredOrder(a){for(let b=0;b<a.length;b++){let c=a[b],d=this._preferredOrder.find(a=>a.params.format.includes(c.format));if(d)return d}return this._preferredOrder[0]}_appendDefaultSearchParams(a){if(!this._defaultSearchParams)return a;let b=/\?/.test(a)?"&":"?";return`${a}${b}${this._defaultSearchParams}`}_buildResolvedAsset(a,b){let{aliases:c,data:d,loadParser:f,parser:g,format:h,progressSize:i}=b;return(this._basePath||this._rootPath)&&(a.src=e.path.toAbsolute(a.src,this._basePath,this._rootPath)),a.alias=c??a.alias??[a.src],a.src=this._appendDefaultSearchParams(a.src),a.data={...d||{},...a.data},a.loadParser=f??a.loadParser,a.parser=g??a.parser,a.format=h??a.format??a.src.split(".").pop().split("?").shift().split("#").shift(),void 0!==i&&(a.progressSize=i),a}}g.RETINA_PREFIX=/@([0-9\.]+)x/;let h=(a,b)=>{let c=b.split("?")[1];return c&&(a+=`?${c}`),a};var i=a.i(71805),j=a.i(31023),k=a.i(31394);let l=class a{constructor(a,b){this.linkedSheets=[];let c=a;a?.source instanceof k.TextureSource&&(c={texture:a,data:b});const{texture:d,data:e,cachePrefix:f=""}=c;this.cachePrefix=f,this._texture=d instanceof i.Texture?d:null,this.textureSource=d.source,this.textures={},this.animations={},this.data=e;const g=parseFloat(e.meta.scale);g?(this.resolution=g,d.source.resolution=this.resolution):this.resolution=d.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(b=>{this._callback=b,this._batchIndex=0,this._frameKeys.length<=a.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(b){let c=b,d=a.BATCH_SIZE;for(;c-b<d&&c<this._frameKeys.length;){let a=this._frameKeys[c],b=this._frames[a],d=b.frame;if(d){let c=null,e=null,f=!1!==b.trimmed&&b.sourceSize?b.sourceSize:b.frame,g=new j.Rectangle(0,0,Math.floor(f.w)/this.resolution,Math.floor(f.h)/this.resolution);c=b.rotated?new j.Rectangle(Math.floor(d.x)/this.resolution,Math.floor(d.y)/this.resolution,Math.floor(d.h)/this.resolution,Math.floor(d.w)/this.resolution):new j.Rectangle(Math.floor(d.x)/this.resolution,Math.floor(d.y)/this.resolution,Math.floor(d.w)/this.resolution,Math.floor(d.h)/this.resolution),!1!==b.trimmed&&b.spriteSourceSize&&(e=new j.Rectangle(Math.floor(b.spriteSourceSize.x)/this.resolution,Math.floor(b.spriteSourceSize.y)/this.resolution,Math.floor(d.w)/this.resolution,Math.floor(d.h)/this.resolution)),this.textures[a]=new i.Texture({source:this.textureSource,frame:c,orig:g,trim:e,rotate:2*!!b.rotated,defaultAnchor:b.anchor,defaultBorders:b.borders,label:a.toString()})}c++}}_processAnimations(){let a=this.data.animations||{};for(let b in a){this.animations[b]=[];for(let c=0;c<a[b].length;c++){let d=a[b][c];this.animations[b].push(this.textures[d])}}}_parseComplete(){let a=this._callback;this._callback=null,this._batchIndex=0,a.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*a.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*a.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(a=!1){for(let a in this.textures)this.textures[a].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,a&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};l.BATCH_SIZE=1e3;let m=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"],n={extension:b.ExtensionType.Asset,cache:{test:a=>a instanceof l,getCacheableAssets:(a,b)=>(function a(b,c,d){let f={};if(b.forEach(a=>{f[a]=c}),Object.keys(c.textures).forEach(a=>{f[`${c.cachePrefix}${a}`]=c.textures[a]}),!d){let d=e.path.dirname(b[0]);c.linkedSheets.forEach((b,e)=>{Object.assign(f,a([`${d}/${c.data.meta.related_multi_packs[e]}`],b,!0))})}return f})(a,b,!1)},resolver:{extension:{type:b.ExtensionType.ResolveParser,name:"resolveSpritesheet"},test:a=>{let b=a.split("?")[0].split("."),c=b.pop(),d=b.pop();return"json"===c&&m.includes(d)},parse:a=>{let b=a.split(".");return{resolution:parseFloat(g.RETINA_PREFIX.exec(a)?.[1]??"1"),format:b[b.length-2],src:a}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:b.ExtensionType.LoadParser,priority:c.LoaderParserPriority.Normal,name:"spritesheetLoader"},testParse:async(a,b)=>".json"===e.path.extname(b.src).toLowerCase()&&!!a.frames,async parse(a,b,c){let d,{texture:f,imageFilename:g,textureOptions:j,cachePrefix:k}=b?.data??{},m=e.path.dirname(b.src);if(m&&m.lastIndexOf("/")!==m.length-1&&(m+="/"),f instanceof i.Texture)d=f;else{let e=h(m+(g??a.meta.image),b.src);d=(await c.load([{src:e,data:j}]))[e]}let n=new l({texture:d.source,data:a,cachePrefix:k});await n.parse();let o=a?.meta?.related_multi_packs;if(Array.isArray(o)){let a=[];for(let d of o){if("string"!=typeof d)continue;let e=m+d;b.data?.ignoreMultiPack||(e=h(e,b.src),a.push(c.load({src:e,data:{textureOptions:j,ignoreMultiPack:!0}})))}let d=await Promise.all(a);n.linkedSheets=d,d.forEach(a=>{a.linkedSheets=[n].concat(n.linkedSheets.filter(b=>b!==a))})}return n},async unload(a,b,c){await c.unload(a.textureSource._sourceOrigin),a.destroy(!1)}}};b.extensions.add(n),a.s([],91540)},81716,(a,b,c)=>{b.exports=function(a){var b=[];return a.replace(e,function(a,c,e){var g,h=c.toLowerCase();for(e=(g=e.match(f))?g.map(Number):[],"m"==h&&e.length>2&&(b.push([c].concat(e.splice(0,2))),h="l",c="m"==c?"l":"L");;){if(e.length==d[h])return e.unshift(c),b.push(e);if(e.length<d[h])throw Error("malformed path data");b.push([c].concat(e.splice(0,d[h])))}}),b};var d={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/ig,f=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig},77851,77473,42172,2638,37013,a=>{"use strict";let b,c;var d=a.i(81716),e=a.i(51983);function f(a,b){let c=(0,d.default)(a),f=[],g=null,h=0,i=0;for(let a=0;a<c.length;a++){let d=c[a],j=d[0];switch(j){case"M":h=d[1],i=d[2],b.moveTo(h,i);break;case"m":h+=d[1],i+=d[2],b.moveTo(h,i);break;case"H":h=d[1],b.lineTo(h,i);break;case"h":h+=d[1],b.lineTo(h,i);break;case"V":i=d[1],b.lineTo(h,i);break;case"v":i+=d[1],b.lineTo(h,i);break;case"L":h=d[1],i=d[2],b.lineTo(h,i);break;case"l":h+=d[1],i+=d[2],b.lineTo(h,i);break;case"C":h=d[5],i=d[6],b.bezierCurveTo(d[1],d[2],d[3],d[4],h,i);break;case"c":b.bezierCurveTo(h+d[1],i+d[2],h+d[3],i+d[4],h+d[5],i+d[6]),h+=d[5],i+=d[6];break;case"S":h=d[3],i=d[4],b.bezierCurveToShort(d[1],d[2],h,i);break;case"s":b.bezierCurveToShort(h+d[1],i+d[2],h+d[3],i+d[4]),h+=d[3],i+=d[4];break;case"Q":h=d[3],i=d[4],b.quadraticCurveTo(d[1],d[2],h,i);break;case"q":b.quadraticCurveTo(h+d[1],i+d[2],h+d[3],i+d[4]),h+=d[3],i+=d[4];break;case"T":h=d[1],i=d[2],b.quadraticCurveToShort(h,i);break;case"t":h+=d[1],i+=d[2],b.quadraticCurveToShort(h,i);break;case"A":h=d[6],i=d[7],b.arcToSvg(d[1],d[2],d[3],d[4],d[5],h,i);break;case"a":h+=d[6],i+=d[7],b.arcToSvg(d[1],d[2],d[3],d[4],d[5],h,i);break;case"Z":case"z":b.closePath(),f.length>0&&((g=f.pop())?(h=g.startX,i=g.startY):(h=0,i=0)),g=null;break;default:(0,e.warn)(`Unknown SVG path command: ${j}`)}"Z"!==j&&"z"!==j&&null===g&&(g={startX:h,startY:i},f.push(g))}return b}a.s(["parseSVGPath",()=>f],77851);var g=a.i(31023);class h{constructor(a=0,b=0,c=0){this.type="circle",this.x=a,this.y=b,this.radius=c}clone(){return new h(this.x,this.y,this.radius)}contains(a,b){if(this.radius<=0)return!1;let c=this.radius*this.radius,d=this.x-a,e=this.y-b;return d*=d,e*=e,d+e<=c}strokeContains(a,b,c,d=.5){if(0===this.radius)return!1;let e=this.x-a,f=this.y-b,g=this.radius,h=(1-d)*c,i=Math.sqrt(e*e+f*f);return i<=g+h&&i>g-(c-h)}getBounds(a){return a||(a=new g.Rectangle),a.x=this.x-this.radius,a.y=this.y-this.radius,a.width=2*this.radius,a.height=2*this.radius,a}copyFrom(a){return this.x=a.x,this.y=a.y,this.radius=a.radius,this}copyTo(a){return a.copyFrom(this),a}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}a.s(["Circle",()=>h],77473);class i{constructor(a=0,b=0,c=0,d=0){this.type="ellipse",this.x=a,this.y=b,this.halfWidth=c,this.halfHeight=d}clone(){return new i(this.x,this.y,this.halfWidth,this.halfHeight)}contains(a,b){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let c=(a-this.x)/this.halfWidth,d=(b-this.y)/this.halfHeight;return c*=c,d*=d,c+d<=1}strokeContains(a,b,c,d=.5){let{halfWidth:e,halfHeight:f}=this;if(e<=0||f<=0)return!1;let g=c*(1-d),h=c-g,i=e-h,j=f-h,k=e+g,l=f+g,m=a-this.x,n=b-this.y;return m*m/(i*i)+n*n/(j*j)>1&&m*m/(k*k)+n*n/(l*l)<=1}getBounds(a){return a||(a=new g.Rectangle),a.x=this.x-this.halfWidth,a.y=this.y-this.halfHeight,a.width=2*this.halfWidth,a.height=2*this.halfHeight,a}copyFrom(a){return this.x=a.x,this.y=a.y,this.halfWidth=a.halfWidth,this.halfHeight=a.halfHeight,this}copyTo(a){return a.copyFrom(this),a}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}a.s(["Ellipse",()=>i],42172);var j=a.i(2897);class k{constructor(...a){this.type="polygon";let b=Array.isArray(a[0])?a[0]:a;if("number"!=typeof b[0]){const a=[];for(let c=0,d=b.length;c<d;c++)a.push(b[c].x,b[c].y);b=a}this.points=b,this.closePath=!0}isClockwise(){let a=0,b=this.points,c=b.length;for(let d=0;d<c;d+=2){let e=b[d],f=b[d+1];a+=(b[(d+2)%c]-e)*(b[(d+3)%c]+f)}return a<0}containsPolygon(a){let d=this.getBounds(b),e=a.getBounds(c);if(!d.containsRect(e))return!1;let f=a.points;for(let a=0;a<f.length;a+=2){let b=f[a],c=f[a+1];if(!this.contains(b,c))return!1}return!0}clone(){let a=new k(this.points.slice());return a.closePath=this.closePath,a}contains(a,b){let c=!1,d=this.points.length/2;for(let e=0,f=d-1;e<d;f=e++){let d=this.points[2*e],g=this.points[2*e+1],h=this.points[2*f],i=this.points[2*f+1];g>b!=i>b&&a<(b-g)/(i-g)*(h-d)+d&&(c=!c)}return c}strokeContains(a,b,c,d=.5){let e=c*c,f=e*(1-d),g=e-f,{points:h}=this,i=h.length-2*!this.closePath;for(let c=0;c<i;c+=2){let d=h[c],e=h[c+1],i=h[(c+2)%h.length],j=h[(c+3)%h.length];if(function(a,b,c,d,e,f){let g,h,i=e-c,j=f-d,k=i*i+j*j,l=-1;0!==k&&(l=((a-c)*i+(b-d)*j)/k),l<0?(g=c,h=d):l>1?(g=e,h=f):(g=c+l*i,h=d+l*j);let m=a-g,n=b-h;return m*m+n*n}(a,b,d,e,i,j)<=(0>Math.sign((i-d)*(b-e)-(j-e)*(a-d))?g:f))return!0}return!1}getBounds(a){a||(a=new g.Rectangle);let b=this.points,c=1/0,d=-1/0,e=1/0,f=-1/0;for(let a=0,g=b.length;a<g;a+=2){let g=b[a],h=b[a+1];c=g<c?g:c,d=g>d?g:d,e=h<e?h:e,f=h>f?h:f}return a.x=c,a.width=d-c,a.y=e,a.height=f-e,a}copyFrom(a){return this.points=a.points.slice(),this.closePath=a.closePath,this}copyTo(a){return a.copyFrom(this),a}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((a,b)=>`${a}, ${b}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return(0,j.deprecation)("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return(0,j.deprecation)("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}a.s(["Polygon",()=>k],2638);let l=(a,b,c,d,e,f,g)=>{let h=a-c,i=b-d,j=Math.sqrt(h*h+i*i);return j>=e-f&&j<=e+g};class m{constructor(a=0,b=0,c=0,d=0,e=20){this.type="roundedRectangle",this.x=a,this.y=b,this.width=c,this.height=d,this.radius=e}getBounds(a){return a||(a=new g.Rectangle),a.x=this.x,a.y=this.y,a.width=this.width,a.height=this.height,a}clone(){return new m(this.x,this.y,this.width,this.height,this.radius)}copyFrom(a){return this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this}copyTo(a){return a.copyFrom(this),a}contains(a,b){if(this.width<=0||this.height<=0)return!1;if(a>=this.x&&a<=this.x+this.width&&b>=this.y&&b<=this.y+this.height){let c=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(b>=this.y+c&&b<=this.y+this.height-c||a>=this.x+c&&a<=this.x+this.width-c)return!0;let d=a-(this.x+c),e=b-(this.y+c),f=c*c;if(d*d+e*e<=f||(d=a-(this.x+this.width-c))*d+e*e<=f||d*d+(e=b-(this.y+this.height-c))*e<=f||(d=a-(this.x+c))*d+e*e<=f)return!0}return!1}strokeContains(a,b,c,d=.5){let{x:e,y:f,width:g,height:h,radius:i}=this,j=c*(1-d),k=c-j,m=e+i,n=f+i,o=g-2*i,p=h-2*i,q=e+g,r=f+h;return(a>=e-j&&a<=e+k||a>=q-k&&a<=q+j)&&b>=n&&b<=n+p||(b>=f-j&&b<=f+k||b>=r-k&&b<=r+j)&&a>=m&&a<=m+o||a<m&&b<n&&l(a,b,m,n,i,k,j)||a>q-i&&b<n&&l(a,b,q-i,n,i,k,j)||a>q-i&&b>r-i&&l(a,b,q-i,r-i,i,k,j)||a<m&&b>r-i&&l(a,b,m,r-i,i,k,j)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}a.s(["RoundedRectangle",()=>m],37013)},68667,48957,13753,a=>{"use strict";var b=a.i(44373),c=a.i(2780),d=a.i(28277),e=a.i(33502),f=a.i(46629),g=a.i(2897),h=a.i(3832),i=a.i(67309),j=a.i(31023);function k(a,b,c,d,e){let f=b.a,g=b.b,h=b.c,i=b.d,j=b.tx,k=b.ty;c||(c=0),d||(d=2),e||(e=a.length/d-c);let l=c*d;for(let b=0;b<e;b++){let b=a[l],c=a[l+1];a[l]=f*b+h*c+j,a[l+1]=g*b+i*c+k,l+=d}}var l=a.i(71805),m=a.i(7062);let n=new i.Matrix;class o{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){let a=this.baseColor,b=a>>16|65280&a|(255&a)<<16,c=this.renderable;return c?(0,m.multiplyHexColors)(b,c.groupColor)+(this.alpha*c.groupAlpha*255<<24):b+(255*this.alpha<<24)}get transform(){return this.renderable?.groupTransform||n}copyTo(a){a.indexOffset=this.indexOffset,a.indexSize=this.indexSize,a.attributeOffset=this.attributeOffset,a.attributeSize=this.attributeSize,a.baseColor=this.baseColor,a.alpha=this.alpha,a.texture=this.texture,a.geometryData=this.geometryData,a.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}a.s(["BatchableGraphics",()=>o],48957);let p={extension:{type:b.ExtensionType.ShapeBuilder,name:"circle"},build(a,b){let c,d,e,f,g,h;if("circle"===a.type){if((g=h=a.radius)<=0)return!1;c=a.x,d=a.y,e=f=0}else if("ellipse"===a.type){if(g=a.halfWidth,h=a.halfHeight,g<=0||h<=0)return!1;c=a.x,d=a.y,e=f=0}else{let b=a.width/2,i=a.height/2;c=a.x+b,d=a.y+i,g=h=Math.max(0,Math.min(a.radius,Math.min(b,i))),e=b-g,f=i-h}if(e<0||f<0)return!1;let i=Math.ceil(2.3*Math.sqrt(g+h)),j=8*i+4*!!e+4*!!f;if(0===j)return!1;if(0===i)return b[0]=b[6]=c+e,b[1]=b[3]=d+f,b[2]=b[4]=c-e,b[5]=b[7]=d-f,!0;let k=0,l=4*i+2*!!e+2,m=l,n=j,o=e+g,p=f,q=c+o,r=c-o,s=d+p;if(b[k++]=q,b[k++]=s,b[--l]=s,b[--l]=r,f){let a=d-p;b[m++]=r,b[m++]=a,b[--n]=a,b[--n]=q}for(let a=1;a<i;a++){let j=Math.PI/2*(a/i),o=e+Math.cos(j)*g,p=f+Math.sin(j)*h,q=c+o,r=c-o,s=d+p,t=d-p;b[k++]=q,b[k++]=s,b[--l]=s,b[--l]=r,b[m++]=r,b[m++]=t,b[--n]=t,b[--n]=q}o=e,p=f+h,q=c+o,r=c-o,s=d+p;let t=d-p;return b[k++]=q,b[k++]=s,b[--n]=t,b[--n]=q,e&&(b[k++]=r,b[k++]=s,b[--n]=t,b[--n]=r),!0},triangulate(a,b,c,d,e,f){if(0===a.length)return;let g=0,h=0;for(let b=0;b<a.length;b+=2)g+=a[b],h+=a[b+1];g/=a.length/2,h/=a.length/2;let i=d;b[i*c]=g,b[i*c+1]=h;let j=i++;for(let d=0;d<a.length;d+=2)b[i*c]=a[d],b[i*c+1]=a[d+1],d>0&&(e[f++]=i,e[f++]=j,e[f++]=i-1),i++;e[f++]=j+1,e[f++]=j,e[f++]=i-1}},q={...p,extension:{...p.extension,name:"ellipse"}},r={...p,extension:{...p.extension,name:"roundedRectangle"}};var s=a.i(47790);function t(a,b,c,d,e,f,g,h){let i,j;g?(i=d,j=-c):(i=-d,j=c);let k=a-c*e+i,l=b-d*e+j,m=a+c*f+i,n=b+d*f+j;return h.push(k,l),h.push(m,n),2}function u(a,b,c,d,e,f,g,h){let i=c-a,j=d-b,k=Math.atan2(i,j),l=Math.atan2(e-a,f-b);h&&k<l?k+=2*Math.PI:!h&&k>l&&(l+=2*Math.PI);let m=k,n=l-k,o=Math.sqrt(i*i+j*j),p=(15*Math.abs(n)*Math.sqrt(o)/Math.PI|0)+1,q=n/p;if(m+=q,h){g.push(a,b),g.push(c,d);for(let c=1,d=m;c<p;c++,d+=q)g.push(a,b),g.push(a+Math.sin(d)*o,b+Math.cos(d)*o);g.push(a,b),g.push(e,f)}else{g.push(c,d),g.push(a,b);for(let c=1,d=m;c<p;c++,d+=q)g.push(a+Math.sin(d)*o,b+Math.cos(d)*o),g.push(a,b);g.push(e,f),g.push(a,b)}return 2*p}function v(a,b,c=2){let d,e,f,g=b&&b.length,h=g?b[0]*c:a.length,i=w(a,0,h,c,!0),j=[];if(!i||i.next===i.prev)return j;if(g&&(i=function(a,b,c,d){let e=[];for(let c=0,f=b.length;c<f;c++){let g=b[c]*d,h=c<f-1?b[c+1]*d:a.length,i=w(a,g,h,d,!1);i===i.next&&(i.steiner=!0),e.push(function(a){let b=a,c=a;do(b.x<c.x||b.x===c.x&&b.y<c.y)&&(c=b),b=b.next;while(b!==a)return c}(i))}e.sort(y);for(let a=0;a<e.length;a++)c=function(a,b){let c=function(a,b){let c,d=b,e=a.x,f=a.y,g=-1/0;if(D(a,d))return d;do{if(D(a,d.next))return d.next;if(f<=d.y&&f>=d.next.y&&d.next.y!==d.y){let a=d.x+(f-d.y)*(d.next.x-d.x)/(d.next.y-d.y);if(a<=e&&a>g&&(g=a,c=d.x<d.next.x?d:d.next,a===e))return c}d=d.next}while(d!==b)if(!c)return null;let h=c,i=c.x,j=c.y,k=1/0;d=c;do{if(e>=d.x&&d.x>=i&&e!==d.x&&A(f<j?e:g,f,i,j,f<j?g:e,f,d.x,d.y)){var l,m;let b=Math.abs(f-d.y)/(e-d.x);H(d,a)&&(b<k||b===k&&(d.x>c.x||d.x===c.x&&(l=c,m=d,0>C(l.prev,l,m.prev)&&0>C(m.next,l,l.next))))&&(c=d,k=b)}d=d.next}while(d!==h)return c}(a,b);if(!c)return b;let d=I(c,a);return x(d,d.next),x(c,c.next)}(e[a],c);return c}(a,b,i,c)),a.length>80*c){d=a[0],e=a[1];let b=d,g=e;for(let f=c;f<h;f+=c){let c=a[f],h=a[f+1];c<d&&(d=c),h<e&&(e=h),c>b&&(b=c),h>g&&(g=h)}f=0!==(f=Math.max(b-d,g-e))?32767/f:0}return function a(b,c,d,e,f,g,h){if(!b)return;!h&&g&&function(a,b,c,d){let e=a;do 0===e.z&&(e.z=z(e.x,e.y,b,c,d)),e.prevZ=e.prev,e.nextZ=e.next,e=e.next;while(e!==a)e.prevZ.nextZ=null,e.prevZ=null,function(a){let b,c=1;do{let d,e=a;a=null;let f=null;for(b=0;e;){b++;let g=e,h=0;for(let a=0;a<c&&(h++,g=g.nextZ);a++);let i=c;for(;h>0||i>0&&g;)0!==h&&(0===i||!g||e.z<=g.z)?(d=e,e=e.nextZ,h--):(d=g,g=g.nextZ,i--),f?f.nextZ=d:a=d,d.prevZ=f,f=d;e=g}f.nextZ=null,c*=2}while(b>1)}(e)}(b,e,f,g);let i=b;for(;b.prev!==b.next;){let j=b.prev,k=b.next;if(g?function(a,b,c,d){let e=a.prev,f=a.next;if(C(e,a,f)>=0)return!1;let g=e.x,h=a.x,i=f.x,j=e.y,k=a.y,l=f.y,m=Math.min(g,h,i),n=Math.min(j,k,l),o=Math.max(g,h,i),p=Math.max(j,k,l),q=z(m,n,b,c,d),r=z(o,p,b,c,d),s=a.prevZ,t=a.nextZ;for(;s&&s.z>=q&&t&&t.z<=r;){if(s.x>=m&&s.x<=o&&s.y>=n&&s.y<=p&&s!==e&&s!==f&&B(g,j,h,k,i,l,s.x,s.y)&&C(s.prev,s,s.next)>=0||(s=s.prevZ,t.x>=m&&t.x<=o&&t.y>=n&&t.y<=p&&t!==e&&t!==f&&B(g,j,h,k,i,l,t.x,t.y)&&C(t.prev,t,t.next)>=0))return!1;t=t.nextZ}for(;s&&s.z>=q;){if(s.x>=m&&s.x<=o&&s.y>=n&&s.y<=p&&s!==e&&s!==f&&B(g,j,h,k,i,l,s.x,s.y)&&C(s.prev,s,s.next)>=0)return!1;s=s.prevZ}for(;t&&t.z<=r;){if(t.x>=m&&t.x<=o&&t.y>=n&&t.y<=p&&t!==e&&t!==f&&B(g,j,h,k,i,l,t.x,t.y)&&C(t.prev,t,t.next)>=0)return!1;t=t.nextZ}return!0}(b,e,f,g):function(a){let b=a.prev,c=a.next;if(C(b,a,c)>=0)return!1;let d=b.x,e=a.x,f=c.x,g=b.y,h=a.y,i=c.y,j=Math.min(d,e,f),k=Math.min(g,h,i),l=Math.max(d,e,f),m=Math.max(g,h,i),n=c.next;for(;n!==b;){if(n.x>=j&&n.x<=l&&n.y>=k&&n.y<=m&&B(d,g,e,h,f,i,n.x,n.y)&&C(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}(b)){c.push(j.i,b.i,k.i),K(b),b=k.next,i=k.next;continue}if((b=k)===i){h?1===h?a(b=function(a,b){let c=a;do{let d=c.prev,e=c.next.next;!D(d,e)&&E(d,c,c.next,e)&&H(d,e)&&H(e,d)&&(b.push(d.i,c.i,e.i),K(c),K(c.next),c=a=e),c=c.next}while(c!==a)return x(c)}(x(b),c),c,d,e,f,g,2):2===h&&function(b,c,d,e,f,g){let h=b;do{let b=h.next.next;for(;b!==h.prev;){var i,j;if(h.i!==b.i&&(i=h,j=b,i.next.i!==j.i&&i.prev.i!==j.i&&!function(a,b){let c=a;do{if(c.i!==a.i&&c.next.i!==a.i&&c.i!==b.i&&c.next.i!==b.i&&E(c,c.next,a,b))return!0;c=c.next}while(c!==a)return!1}(i,j)&&(H(i,j)&&H(j,i)&&function(a,b){let c=a,d=!1,e=(a.x+b.x)/2,f=(a.y+b.y)/2;do c.y>f!=c.next.y>f&&c.next.y!==c.y&&e<(c.next.x-c.x)*(f-c.y)/(c.next.y-c.y)+c.x&&(d=!d),c=c.next;while(c!==a)return d}(i,j)&&(C(i.prev,i,j.prev)||C(i,j.prev,j))||D(i,j)&&C(i.prev,i,i.next)>0&&C(j.prev,j,j.next)>0))){let i=I(h,b);h=x(h,h.next),i=x(i,i.next),a(h,c,d,e,f,g,0),a(i,c,d,e,f,g,0);return}b=b.next}h=h.next}while(h!==b)}(b,c,d,e,f,g):a(x(b),c,d,e,f,g,1);break}}}(i,j,c,d,e,f,0),j}function w(a,b,c,d,e){let f;if(e===function(a,b,c,d){let e=0;for(let f=b,g=c-d;f<c;f+=d)e+=(a[g]-a[f])*(a[f+1]+a[g+1]),g=f;return e}(a,b,c,d)>0)for(let e=b;e<c;e+=d)f=J(e/d|0,a[e],a[e+1],f);else for(let e=c-d;e>=b;e-=d)f=J(e/d|0,a[e],a[e+1],f);return f&&D(f,f.next)&&(K(f),f=f.next),f}function x(a,b){if(!a)return a;b||(b=a);let c=a,d;do if(d=!1,!c.steiner&&(D(c,c.next)||0===C(c.prev,c,c.next))){if(K(c),(c=b=c.prev)===c.next)break;d=!0}else c=c.next;while(d||c!==b)return b}function y(a,b){let c=a.x-b.x;return 0===c&&0==(c=a.y-b.y)&&(c=(a.next.y-a.y)/(a.next.x-a.x)-(b.next.y-b.y)/(b.next.x-b.x)),c}function z(a,b,c,d,e){return(a=((a=((a=((a=((a=(a-c)*e|0)|a<<8)&0xff00ff)|a<<4)&0xf0f0f0f)|a<<2)&0x33333333)|a<<1)&0x55555555)|(b=((b=((b=((b=((b=(b-d)*e|0)|b<<8)&0xff00ff)|b<<4)&0xf0f0f0f)|b<<2)&0x33333333)|b<<1)&0x55555555)<<1}function A(a,b,c,d,e,f,g,h){return(e-g)*(b-h)>=(a-g)*(f-h)&&(a-g)*(d-h)>=(c-g)*(b-h)&&(c-g)*(f-h)>=(e-g)*(d-h)}function B(a,b,c,d,e,f,g,h){return(a!==g||b!==h)&&A(a,b,c,d,e,f,g,h)}function C(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function D(a,b){return a.x===b.x&&a.y===b.y}function E(a,b,c,d){let e=G(C(a,b,c)),f=G(C(a,b,d)),g=G(C(c,d,a)),h=G(C(c,d,b));return!!(e!==f&&g!==h||0===e&&F(a,c,b)||0===f&&F(a,d,b)||0===g&&F(c,a,d)||0===h&&F(c,b,d))}function F(a,b,c){return b.x<=Math.max(a.x,c.x)&&b.x>=Math.min(a.x,c.x)&&b.y<=Math.max(a.y,c.y)&&b.y>=Math.min(a.y,c.y)}function G(a){return a>0?1:a<0?-1:0}function H(a,b){return 0>C(a.prev,a,a.next)?C(a,b,a.next)>=0&&C(a,a.prev,b)>=0:0>C(a,b,a.prev)||0>C(a,a.next,b)}function I(a,b){let c=L(a.i,a.x,a.y),d=L(b.i,b.x,b.y),e=a.next,f=b.prev;return a.next=b,b.prev=a,c.next=e,e.prev=c,d.next=c,c.prev=d,f.next=d,d.prev=f,d}function J(a,b,c,d){let e=L(a,b,c);return d?(e.next=d.next,e.prev=d,d.next.prev=e,d.next=e):(e.prev=e,e.next=e),e}function K(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function L(a,b,c){return{i:a,x:b,y:c,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}a.i(61607);let M=v.default||v;function N(a,b,c,d,e,f,g){let h=M(a,b,2);if(!h)return;for(let a=0;a<h.length;a+=3)f[g++]=h[a]+e,f[g++]=h[a+1]+e,f[g++]=h[a+2]+e;let i=e*d;for(let b=0;b<a.length;b+=2)c[i]=a[b],c[i+1]=a[b+1],i+=d}let O=[],P={extension:{type:b.ExtensionType.ShapeBuilder,name:"polygon"},build(a,b){for(let c=0;c<a.points.length;c++)b[c]=a.points[c];return!0},triangulate(a,b,c,d,e,f){N(a,O,b,c,d,e,f)}},Q={extension:{type:b.ExtensionType.ShapeBuilder,name:"rectangle"},build(a,b){let c=a.x,d=a.y,e=a.width,f=a.height;return!!(e>0&&f>0)&&(b[0]=c,b[1]=d,b[2]=c+e,b[3]=d,b[4]=c+e,b[5]=d+f,b[6]=c,b[7]=d+f,!0)},triangulate(a,b,c,d,e,f){let g=0;b[(d*=c)+g]=a[0],b[d+g+1]=a[1],g+=c,b[d+g]=a[2],b[d+g+1]=a[3],g+=c,b[d+g]=a[6],b[d+g+1]=a[7],g+=c,b[d+g]=a[4],b[d+g+1]=a[5],g+=c;let h=d/c;e[f++]=h,e[f++]=h+1,e[f++]=h+2,e[f++]=h+1,e[f++]=h+3,e[f++]=h+2}},R={extension:{type:b.ExtensionType.ShapeBuilder,name:"triangle"},build:(a,b)=>(b[0]=a.x,b[1]=a.y,b[2]=a.x2,b[3]=a.y2,b[4]=a.x3,b[5]=a.y3,!0),triangulate(a,b,c,d,e,f){let g=0;b[(d*=c)+g]=a[0],b[d+g+1]=a[1],g+=c,b[d+g]=a[2],b[d+g+1]=a[3],g+=c,b[d+g]=a[4],b[d+g+1]=a[5];let h=d/c;e[f++]=h,e[f++]=h+1,e[f++]=h+2}};var S=a.i(98063),T=a.i(58422),U=a.i(19548),V=a.i(90423),W=a.i(43925);let X=[{offset:0,color:"white"},{offset:1,color:"black"}],Y=class a{constructor(...b){this.uid=(0,V.uid)("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let c=function(a){let b=a[0]??{};return("number"==typeof b||a[1])&&((0,g.deprecation)("8.5.2","use options object instead"),b={type:"linear",start:{x:a[0],y:a[1]},end:{x:a[2],y:a[3]},textureSpace:a[4],textureSize:a[5]??Y.defaultLinearOptions.textureSize}),b}(b);c={..."radial"===c.type?a.defaultRadialOptions:a.defaultLinearOptions,...(0,W.definedProps)(c)},this._textureSize=c.textureSize,this._wrapMode=c.wrapMode,"radial"===c.type?(this.center=c.center,this.outerCenter=c.outerCenter??this.center,this.innerRadius=c.innerRadius,this.outerRadius=c.outerRadius,this.scale=c.scale,this.rotation=c.rotation):(this.start=c.start,this.end=c.end),this.textureSpace=c.textureSpace,this.type=c.type,c.colorStops.forEach(a=>{this.addColorStop(a.offset,a.color)})}addColorStop(a,b){return this.colorStops.push({offset:a,color:S.Color.shared.setValue(b).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:a,y:b}=this.start,{x:c,y:d}=this.end,e=c-a,f=d-b,g=e<0||f<0;if("clamp-to-edge"===this._wrapMode){if(e<0){let b=a;a=c,c=b,e*=-1}if(f<0){let a=b;b=d,d=a,f*=-1}}let h=this.colorStops.length?this.colorStops:X,j=this._textureSize,{canvas:k,context:m}=$(j,1),n=g?m.createLinearGradient(this._textureSize,0,0,0):m.createLinearGradient(0,0,this._textureSize,0);Z(n,h),m.fillStyle=n,m.fillRect(0,0,j,1),this.texture=new l.Texture({source:new U.ImageSource({resource:k,addressMode:this._wrapMode})});let o=Math.sqrt(e*e+f*f),p=Math.atan2(f,e),q=new i.Matrix;q.scale(o/j,1),q.rotate(p),q.translate(a,b),"local"===this.textureSpace&&q.scale(j,j),this.transform=q}buildGradient(){!this.texture&&this._tick++,"linear"===this.type?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;let a=this.colorStops.length?this.colorStops:X,b=this._textureSize,{canvas:c,context:d}=$(b,b),{x:e,y:f}=this.center,{x:g,y:h}=this.outerCenter,j=this.innerRadius,k=this.outerRadius,m=g-k,n=h-k,o=b/(2*k),p=(e-m)*o,q=(f-n)*o,r=d.createRadialGradient(p,q,j*o,(g-m)*o,(h-n)*o,k*o);Z(r,a),d.fillStyle=a[a.length-1].color,d.fillRect(0,0,b,b),d.fillStyle=r,d.translate(p,q),d.rotate(this.rotation),d.scale(1,this.scale),d.translate(-p,-q),d.fillRect(0,0,b,b),this.texture=new l.Texture({source:new U.ImageSource({resource:c,addressMode:this._wrapMode})});let s=new i.Matrix;s.scale(1/o,1/o),s.translate(m,n),"local"===this.textureSpace&&s.scale(b,b),this.transform=s}destroy(){this.texture?.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};function Z(a,b){for(let c=0;c<b.length;c++){let d=b[c];a.addColorStop(d.offset,d.color)}}function $(a,b){let c=T.DOMAdapter.get().createCanvas(a,b),d=c.getContext("2d");return{canvas:c,context:d}}Y.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"},Y.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"},a.s(["FillGradient",()=>Y],13753);let _=new i.Matrix,aa=new j.Rectangle,ab={};b.extensions.handleByMap(b.ExtensionType.ShapeBuilder,ab),b.extensions.add(Q,P,R,p,q,r);let ac=new j.Rectangle,ad=new i.Matrix;function ae(a,b,c,d,e){let{vertices:f,uvs:g,indices:i}=e;a.shapePrimitives.forEach(({shape:a,transform:j,holes:m})=>{let n=[],p=ab[a.type];if(!p.build(a,n))return;let q=i.length,r=f.length/2,v="triangle-list";if(j&&k(n,j),c){let c=a.closePath??!0;b.pixelLine?(!function(a,b,c,d){if(0===a.length)return;let e=a[0],f=a[1],g=a[a.length-2],h=a[a.length-1],i=b||1e-4>Math.abs(e-g)&&1e-4>Math.abs(f-h),j=a.length/2,k=c.length/2;for(let b=0;b<j;b++)c.push(a[2*b]),c.push(a[2*b+1]);for(let a=0;a<j-1;a++)d.push(k+a,k+a+1);i&&d.push(k+j-1,k)}(n,c,f,i),v="line-list"):function(a,b,c,d,e,f){if(0===a.length)return;let g=b.alignment;if(.5!==b.alignment){let b=function(a){let b=a.length;if(b<6)return 1;let c=0;for(let d=0,e=a[b-2],f=a[b-1];d<b;d+=2){let b=a[d],g=a[d+1];c+=(b-e)*(g+f),e=b,f=g}return c<0?-1:1}(a);c&&(b*=-1),g=(g-.5)*b+.5}let h=new s.Point(a[0],a[1]),i=new s.Point(a[a.length-2],a[a.length-1]),j=1e-4>Math.abs(h.x-i.x)&&1e-4>Math.abs(h.y-i.y);if(d){a=a.slice(),j&&(a.pop(),a.pop(),i.set(a[a.length-2],a[a.length-1]));let b=(h.x+i.x)*.5,c=(i.y+h.y)*.5;a.unshift(b,c),a.push(b,c)}let k=a.length/2,l=a.length,m=e.length/2,n=b.width/2,o=n*n,p=b.miterLimit*b.miterLimit,q=a[0],r=a[1],v=a[2],w=a[3],x=0,y=0,z=-(r-w),A=q-v,B=0,C=0,D=Math.sqrt(z*z+A*A);z/=D,A/=D,z*=n,A*=n;let E=g,F=(1-E)*2,G=2*E;d||("round"===b.cap?l+=u(q-z*(F-G)*.5,r-A*(F-G)*.5,q-z*F,r-A*F,q+z*G,r+A*G,e,!0)+2:"square"===b.cap&&(l+=t(q,r,z,A,F,G,!0,e))),e.push(q-z*F,r-A*F),e.push(q+z*G,r+A*G);for(let c=1;c<k-1;++c){q=a[(c-1)*2],r=a[(c-1)*2+1],v=a[2*c],w=a[2*c+1],x=a[(c+1)*2],y=a[(c+1)*2+1],D=Math.sqrt((z=-(r-w))*z+(A=q-v)*A),z/=D,A/=D,z*=n,A*=n,D=Math.sqrt((B=-(w-y))*B+(C=v-x)*C),B/=D,C/=D,B*=n,C*=n;let d=v-q,f=r-w,g=v-x,h=y-w,i=d*g+f*h,j=f*g-h*d,k=j<0;if(Math.abs(j)<.001*Math.abs(i)){e.push(v-z*F,w-A*F),e.push(v+z*G,w+A*G),i>=0&&("round"===b.join?l+=u(v,w,v-z*F,w-A*F,v-B*F,w-C*F,e,!1)+4:l+=2,e.push(v-B*G,w-C*G),e.push(v+B*F,w+C*F));continue}let m=(-z+q)*(-A+w)-(-z+v)*(-A+r),s=(-B+x)*(-C+w)-(-B+v)*(-C+y),t=(d*s-g*m)/j,E=(h*m-f*s)/j,H=(t-v)*(t-v)+(E-w)*(E-w),I=v+(t-v)*F,J=w+(E-w)*F,K=v-(t-v)*G,L=w-(E-w)*G,M=k?F:G;H<=Math.min(d*d+f*f,g*g+h*h)+M*M*o?"bevel"===b.join||H/o>p?(k?(e.push(I,J),e.push(v+z*G,w+A*G),e.push(I,J),e.push(v+B*G,w+C*G)):(e.push(v-z*F,w-A*F),e.push(K,L),e.push(v-B*F,w-C*F),e.push(K,L)),l+=2):"round"===b.join?k?(e.push(I,J),e.push(v+z*G,w+A*G),l+=u(v,w,v+z*G,w+A*G,v+B*G,w+C*G,e,!0)+4,e.push(I,J),e.push(v+B*G,w+C*G)):(e.push(v-z*F,w-A*F),e.push(K,L),l+=u(v,w,v-z*F,w-A*F,v-B*F,w-C*F,e,!1)+4,e.push(v-B*F,w-C*F),e.push(K,L)):(e.push(I,J),e.push(K,L)):(e.push(v-z*F,w-A*F),e.push(v+z*G,w+A*G),"round"===b.join?k?l+=u(v,w,v+z*G,w+A*G,v+B*G,w+C*G,e,!0)+2:l+=u(v,w,v-z*F,w-A*F,v-B*F,w-C*F,e,!1)+2:"miter"===b.join&&H/o<=p&&(k?(e.push(K,L),e.push(K,L)):(e.push(I,J),e.push(I,J)),l+=2),e.push(v-B*F,w-C*F),e.push(v+B*G,w+C*G),l+=2)}q=a[(k-2)*2],r=a[(k-2)*2+1],v=a[(k-1)*2],D=Math.sqrt((z=-(r-(w=a[(k-1)*2+1])))*z+(A=q-v)*A),z/=D,A/=D,z*=n,A*=n,e.push(v-z*F,w-A*F),e.push(v+z*G,w+A*G),d||("round"===b.cap?l+=u(v-z*(F-G)*.5,w-A*(F-G)*.5,v-z*F,w-A*F,v+z*G,w+A*G,e,!1)+2:"square"===b.cap&&(l+=t(v,w,z,A,F,G,!1,e)));let H=1e-4*1e-4;for(let a=m;a<l+m-2;++a)q=e[2*a],r=e[2*a+1],v=e[(a+1)*2],w=e[(a+1)*2+1],x=e[(a+2)*2],Math.abs(q*(w-(y=e[(a+2)*2+1]))+v*(y-r)+x*(r-w))<H||f.push(a,a+1,a+2)}(n,b,!1,c,f,i)}else if(m){let a=[],b=n.slice();(function(a){let b=[];for(let c=0;c<a.length;c++){let d=a[c].shape,e=[];ab[d.type].build(d,e)&&b.push(e)}return b})(m).forEach(c=>{a.push(b.length/2),b.push(...c)}),N(b,a,f,2,r,i,q)}else p.triangulate(n,f,2,r,i,q);let w=g.length/2,x=b.texture;if(x!==l.Texture.WHITE){let c=function(a,b,c,d){let e=b.matrix?a.copyFrom(b.matrix).invert():a.identity();if("local"===b.textureSpace){let a=c.getBounds(aa);b.width&&a.pad(b.width);let{x:d,y:f}=a,g=1/a.width,h=1/a.height,i=-d*g,j=-f*h,k=e.a,l=e.b,m=e.c,n=e.d;e.a*=g,e.b*=g,e.c*=h,e.d*=h,e.tx=i*k+j*m+e.tx,e.ty=i*l+j*n+e.ty}else e.translate(b.texture.frame.x,b.texture.frame.y),e.scale(1/b.texture.source.width,1/b.texture.source.height);let f=b.texture.source.style;return b.fill instanceof Y||"clamp-to-edge"!==f.addressMode||(f.addressMode="repeat",f.update()),d&&e.append(_.copyFrom(d).invert()),e}(ad,b,a,j);!function(a,b,c,d,e,f,g,h=null){let i=0;c*=2,e*=2;let j=h.a,k=h.b,l=h.c,m=h.d,n=h.tx,o=h.ty;for(;i<g;){let b=a[c],f=a[c+1];d[e]=j*b+l*f+n,d[e+1]=k*b+m*f+o,e+=2,c+=2,i++}}(f,0,r,g,w,0,f.length/2-r,c)}else{var y=w,z=f.length/2-r;let a=0;for(y*=2;a<z;)g[y]=0,g[y+1]=0,y+=2,a++}let A=h.BigPool.get(o);A.indexOffset=q,A.indexSize=i.length-q,A.attributeOffset=r,A.attributeSize=f.length/2-r,A.baseColor=b.color,A.alpha=b.alpha,A.texture=x,A.geometryData=e,A.topology=v,d.push(A)})}class af{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}reset(){this.batches&&this.batches.forEach(a=>{h.BigPool.return(a)}),this.graphicsData&&h.BigPool.return(this.graphicsData),this.isBatchable=!1,this.context=null,this.batches.length=0,this.geometryData.indices.length=0,this.geometryData.vertices.length=0,this.geometryData.uvs.length=0,this.graphicsData=null}destroy(){this.reset(),this.batches=null,this.geometryData=null}}class ag{constructor(){this.instructions=new e.InstructionSet}init(a){let b=a.maxTextures;this.batcher?this.batcher._updateMaxTextures(b):this.batcher=new d.DefaultBatcher({maxTextures:b}),this.instructions.reset()}get geometry(){return(0,g.deprecation)(g.v8_3_4,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}let ah=class a{constructor(a){this._renderer=a,this._managedContexts=new f.GCManagedHash({renderer:a,type:"resource",name:"graphicsContext"})}init(b){a.defaultOptions.bezierSmoothness=b?.bezierSmoothness??a.defaultOptions.bezierSmoothness}getContextRenderData(a){return a._gpuData[this._renderer.uid].graphicsData||this._initContextRenderData(a)}updateGpuContext(a){let b=!!a._gpuData[this._renderer.uid],c=a._gpuData[this._renderer.uid]||this._initContext(a);if(a.dirty||!b){b&&c.reset(),function(a,b){let{geometryData:c,batches:d}=b;d.length=0,c.indices.length=0,c.vertices.length=0,c.uvs.length=0;for(let b=0;b<a.instructions.length;b++){let e=a.instructions[b];if("texture"===e.action)!function(a,b,c){let d=[],e=ab.rectangle;ac.x=a.dx,ac.y=a.dy,ac.width=a.dw,ac.height=a.dh;let f=a.transform;if(!e.build(ac,d))return;let{vertices:g,uvs:i,indices:j}=c,l=j.length,m=g.length/2;f&&k(d,f),e.triangulate(d,g,2,m,j,l);let n=a.image,p=n.uvs;i.push(p.x0,p.y0,p.x1,p.y1,p.x3,p.y3,p.x2,p.y2);let q=h.BigPool.get(o);q.indexOffset=l,q.indexSize=j.length-l,q.attributeOffset=m,q.attributeSize=g.length/2-m,q.baseColor=a.style,q.alpha=a.alpha,q.texture=n,q.geometryData=c,b.push(q)}(e.data,d,c);else if("fill"===e.action||"stroke"===e.action){let a="stroke"===e.action,b=e.data.path.shapePath,f=e.data.style,g=e.data.hole;a&&g&&ae(g.shapePath,f,!0,d,c),g&&(b.shapePrimitives[b.shapePrimitives.length-1].holes=g.shapePath.shapePrimitives),ae(b,f,a,d,c)}}}(a,c);let d=a.batchMode;a.customShader||"no-batch"===d?c.isBatchable=!1:"auto"===d?c.isBatchable=c.geometryData.vertices.length<400:c.isBatchable=!0,a.dirty=!1}return c}getGpuContext(a){return a._gpuData[this._renderer.uid]||this._initContext(a)}_initContextRenderData(a){let b=h.BigPool.get(ag,{maxTextures:this._renderer.limits.maxBatchableTextures}),d=a._gpuData[this._renderer.uid],{batches:e,geometryData:f}=d;d.graphicsData=b;let g=f.vertices.length,i=f.indices.length;for(let a=0;a<e.length;a++)e[a].applyTransform=!1;let j=b.batcher;j.ensureAttributeBuffer(g),j.ensureIndexBuffer(i),j.begin();for(let a=0;a<e.length;a++){let b=e[a];j.add(b)}j.finish(b.instructions);let k=j.geometry;k.indexBuffer.setDataWithSize(j.indexBuffer,j.indexSize,!0),k.buffers[0].setDataWithSize(j.attributeBuffer.float32View,j.attributeSize,!0);let l=j.batches;for(let a=0;a<l.length;a++){let b=l[a];b.bindGroup=(0,c.getTextureBatchBindGroup)(b.textures.textures,b.textures.count,this._renderer.limits.maxBatchableTextures)}return b}_initContext(a){let b=new af;return b.context=a,a._gpuData[this._renderer.uid]=b,this._managedContexts.add(a),b}destroy(){this._managedContexts.destroy(),this._renderer=null}};ah.extension={type:[b.ExtensionType.WebGLSystem,b.ExtensionType.WebGPUSystem,b.ExtensionType.CanvasSystem],name:"graphicsContext"},ah.defaultOptions={bezierSmoothness:.5},a.s(["GraphicsContextSystem",()=>ah],68667)},10586,35611,a=>{"use strict";var b=a.i(47790),c=a.i(90423),d=a.i(51983),e=a.i(77851),f=a.i(77473),g=a.i(42172),h=a.i(2638),i=a.i(31023),j=a.i(37013),k=a.i(83813),l=a.i(68667);function m(a,b,c,d,e,f,g,h,i,j){var k,m,n;let o=(1-Math.min(.99,Math.max(0,j??l.GraphicsContextSystem.defaultOptions.bezierSmoothness)))/1;return o*=o,function a(b,c,d,e,f,g,h,i,j,k,l){if(l>8)return;let m=(b+d)/2,n=(c+e)/2,o=(d+f)/2,p=(e+g)/2,q=(f+h)/2,r=(g+i)/2,s=(m+o)/2,t=(n+p)/2,u=(o+q)/2,v=(p+r)/2,w=(s+u)/2,x=(t+v)/2;if(l>0){let a=h-b,l=i-c,m=Math.abs((d-h)*l-(e-i)*a),n=Math.abs((f-h)*l-(g-i)*a);if(m>11920929e-14&&n>11920929e-14){if((m+n)*(m+n)<=k*(a*a+l*l))return void j.push(w,x)}else if(m>11920929e-14){if(m*m<=k*(a*a+l*l))return void j.push(w,x)}else if(n>11920929e-14){if(n*n<=k*(a*a+l*l))return void j.push(w,x)}else if((a=w-(b+h)/2)*a+(l=x-(c+i)/2)*l<=k)return void j.push(w,x)}a(b,c,m,n,s,t,w,x,j,k,l+1),a(w,x,u,v,q,r,h,i,j,k,l+1)}(b,c,d,e,f,g,k=h,m=i,n=a,o,0),n.push(k,m),a}function n(a,b,c,d,e,f,g,h){let i=Math.abs(e-f);!g&&e>f?i=2*Math.PI-i:g&&f>e&&(i=2*Math.PI-i),h||(h=Math.max(6,Math.floor(6*Math.pow(d,1/3)*(i/Math.PI))));let j=i/(h=Math.max(h,3)),k=e;j*=g?-1:1;for(let e=0;e<h+1;e++){let e=b+Math.cos(k)*d,f=c+Math.sin(k)*d;a.push(e,f),k+=j}}let o=2*Math.PI,p={centerX:0,centerY:0,ang1:0,ang2:0},q=({x:a,y:b},c,d,e,f,g,h,i)=>{let j=e*(a*=c)-f*(b*=d),k=f*a+e*b;return i.x=j+g,i.y=k+h,i},r=(a,b,c,d)=>{let e=a*c+b*d;return e>1&&(e=1),e<-1&&(e=-1),(a*d-b*c<0?-1:1)*Math.acos(e)},s=new i.Rectangle;class t{constructor(a){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new k.Bounds,this._graphicsPath2D=a,this.signed=a.checkForHoles}moveTo(a,b){return this.startPoly(a,b),this}lineTo(a,b){this._ensurePoly();let c=this._currentPoly.points,d=c[c.length-2],e=c[c.length-1];return(d!==a||e!==b)&&c.push(a,b),this}arc(a,b,c,d,e,f){return this._ensurePoly(!1),n(this._currentPoly.points,a,b,c,d,e,f),this}arcTo(a,b,c,d,e){return this._ensurePoly(),!function(a,b,c,d,e,f){let g=a[a.length-2],h=a[a.length-1]-c,i=g-b,j=e-c,k=d-b,l=Math.abs(h*k-i*j);if(l<1e-8||0===f){(a[a.length-2]!==b||a[a.length-1]!==c)&&a.push(b,c);return}let m=h*h+i*i,o=j*j+k*k,p=h*j+i*k,q=f*Math.sqrt(m)/l,r=f*Math.sqrt(o)/l,s=q*p/m,t=r*p/o,u=q*k+r*i,v=q*j+r*h,w=Math.atan2(h*(r+s)-v,i*(r+s)-u),x=Math.atan2(j*(q+t)-v,k*(q+t)-u);n(a,u+b,v+c,f,w,x,i*j>k*h)}(this._currentPoly.points,a,b,c,d,e),this}arcToSvg(a,b,c,d,e,f,g){return!function(a,b,c,d,e,f,g,h=0,i=0,j=0){var k,l;let n,s,t,u,v,w,x,y,z,A,B;if(0===f||0===g)return;let C=Math.sin(h*o/360),D=Math.cos(h*o/360),E=D*(b-d)/2+C*(c-e)/2,F=-C*(b-d)/2+D*(c-e)/2;if(0===E&&0===F)return;let G=Math.pow(E,2)/Math.pow(f=Math.abs(f),2)+Math.pow(F,2)/Math.pow(g=Math.abs(g),2);G>1&&(f*=Math.sqrt(G),g*=Math.sqrt(G)),k=f,l=g,n=Math.pow(k,2),s=Math.pow(l,2),t=Math.pow(E,2),(v=n*s-n*(u=Math.pow(F,2))-s*t)<0&&(v=0),v/=n*u+s*t,w=(v=Math.sqrt(v)*(i===j?-1:1))*k/l*F,x=-(v*l)/k*E,A=r(1,0,y=(E-w)/k,z=(F-x)/l),B=r(y,z,(-E-w)/k,(-F-x)/l),0===j&&B>0&&(B-=o),1===j&&B<0&&(B+=o),p.centerX=D*w-C*x+(b+d)/2,p.centerY=C*w+D*x+(c+e)/2,p.ang1=A,p.ang2=B;let{ang1:H,ang2:I}=p,{centerX:J,centerY:K}=p,L=Math.abs(I)/(o/4);1e-7>Math.abs(1-L)&&(L=1);let M=Math.max(Math.ceil(L),1);I/=M;let N=a[a.length-2],O=a[a.length-1],P={x:0,y:0};for(let b=0;b<M;b++){let b=function(a,b){let c=-1.5707963267948966===b?-.551915024494:4/3*Math.tan(b/4),d=1.5707963267948966===b?.551915024494:c,e=Math.cos(a),f=Math.sin(a),g=Math.cos(a+b),h=Math.sin(a+b);return[{x:e-f*d,y:f+e*d},{x:g+h*d,y:h-g*d},{x:g,y:h}]}(H,I),{x:c,y:d}=q(b[0],f,g,D,C,J,K,P),{x:e,y:h}=q(b[1],f,g,D,C,J,K,P),{x:i,y:j}=q(b[2],f,g,D,C,J,K,P);m(a,N,O,c,d,e,h,i,j),N=i,O=j,H+=I}}(this._currentPoly.points,this._currentPoly.lastX,this._currentPoly.lastY,f,g,a,b,c,d,e),this}bezierCurveTo(a,b,c,d,e,f,g){this._ensurePoly();let h=this._currentPoly;return m(this._currentPoly.points,h.lastX,h.lastY,a,b,c,d,e,f,g),this}quadraticCurveTo(a,b,c,d,e){var f,g,h,i,j,k,m,n,o,p,q;let r;this._ensurePoly();let s=this._currentPoly;return f=this._currentPoly.points,g=s.lastX,h=s.lastY,r=(1-Math.min(.99,Math.max(0,e??l.GraphicsContextSystem.defaultOptions.bezierSmoothness)))/1,i=g,j=h,k=a,m=b,n=c,o=d,p=f,q=r*=r,function a(b,c,d,e,f,g,h,i,j){if(j>8)return;let k=(c+e)/2,l=(d+f)/2,m=(e+g)/2,n=(f+h)/2,o=(k+m)/2,p=(l+n)/2,q=g-c,r=h-d,s=Math.abs((e-g)*r-(f-h)*q);if(s>11920929e-14){if(s*s<=i*(q*q+r*r))return void b.push(o,p)}else if((q=o-(c+g)/2)*q+(r=p-(d+h)/2)*r<=i)return void b.push(o,p);a(b,c,d,k,l,o,p,i,j+1),a(b,o,p,m,n,g,h,i,j+1)}(p,i,j,k,m,n,o,q,0),p.push(n,o),this}closePath(){return this.endPoly(!0),this}addPath(a,b){this.endPoly(),b&&!b.isIdentity()&&(a=a.clone(!0)).transform(b);let c=this.shapePrimitives,d=c.length;for(let b=0;b<a.instructions.length;b++){let c=a.instructions[b];this[c.action](...c.data)}if(a.checkForHoles&&c.length-d>1){let a=null;for(let b=d;b<c.length;b++){let d=c[b];if("polygon"===d.shape.type){let e=d.shape,f=a?.shape;f&&f.containsPolygon(e)?(a.holes||(a.holes=[]),a.holes.push(d),c.copyWithin(b,b+1),c.length--,b--):a=d}}}return this}finish(a=!1){this.endPoly(a)}rect(a,b,c,d,e){return this.drawShape(new i.Rectangle(a,b,c,d),e),this}circle(a,b,c,d){return this.drawShape(new f.Circle(a,b,c),d),this}poly(a,b,c){let d=new h.Polygon(a);return d.closePath=b,this.drawShape(d,c),this}regularPoly(a,b,c,d,e=0,f){let g=-1*Math.PI/2+e,h=2*Math.PI/(d=Math.max(0|d,3)),i=[];for(let e=0;e<d;e++){let d=g-e*h;i.push(a+c*Math.cos(d),b+c*Math.sin(d))}return this.poly(i,!0,f),this}roundPoly(a,b,c,d,e,f=0,g){if(d=Math.max(0|d,3),e<=0)return this.regularPoly(a,b,c,d,f);e=Math.min(e,c*Math.sin(Math.PI/d)-.001);let h=-1*Math.PI/2+f,i=2*Math.PI/d,j=(d-2)*Math.PI/d/2;for(let f=0;f<d;f++){let d=f*i+h,k=a+c*Math.cos(d),l=b+c*Math.sin(d),m=d+Math.PI+j,n=d-Math.PI-j,o=k+e*Math.cos(m),p=l+e*Math.sin(m),q=k+e*Math.cos(n),r=l+e*Math.sin(n);0===f?this.moveTo(o,p):this.lineTo(o,p),this.quadraticCurveTo(k,l,q,r,g)}return this.closePath()}roundShape(a,b,c=!1,d){return a.length<3?this:(c?!function(a,b,c,d){let e=(a,b)=>Math.sqrt((a.x-b.x)**2+(a.y-b.y)**2),f=(a,b,c)=>({x:a.x+(b.x-a.x)*c,y:a.y+(b.y-a.y)*c}),g=b.length;for(let h=0;h<g;h++){let i,j,k=b[(h+1)%g],l=k.radius??c;if(l<=0){0===h?a.moveTo(k.x,k.y):a.lineTo(k.x,k.y);continue}let m=b[h],n=b[(h+2)%g],o=e(m,k);i=o<1e-4?k:f(k,m,Math.min(o/2,l)/o);let p=e(n,k);j=p<1e-4?k:f(k,n,Math.min(p/2,l)/p),0===h?a.moveTo(i.x,i.y):a.lineTo(i.x,i.y),a.quadraticCurveTo(k.x,k.y,j.x,j.y,d)}}(this,a,b,d):!function(a,b,c){let d=(a,b)=>{let c=b.x-a.x,d=b.y-a.y,e=Math.sqrt(c*c+d*d);return{len:e,nx:c/e,ny:d/e}},e=(b,c)=>{0===b?a.moveTo(c.x,c.y):a.lineTo(c.x,c.y)},f=b[b.length-1];for(let g=0;g<b.length;g++){let h,i=b[g%b.length],j=i.radius??c;if(j<=0){e(g,i),f=i;continue}let k=b[(g+1)%b.length],l=d(i,f),m=d(i,k);if(l.len<1e-4||m.len<1e-4){e(g,i),f=i;continue}let n=Math.asin(l.nx*m.ny-l.ny*m.nx),o=1,p=!1;l.nx*m.nx- -(l.ny*m.ny)<0?n<0?n=Math.PI+n:(n=Math.PI-n,o=-1,p=!0):n>0&&(o=-1,p=!0);let q=n/2,r=Math.abs(Math.cos(q)*j/Math.sin(q));h=r>Math.min(l.len/2,m.len/2)?Math.abs((r=Math.min(l.len/2,m.len/2))*Math.sin(q)/Math.cos(q)):j;let s=i.x+m.nx*r+-m.ny*h*o,t=i.y+m.ny*r+m.nx*h*o,u=Math.atan2(l.ny,l.nx)+Math.PI/2*o,v=Math.atan2(m.ny,m.nx)-Math.PI/2*o;0===g&&a.moveTo(s+Math.cos(u)*h,t+Math.sin(u)*h),a.arc(s,t,h,u,v,p),f=i}}(this,a,b),this.closePath())}filletRect(a,b,c,d,e){if(0===e)return this.rect(a,b,c,d);let f=Math.min(c,d)/2,g=Math.min(f,Math.max(-f,e)),h=a+c,i=b+d,j=g<0?-g:0,k=Math.abs(g);return this.moveTo(a,b+k).arcTo(a+j,b+j,a+k,b,k).lineTo(h-k,b).arcTo(h-j,b+j,h,b+k,k).lineTo(h,i-k).arcTo(h-j,i-j,a+c-k,i,k).lineTo(a+k,i).arcTo(a+j,i-j,a,i-k,k).closePath()}chamferRect(a,b,c,d,e,f){if(e<=0)return this.rect(a,b,c,d);let g=Math.min(e,Math.min(c,d)/2),h=a+c,i=b+d,j=[a+g,b,h-g,b,h,b+g,h,i-g,h-g,i,a+g,i,a,i-g,a,b+g];for(let a=j.length-1;a>=2;a-=2)j[a]===j[a-2]&&j[a-1]===j[a-3]&&j.splice(a-1,2);return this.poly(j,!0,f)}ellipse(a,b,c,d,e){return this.drawShape(new g.Ellipse(a,b,c,d),e),this}roundRect(a,b,c,d,e,f){return this.drawShape(new j.RoundedRectangle(a,b,c,d,e),f),this}drawShape(a,b){return this.endPoly(),this.shapePrimitives.push({shape:a,transform:b}),this}startPoly(a,b){let c=this._currentPoly;return c&&this.endPoly(),(c=new h.Polygon).points.push(a,b),this._currentPoly=c,this}endPoly(a=!1){let b=this._currentPoly;return b&&b.points.length>2&&(b.closePath=a,this.shapePrimitives.push({shape:b})),this._currentPoly=null,this}_ensurePoly(a=!0){if(!this._currentPoly&&(this._currentPoly=new h.Polygon,a)){let a=this.shapePrimitives[this.shapePrimitives.length-1];if(a){let b=a.shape.x,c=a.shape.y;if(a.transform&&!a.transform.isIdentity()){let d=a.transform,e=b;b=d.a*b+d.c*c+d.tx,c=d.b*e+d.d*c+d.ty}this._currentPoly.points.push(b,c)}else this._currentPoly.points.push(0,0)}}buildPath(){let a=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let b=0;b<a.instructions.length;b++){let c=a.instructions[b];this[c.action](...c.data)}this.finish()}get bounds(){let a=this._bounds;a.clear();let b=this.shapePrimitives;for(let c=0;c<b.length;c++){let d=b[c],e=d.shape.getBounds(s);d.transform?a.addRect(e,d.transform):a.addRect(e)}return a}}class u{constructor(a,b=!1){this.instructions=[],this.uid=(0,c.uid)("graphicsPath"),this._dirty=!0,this.checkForHoles=b,"string"==typeof a?(0,e.parseSVGPath)(a,this):this.instructions=a?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new t(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(a,b){return a=a.clone(),this.instructions.push({action:"addPath",data:[a,b]}),this._dirty=!0,this}arc(...a){return this.instructions.push({action:"arc",data:a}),this._dirty=!0,this}arcTo(...a){return this.instructions.push({action:"arcTo",data:a}),this._dirty=!0,this}arcToSvg(...a){return this.instructions.push({action:"arcToSvg",data:a}),this._dirty=!0,this}bezierCurveTo(...a){return this.instructions.push({action:"bezierCurveTo",data:a}),this._dirty=!0,this}bezierCurveToShort(a,c,d,e,f){let g=this.instructions[this.instructions.length-1],h=this.getLastPoint(b.Point.shared),i=0,j=0;if(g&&"bezierCurveTo"===g.action){i=g.data[2],j=g.data[3];let a=h.x,b=h.y;i=a+(a-i),j=b+(b-j)}else i=h.x,j=h.y;return this.instructions.push({action:"bezierCurveTo",data:[i,j,a,c,d,e,f]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...a){return this.instructions.push({action:"ellipse",data:a}),this._dirty=!0,this}lineTo(...a){return this.instructions.push({action:"lineTo",data:a}),this._dirty=!0,this}moveTo(...a){return this.instructions.push({action:"moveTo",data:a}),this}quadraticCurveTo(...a){return this.instructions.push({action:"quadraticCurveTo",data:a}),this._dirty=!0,this}quadraticCurveToShort(a,c,d){let e=this.instructions[this.instructions.length-1],f=this.getLastPoint(b.Point.shared),g=0,h=0;if(e&&"quadraticCurveTo"===e.action){g=e.data[0],h=e.data[1];let a=f.x,b=f.y;g=a+(a-g),h=b+(b-h)}else g=f.x,h=f.y;return this.instructions.push({action:"quadraticCurveTo",data:[g,h,a,c,d]}),this._dirty=!0,this}rect(a,b,c,d,e){return this.instructions.push({action:"rect",data:[a,b,c,d,e]}),this._dirty=!0,this}circle(a,b,c,d){return this.instructions.push({action:"circle",data:[a,b,c,d]}),this._dirty=!0,this}roundRect(...a){return this.instructions.push({action:"roundRect",data:a}),this._dirty=!0,this}poly(...a){return this.instructions.push({action:"poly",data:a}),this._dirty=!0,this}regularPoly(...a){return this.instructions.push({action:"regularPoly",data:a}),this._dirty=!0,this}roundPoly(...a){return this.instructions.push({action:"roundPoly",data:a}),this._dirty=!0,this}roundShape(...a){return this.instructions.push({action:"roundShape",data:a}),this._dirty=!0,this}filletRect(...a){return this.instructions.push({action:"filletRect",data:a}),this._dirty=!0,this}chamferRect(...a){return this.instructions.push({action:"chamferRect",data:a}),this._dirty=!0,this}star(a,b,c,d,e,f,g){e||(e=d/2);let h=-1*Math.PI/2+f,i=2*c,j=2*Math.PI/i,k=[];for(let c=0;c<i;c++){let f=c%2?e:d,g=c*j+h;k.push(a+f*Math.cos(g),b+f*Math.sin(g))}return this.poly(k,!0,g),this}clone(a=!1){let b=new u;if(b.checkForHoles=this.checkForHoles,a)for(let a=0;a<this.instructions.length;a++){let c=this.instructions[a];b.instructions.push({action:c.action,data:c.data.slice()})}else b.instructions=this.instructions.slice();return b}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(a){if(a.isIdentity())return this;let b=a.a,c=a.b,e=a.c,f=a.d,g=a.tx,h=a.ty,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0;for(let q=0;q<this.instructions.length;q++){let r=this.instructions[q],s=r.data;switch(r.action){case"moveTo":case"lineTo":i=s[0],j=s[1],s[0]=b*i+e*j+g,s[1]=c*i+f*j+h;break;case"bezierCurveTo":k=s[0],l=s[1],m=s[2],n=s[3],i=s[4],j=s[5],s[0]=b*k+e*l+g,s[1]=c*k+f*l+h,s[2]=b*m+e*n+g,s[3]=c*m+f*n+h,s[4]=b*i+e*j+g,s[5]=c*i+f*j+h;break;case"quadraticCurveTo":k=s[0],l=s[1],i=s[2],j=s[3],s[0]=b*k+e*l+g,s[1]=c*k+f*l+h,s[2]=b*i+e*j+g,s[3]=c*i+f*j+h;break;case"arcToSvg":i=s[5],j=s[6],o=s[0],p=s[1],s[0]=b*o+e*p,s[1]=c*o+f*p,s[5]=b*i+e*j+g,s[6]=c*i+f*j+h;break;case"circle":s[4]=v(s[3],a);break;case"rect":s[4]=v(s[4],a);break;case"ellipse":s[8]=v(s[8],a);break;case"roundRect":s[5]=v(s[5],a);break;case"addPath":s[0].transform(a);break;case"poly":s[2]=v(s[2],a);break;default:(0,d.warn)("unknown transform action",r.action)}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(a){let b=this.instructions.length-1,c=this.instructions[b];if(!c)return a.x=0,a.y=0,a;for(;"closePath"===c.action;){if(--b<0)return a.x=0,a.y=0,a;c=this.instructions[b]}switch(c.action){case"moveTo":case"lineTo":a.x=c.data[0],a.y=c.data[1];break;case"quadraticCurveTo":a.x=c.data[2],a.y=c.data[3];break;case"bezierCurveTo":a.x=c.data[4],a.y=c.data[5];break;case"arc":case"arcToSvg":a.x=c.data[5],a.y=c.data[6];break;case"addPath":c.data[0].getLastPoint(a)}return a}}function v(a,b){return a?a.prepend(b):b.clone()}a.s(["GraphicsPath",()=>u],10586);var w=a.i(98063),x=a.i(13753);function y(a,b,c){let d=a.getAttribute(b);return d?Number(d):c}function z(a){let b=a.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return b?b[1]:""}let A={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function B(a,b){let c=a.getAttribute("style"),d={},e={},f={strokeStyle:d,fillStyle:e,useFill:!1,useStroke:!1};for(let c in A){let d=a.getAttribute(c);d&&C(b,f,c,d.trim())}if(c){let a=c.split(";");for(let c=0;c<a.length;c++){let[d,e]=a[c].trim().split(":");A[d]&&C(b,f,d,e.trim())}}return{strokeStyle:f.useStroke?d:null,fillStyle:f.useFill?e:null,useFill:f.useFill,useStroke:f.useStroke}}function C(a,b,c,d){switch(c){case"stroke":if("none"!==d){if(d.startsWith("url(")){let c=z(d);b.strokeStyle.fill=a.defs[c]}else b.strokeStyle.color=w.Color.shared.setValue(d).toNumber();b.useStroke=!0}break;case"stroke-width":b.strokeStyle.width=Number(d);break;case"fill":if("none"!==d){if(d.startsWith("url(")){let c=z(d);b.fillStyle.fill=a.defs[c]}else b.fillStyle.color=w.Color.shared.setValue(d).toNumber();b.useFill=!0}break;case"fill-opacity":b.fillStyle.alpha=Number(d);break;case"stroke-opacity":b.strokeStyle.alpha=Number(d);break;case"opacity":b.fillStyle.alpha=Number(d),b.strokeStyle.alpha=Number(d)}}function D(a,b){for(let c of new u(a,!1).instructions)b.instructions.push(c)}function E(a,b){if("string"==typeof a){let b=document.createElement("div");b.innerHTML=a.trim(),a=b.querySelector("svg")}let c={context:b,defs:{},path:new u};!function(a,b){let c=a.querySelectorAll("defs");for(let a=0;a<c.length;a++){let e=c[a];for(let a=0;a<e.children.length;a++){let c=e.children[a];switch(c.nodeName.toLowerCase()){case"lineargradient":b.defs[c.id]=function(a){let b=y(a,"x1",0),c=y(a,"y1",0),d=y(a,"x2",1),e=y(a,"y2",0),f=a.getAttribute("gradientUnits")||"objectBoundingBox",g=new x.FillGradient(b,c,d,e,"objectBoundingBox"===f?"local":"global");for(let b=0;b<a.children.length;b++){let c=a.children[b],d=y(c,"offset",0),e=w.Color.shared.setValue(c.getAttribute("stop-color")).toNumber();g.addColorStop(d,e)}return g}(c);break;case"radialgradient":b.defs[c.id]=((0,d.warn)("[SVG Parser] Radial gradients are not yet supported"),new x.FillGradient(0,0,1,0))}}}}(a,c);let e=a.children,{fillStyle:f,strokeStyle:g}=B(a,c);for(let a=0;a<e.length;a++){let b=e[a];"defs"!==b.nodeName.toLowerCase()&&function a(b,c,e,f){let g,h,i,j,k,l,m,n,o,p,q,r,s,t,v,w,x=b.children,{fillStyle:z,strokeStyle:A}=B(b,c);z&&e?e={...e,...z}:z&&(e=z),A&&f?f={...f,...A}:A&&(f=A);let C=!e&&!f;switch(C&&(e={color:0}),b.nodeName.toLowerCase()){case"path":{s=b.getAttribute("d");let a=b.getAttribute("fill-rule"),d=s.split(/(?=[Mm])/).filter(a=>a.trim().length>0),g=d.length>1;if("evenodd"===a&&g){let a=d.map(a=>({path:a,area:function(a){let b=a.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!b||b.length<4)return 0;let c=b.map(Number),d=[],e=[];for(let a=0;a<c.length;a+=2)a+1<c.length&&(d.push(c[a]),e.push(c[a+1]));if(0===d.length||0===e.length)return 0;let f=Math.min(...d),g=Math.min(...e);return(Math.max(...d)-f)*(Math.max(...e)-g)}(a)}));if(a.sort((a,b)=>b.area-a.area),d.length>3||!function(a){if(a.length<=2)return!0;let b=a.map(a=>a.area).sort((a,b)=>b-a),[c,d]=b,e=b[b.length-1];return!(c/d>3)||!(d/e<2)}(a))for(let b=0;b<a.length;b++){let d=a[b],g=0===b;c.context.beginPath();let h=new u(void 0,!0);D(d.path,h),c.context.path(h),g?(e&&c.context.fill(e),f&&c.context.stroke(f)):c.context.cut()}else for(let b=0;b<a.length;b++){let d=a[b],g=b%2==1;c.context.beginPath();let h=new u(void 0,!0);D(d.path,h),c.context.path(h),g?c.context.cut():(e&&c.context.fill(e),f&&c.context.stroke(f))}}else t=new u(s,!a||"evenodd"===a),c.context.path(t),e&&c.context.fill(e),f&&c.context.stroke(f);break}case"circle":m=y(b,"cx",0),n=y(b,"cy",0),o=y(b,"r",0),c.context.ellipse(m,n,o,o),e&&c.context.fill(e),f&&c.context.stroke(f);break;case"rect":g=y(b,"x",0),h=y(b,"y",0),v=y(b,"width",0),w=y(b,"height",0),p=y(b,"rx",0),q=y(b,"ry",0),p||q?c.context.roundRect(g,h,v,w,p||q):c.context.rect(g,h,v,w),e&&c.context.fill(e),f&&c.context.stroke(f);break;case"ellipse":m=y(b,"cx",0),n=y(b,"cy",0),p=y(b,"rx",0),q=y(b,"ry",0),c.context.beginPath(),c.context.ellipse(m,n,p,q),e&&c.context.fill(e),f&&c.context.stroke(f);break;case"line":i=y(b,"x1",0),j=y(b,"y1",0),k=y(b,"x2",0),l=y(b,"y2",0),c.context.beginPath(),c.context.moveTo(i,j),c.context.lineTo(k,l),f&&c.context.stroke(f);break;case"polygon":r=b.getAttribute("points").match(/-?\d+/g).map(a=>parseInt(a,10)),c.context.poly(r,!0),e&&c.context.fill(e),f&&c.context.stroke(f);break;case"polyline":r=b.getAttribute("points").match(/-?\d+/g).map(a=>parseInt(a,10)),c.context.poly(r,!1),f&&c.context.stroke(f);break;case"g":case"svg":break;default:(0,d.warn)(`[SVG parser] <${b.nodeName}> elements unsupported`)}C&&(e=null);for(let b=0;b<x.length;b++)a(x[b],c,e,f)}(b,c,f,g)}return b}a.s(["SVGParser",()=>E],35611)},89376,a=>{"use strict";var b=a.i(67309),c=a.i(90423);let d={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class e{constructor(a,e){this.uid=(0,c.uid)("fillPattern"),this._tick=0,this.transform=new b.Matrix,this.texture=a,this.transform.scale(1/a.frame.width,1/a.frame.height),e&&(a.source.style.addressModeU=d[e].addressModeU,a.source.style.addressModeV=d[e].addressModeV)}setTransform(a){let b=this.texture;this.transform.copyFrom(a),this.transform.invert(),this.transform.scale(1/b.frame.width,1/b.frame.height),this._tick++}get texture(){return this._texture}set texture(a){this._texture!==a&&(this._texture=a,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}a.s(["FillPattern",()=>e])},96781,52820,a=>{"use strict";var b=a.i(61607),c=a.i(98063),d=a.i(67309),e=a.i(47790),f=a.i(71805),g=a.i(90423),h=a.i(2897),i=a.i(83813),j=a.i(10586),k=a.i(35611),l=a.i(13753),m=a.i(89376);function n(a){return a instanceof m.FillPattern}function o(a){return a instanceof l.FillGradient}function p(a,b,c){return a.fill=b,a.color=0xffffff,a.texture=b.texture,a.matrix=b.transform,{...c,...a}}function q(a,b,c){return b.buildGradient(),a.fill=b,a.color=0xffffff,a.texture=b.texture,a.matrix=b.transform,a.textureSpace=b.textureSpace,{...c,...a}}function r(a,b){let d,e;if(null==a)return null;let g={};if(c.Color.isColorLike(a)){let d;return g.color=(d=c.Color.shared.setValue(a??0)).toNumber(),g.alpha=1===d.alpha?b.alpha:d.alpha,g.texture=f.Texture.WHITE,{...b,...g}}if(a instanceof f.Texture)return g.texture=a,{...b,...g};if(n(a))return p(g,a,b);if(o(a))return q(g,a,b);else if(a.fill&&n(a.fill))return p(a,a.fill,b);else if(a.fill&&o(a.fill))return q(a,a.fill,b);return d={...b,...a},e=c.Color.shared.setValue(d.color),d.alpha*=e.alpha,d.color=e.toNumber(),d}function s(a,b){let{width:c,alignment:d,miterLimit:e,cap:f,join:g,pixelLine:h,...i}=b,j=r(a,i);return j?{width:c,alignment:d,miterLimit:e,cap:f,join:g,pixelLine:h,...j}:null}a.s(["toFillStyle",()=>r,"toStrokeStyle",()=>s],52820);let t=new e.Point,u=new d.Matrix,v=class a extends b.default{constructor(){super(...arguments),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=(0,g.uid)("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this.destroyed=!1,this._activePath=new j.GraphicsPath,this._transform=new d.Matrix,this._fillStyle={...a.defaultFillStyle},this._strokeStyle={...a.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new i.Bounds,this._boundsDirty=!0}clone(){let b=new a;return b.batchMode=this.batchMode,b.instructions=this.instructions.slice(),b._activePath=this._activePath.clone(),b._transform=this._transform.clone(),b._fillStyle={...this._fillStyle},b._strokeStyle={...this._strokeStyle},b._stateStack=this._stateStack.slice(),b._bounds=this._bounds.clone(),b._boundsDirty=!0,b}get fillStyle(){return this._fillStyle}set fillStyle(b){this._fillStyle=r(b,a.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(b){this._strokeStyle=s(b,a.defaultStrokeStyle)}setFillStyle(b){return this._fillStyle=r(b,a.defaultFillStyle),this}setStrokeStyle(b){return this._strokeStyle=r(b,a.defaultStrokeStyle),this}texture(a,b,d,e,f,g){return this.instructions.push({action:"texture",data:{image:a,dx:d||0,dy:e||0,dw:f||a.frame.width,dh:g||a.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:b?c.Color.shared.setValue(b).toNumber():0xffffff}}),this.onUpdate(),this}beginPath(){return this._activePath=new j.GraphicsPath,this}fill(b,c){let d,e=this.instructions[this.instructions.length-1];return(d=0===this._tick&&e?.action==="stroke"?e.data.path:this._activePath.clone())&&(null!=b&&(void 0!==c&&"number"==typeof b&&((0,h.deprecation)(h.v8_0_0,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),b={color:b,alpha:c}),this._fillStyle=r(b,a.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:d}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0),this}_initNextPathLocation(){let{x:a,y:b}=this._activePath.getLastPoint(e.Point.shared);this._activePath.clear(),this._activePath.moveTo(a,b)}stroke(b){let c,d=this.instructions[this.instructions.length-1];return(c=0===this._tick&&d?.action==="fill"?d.data.path:this._activePath.clone())&&(null!=b&&(this._strokeStyle=s(b,a.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:c}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0),this}cut(){for(let a=0;a<2;a++){let b=this.instructions[this.instructions.length-1-a],c=this._activePath.clone();if(b&&("stroke"===b.action||"fill"===b.action))if(b.data.hole)b.data.hole.addPath(c);else{b.data.hole=c;break}}return this._initNextPathLocation(),this}arc(a,b,c,d,e,f){this._tick++;let g=this._transform;return this._activePath.arc(g.a*a+g.c*b+g.tx,g.b*a+g.d*b+g.ty,c,d,e,f),this}arcTo(a,b,c,d,e){this._tick++;let f=this._transform;return this._activePath.arcTo(f.a*a+f.c*b+f.tx,f.b*a+f.d*b+f.ty,f.a*c+f.c*d+f.tx,f.b*c+f.d*d+f.ty,e),this}arcToSvg(a,b,c,d,e,f,g){this._tick++;let h=this._transform;return this._activePath.arcToSvg(a,b,c,d,e,h.a*f+h.c*g+h.tx,h.b*f+h.d*g+h.ty),this}bezierCurveTo(a,b,c,d,e,f,g){this._tick++;let h=this._transform;return this._activePath.bezierCurveTo(h.a*a+h.c*b+h.tx,h.b*a+h.d*b+h.ty,h.a*c+h.c*d+h.tx,h.b*c+h.d*d+h.ty,h.a*e+h.c*f+h.tx,h.b*e+h.d*f+h.ty,g),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(a,b,c,d){return this._tick++,this._activePath.ellipse(a,b,c,d,this._transform.clone()),this}circle(a,b,c){return this._tick++,this._activePath.circle(a,b,c,this._transform.clone()),this}path(a){return this._tick++,this._activePath.addPath(a,this._transform.clone()),this}lineTo(a,b){this._tick++;let c=this._transform;return this._activePath.lineTo(c.a*a+c.c*b+c.tx,c.b*a+c.d*b+c.ty),this}moveTo(a,b){this._tick++;let c=this._transform,d=this._activePath.instructions,e=c.a*a+c.c*b+c.tx,f=c.b*a+c.d*b+c.ty;return 1===d.length&&"moveTo"===d[0].action?(d[0].data[0]=e,d[0].data[1]=f):this._activePath.moveTo(e,f),this}quadraticCurveTo(a,b,c,d,e){this._tick++;let f=this._transform;return this._activePath.quadraticCurveTo(f.a*a+f.c*b+f.tx,f.b*a+f.d*b+f.ty,f.a*c+f.c*d+f.tx,f.b*c+f.d*d+f.ty,e),this}rect(a,b,c,d){return this._tick++,this._activePath.rect(a,b,c,d,this._transform.clone()),this}roundRect(a,b,c,d,e){return this._tick++,this._activePath.roundRect(a,b,c,d,e,this._transform.clone()),this}poly(a,b){return this._tick++,this._activePath.poly(a,b,this._transform.clone()),this}regularPoly(a,b,c,d,e=0,f){return this._tick++,this._activePath.regularPoly(a,b,c,d,e,f),this}roundPoly(a,b,c,d,e,f){return this._tick++,this._activePath.roundPoly(a,b,c,d,e,f),this}roundShape(a,b,c,d){return this._tick++,this._activePath.roundShape(a,b,c,d),this}filletRect(a,b,c,d,e){return this._tick++,this._activePath.filletRect(a,b,c,d,e),this}chamferRect(a,b,c,d,e,f){return this._tick++,this._activePath.chamferRect(a,b,c,d,e,f),this}star(a,b,c,d,e=0,f=0){return this._tick++,this._activePath.star(a,b,c,d,e,f,this._transform.clone()),this}svg(a){return this._tick++,(0,k.SVGParser)(a,this),this}restore(){let a=this._stateStack.pop();return a&&(this._transform=a.transform,this._fillStyle=a.fillStyle,this._strokeStyle=a.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(a){return this._transform.rotate(a),this}scale(a,b=a){return this._transform.scale(a,b),this}setTransform(a,b,c,e,f,g){return a instanceof d.Matrix?this._transform.set(a.a,a.b,a.c,a.d,a.tx,a.ty):this._transform.set(a,b,c,e,f,g),this}transform(a,b,c,e,f,g){return a instanceof d.Matrix?this._transform.append(a):(u.set(a,b,c,e,f,g),this._transform.append(u)),this}translate(a,b=a){return this._transform.translate(a,b),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,this.dirty||(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;let a=this._bounds;a.clear();for(let b=0;b<this.instructions.length;b++){let c=this.instructions[b],d=c.action;if("fill"===d){let b=c.data;a.addBounds(b.path.bounds)}else if("texture"===d){let b=c.data;a.addFrame(b.dx,b.dy,b.dx+b.dw,b.dy+b.dh,b.transform)}if("stroke"===d){let b=c.data,d=b.style.alignment,e=b.style.width*(1-d),f=b.path.bounds;a.addFrame(f.minX-e,f.minY-e,f.maxX+e,f.maxY+e)}}return a}containsPoint(a){if(!this.bounds.containsPoint(a.x,a.y))return!1;let b=this.instructions,c=!1;for(let d=0;d<b.length;d++){let e=b[d],f=e.data,g=f.path;if(!e.action||!g)continue;let h=f.style,i=g.shapePath.shapePrimitives;for(let b=0;b<i.length;b++){let d=i[b].shape;if(!h||!d)continue;let g=i[b].transform,j=g?g.applyInverse(a,t):a;c="fill"===e.action?d.contains(j.x,j.y):d.strokeContains(j.x,j.y,h.width,h.alignment);let k=f.hole;if(k){let a=k.shapePath?.shapePrimitives;if(a)for(let b=0;b<a.length;b++)a[b].shape.contains(j.x,j.y)&&(c=!1)}if(c)return!0}}return c}unload(){for(let a in this.emit("unload",this),this._gpuData)this._gpuData[a]?.destroy();this._gpuData=Object.create(null)}destroy(a=!1){if(!this.destroyed){if(this.destroyed=!0,this._stateStack.length=0,this._transform=null,this.unload(),this.emit("destroy",this),this.removeAllListeners(),"boolean"==typeof a?a:a?.texture){let b="boolean"==typeof a?a:a?.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(b)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(b))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}}};v.defaultFillStyle={color:0xffffff,alpha:1,texture:f.Texture.WHITE,matrix:null,fill:null,textureSpace:"local"},v.defaultStrokeStyle={width:1,color:0xffffff,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:f.Texture.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1},a.s(["GraphicsContext",()=>v],96781)},28136,a=>{"use strict";var b=a.i(2897),c=a.i(24869),d=a.i(96781);class e extends c.ViewContainer{constructor(a){a instanceof d.GraphicsContext&&(a={context:a});const{context:b,roundPixels:c,...e}=a||{};super({label:"Graphics",...e}),this.renderPipeId="graphics",b?this.context=b:(this.context=this._ownedContext=new d.GraphicsContext,this.context.autoGarbageCollect=this.autoGarbageCollect),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=c??!1}set context(a){a!==this._context&&(this._context&&(this._context.off("update",this.onViewUpdate,this),this._context.off("unload",this.unload,this)),this._context=a,this._context.on("update",this.onViewUpdate,this),this._context.on("unload",this.unload,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(a){return this._context.containsPoint(a)}destroy(a){this._ownedContext&&!a?this._ownedContext.destroy(a):(!0===a||a?.context===!0)&&this._context.destroy(a),this._ownedContext=null,this._context=null,super.destroy(a)}_onTouch(a){this._gcLastUsed=a,this._context._gcLastUsed=a}_callContextMethod(a,b){return this.context[a](...b),this}setFillStyle(...a){return this._callContextMethod("setFillStyle",a)}setStrokeStyle(...a){return this._callContextMethod("setStrokeStyle",a)}fill(...a){return this._callContextMethod("fill",a)}stroke(...a){return this._callContextMethod("stroke",a)}texture(...a){return this._callContextMethod("texture",a)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...a){return this._callContextMethod("arc",a)}arcTo(...a){return this._callContextMethod("arcTo",a)}arcToSvg(...a){return this._callContextMethod("arcToSvg",a)}bezierCurveTo(...a){return this._callContextMethod("bezierCurveTo",a)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...a){return this._callContextMethod("ellipse",a)}circle(...a){return this._callContextMethod("circle",a)}path(...a){return this._callContextMethod("path",a)}lineTo(...a){return this._callContextMethod("lineTo",a)}moveTo(...a){return this._callContextMethod("moveTo",a)}quadraticCurveTo(...a){return this._callContextMethod("quadraticCurveTo",a)}rect(...a){return this._callContextMethod("rect",a)}roundRect(...a){return this._callContextMethod("roundRect",a)}poly(...a){return this._callContextMethod("poly",a)}regularPoly(...a){return this._callContextMethod("regularPoly",a)}roundPoly(...a){return this._callContextMethod("roundPoly",a)}roundShape(...a){return this._callContextMethod("roundShape",a)}filletRect(...a){return this._callContextMethod("filletRect",a)}chamferRect(...a){return this._callContextMethod("chamferRect",a)}star(...a){return this._callContextMethod("star",a)}svg(...a){return this._callContextMethod("svg",a)}restore(...a){return this._callContextMethod("restore",a)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...a){return this._callContextMethod("rotate",a)}scaleTransform(...a){return this._callContextMethod("scale",a)}setTransform(...a){return this._callContextMethod("setTransform",a)}transform(...a){return this._callContextMethod("transform",a)}translateTransform(...a){return this._callContextMethod("translate",a)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(a){this._context.fillStyle=a}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(a){this._context.strokeStyle=a}clone(a=!1){return a?new e(this._context.clone()):(this._ownedContext=null,new e(this._context))}lineStyle(a,c,d){(0,b.deprecation)(b.v8_0_0,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");let e={};return a&&(e.width=a),c&&(e.color=c),d&&(e.alpha=d),this.context.strokeStyle=e,this}beginFill(a,c){(0,b.deprecation)(b.v8_0_0,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");let d={};return void 0!==a&&(d.color=a),void 0!==c&&(d.alpha=c),this.context.fillStyle=d,this}endFill(){(0,b.deprecation)(b.v8_0_0,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();let a=this.context.strokeStyle;return(a.width!==d.GraphicsContext.defaultStrokeStyle.width||a.color!==d.GraphicsContext.defaultStrokeStyle.color||a.alpha!==d.GraphicsContext.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...a){return(0,b.deprecation)(b.v8_0_0,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",a)}drawEllipse(...a){return(0,b.deprecation)(b.v8_0_0,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",a)}drawPolygon(...a){return(0,b.deprecation)(b.v8_0_0,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",a)}drawRect(...a){return(0,b.deprecation)(b.v8_0_0,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",a)}drawRoundedRect(...a){return(0,b.deprecation)(b.v8_0_0,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",a)}drawStar(...a){return(0,b.deprecation)(b.v8_0_0,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",a)}}a.s(["Graphics",()=>e])},37897,24126,32631,92158,98051,a=>{"use strict";var b=a.i(98063),c=a.i(31023),d=a.i(9124),e=a.i(58422),f=a.i(48732);let g=null,h=null;function i(a,b,c){for(let d=0,e=4*c*b;d<b;++d,e+=4)if(0!==a[e+3])return!1;return!0}function j(a,b,c,d,e){let f=4*b;for(let b=d,g=d*f+4*c;b<=e;++b,g+=f)if(0!==a[g+3])return!1;return!0}class k{constructor(a=0,b=0,c=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=a,this.resetTtl=c,this.size=0,this.ttl=b}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(a){if(this.has(a)){let b=this.items[a];delete this.items[a],this.size--,null!==b.prev&&(b.prev.next=b.next),null!==b.next&&(b.next.prev=b.prev),this.first===b&&(this.first=b.next),this.last===b&&(this.last=b.prev)}return this}entries(a=this.keys()){let b=Array(a.length);for(let c=0;c<a.length;c++){let d=a[c];b[c]=[d,this.get(d)]}return b}evict(a=!1){if(a||this.size>0){let a=this.first;delete this.items[a.key],0==--this.size?(this.first=null,this.last=null):(this.first=a.next,this.first.prev=null)}return this}expiresAt(a){let b;return this.has(a)&&(b=this.items[a].expiry),b}get(a){let b=this.items[a];if(void 0!==b)return this.ttl>0&&b.expiry<=Date.now()?void this.delete(a):(this.moveToEnd(b),b.value)}has(a){return a in this.items}moveToEnd(a){this.last!==a&&(null!==a.prev&&(a.prev.next=a.next),null!==a.next&&(a.next.prev=a.prev),this.first===a&&(this.first=a.next),a.prev=this.last,a.next=null,null!==this.last&&(this.last.next=a),this.last=a,null===this.first&&(this.first=a))}keys(){let a=Array(this.size),b=this.first,c=0;for(;null!==b;)a[c++]=b.key,b=b.next;return a}setWithEvicted(a,b,c=this.resetTtl){let d=null;if(this.has(a))this.set(a,b,!0,c);else{this.max>0&&this.size===this.max&&(d={...this.first},this.evict(!0));let c=this.items[a]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:a,prev:this.last,next:null,value:b};1==++this.size?this.first=c:this.last.next=c,this.last=c}return d}set(a,b,c=!1,d=this.resetTtl){let e=this.items[a];return c||void 0!==e?(e.value=b,!1===c&&d&&(e.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(e)):(this.max>0&&this.size===this.max&&this.evict(!0),e=this.items[a]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:a,prev:this.last,next:null,value:b},1==++this.size?this.first=e:this.last.next=e,this.last=e),this}values(a=this.keys()){let b=Array(a.length);for(let c=0;c<a.length;c++)b[c]=this.get(a[c]);return b}}function l(a=1e3,b=0,c=!1){if(isNaN(a)||a<0)throw TypeError("Invalid max value");if(isNaN(b)||b<0)throw TypeError("Invalid ttl value");if("boolean"!=typeof c)throw TypeError("Invalid resetTtl value");return new k(a,b,c)}a.s(["lru",()=>l],24126);let m=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function n(a){let b="number"==typeof a.fontSize?`${a.fontSize}px`:a.fontSize,c=a.fontFamily;Array.isArray(a.fontFamily)||(c=a.fontFamily.split(","));for(let a=c.length-1;a>=0;a--){let b=c[a].trim();/([\"\'])[^\'\"]+\1/.test(b)||m.includes(b)||(b=`"${b}"`),c[a]=b}return`${a.fontStyle} ${a.fontVariant} ${a.fontWeight} ${b} ${c.join(",")}`}a.s(["fontStringFromTextStyle",()=>n],32631);let o={willReadFrequently:!0},p=class a{static get experimentalLetterSpacingSupported(){let b=a._experimentalLetterSpacingSupported;if(void 0===b){let c=e.DOMAdapter.get().getCanvasRenderingContext2D().prototype;b=a._experimentalLetterSpacingSupported="letterSpacing"in c||"textLetterSpacing"in c}return b}constructor(a,b,c,d,e,f,g,h,i){this.text=a,this.style=b,this.width=c,this.height=d,this.lines=e,this.lineWidths=f,this.lineHeight=g,this.maxLineWidth=h,this.fontProperties=i}static measureText(b=" ",c,d=a._canvas,e=c.wordWrap){let f=`${b}-${c.styleKey}-wordWrap-${e}`;if(a._measurementCache.has(f))return a._measurementCache.get(f);let g=n(c),h=a.measureFont(g);0===h.fontSize&&(h.fontSize=c.fontSize,h.ascent=c.fontSize);let i=a.__context;i.font=g;let j=(e?a._wordWrap(b,c,d):b).split(/(?:\r\n|\r|\n)/),k=Array(j.length),l=0;for(let b=0;b<j.length;b++){let d=a._measureText(j[b],c.letterSpacing,i);k[b]=d,l=Math.max(l,d)}let m=c._stroke?.width||0,o=l+m;c.dropShadow&&(o+=c.dropShadow.distance);let p=c.lineHeight||h.fontSize,q=Math.max(p,h.fontSize+m)+(j.length-1)*(p+c.leading);c.dropShadow&&(q+=c.dropShadow.distance);let r=new a(b,c,o,q,j,k,p+c.leading,l,h);return a._measurementCache.set(f,r),r}static _measureText(b,c,d){let e=!1;a.experimentalLetterSpacingSupported&&(a.experimentalLetterSpacing?(d.letterSpacing=`${c}px`,d.textLetterSpacing=`${c}px`,e=!0):(d.letterSpacing="0px",d.textLetterSpacing="0px"));let f=d.measureText(b),g=f.width,h=-f.actualBoundingBoxLeft,i=f.actualBoundingBoxRight-h;if(g>0)if(e)g-=c,i-=c;else{let d=(a.graphemeSegmenter(b).length-1)*c;g+=d,i+=d}return Math.max(g,i)}static _wordWrap(b,c,d=a._canvas){let e=d.getContext("2d",o),f=0,g="",h="",i=Object.create(null),{letterSpacing:j,whiteSpace:k}=c,l=a._collapseSpaces(k),m=a._collapseNewlines(k),n=!l,p=c.wordWrapWidth+j,q=a._tokenize(b);for(let b=0;b<q.length;b++){let d=q[b];if(a._isNewline(d)){if(!m){h+=a._addLine(g),n=!l,g="",f=0;continue}d=" "}if(l){let b=a.isBreakingSpace(d),c=a.isBreakingSpace(g[g.length-1]);if(b&&c)continue}let k=a._getFromCache(d,j,i,e);if(k>p)if(""!==g&&(h+=a._addLine(g),g="",f=0),a.canBreakWords(d,c.breakWords)){let b=a.wordWrapSplit(d);for(let k=0;k<b.length;k++){let l=b[k],m=l,o=1;for(;b[k+o];){let e=b[k+o];if(a.canBreakChars(m,e,d,k,c.breakWords))break;l+=e,m=e,o++}k+=o-1;let q=a._getFromCache(l,j,i,e);q+f>p&&(h+=a._addLine(g),n=!1,g="",f=0),g+=l,f+=q}}else{g.length>0&&(h+=a._addLine(g),g="",f=0);let c=b===q.length-1;h+=a._addLine(d,!c),n=!1,g="",f=0}else k+f>p&&(n=!1,h+=a._addLine(g),g="",f=0),(g.length>0||!a.isBreakingSpace(d)||n)&&(g+=d,f+=k)}return h+a._addLine(g,!1)}static _addLine(b,c=!0){return b=a._trimRight(b),b=c?`${b}
`:b}static _getFromCache(b,c,d,e){let f=d[b];return"number"!=typeof f&&(f=a._measureText(b,c,e)+c,d[b]=f),f}static _collapseSpaces(a){return"normal"===a||"pre-line"===a}static _collapseNewlines(a){return"normal"===a}static _trimRight(b){if("string"!=typeof b)return"";for(let c=b.length-1;c>=0;c--){let d=b[c];if(!a.isBreakingSpace(d))break;b=b.slice(0,-1)}return b}static _isNewline(b){return"string"==typeof b&&a._newlines.includes(b.charCodeAt(0))}static isBreakingSpace(b,c){return"string"==typeof b&&a._breakingSpaces.includes(b.charCodeAt(0))}static _tokenize(b){let c=[],d="";if("string"!=typeof b)return c;for(let e=0;e<b.length;e++){let f=b[e],g=b[e+1];if(a.isBreakingSpace(f,g)||a._isNewline(f)){""!==d&&(c.push(d),d=""),"\r"===f&&"\n"===g?(c.push("\r\n"),e++):c.push(f);continue}d+=f}return""!==d&&c.push(d),c}static canBreakWords(a,b){return b}static canBreakChars(a,b,c,d,e){return!0}static wordWrapSplit(b){return a.graphemeSegmenter(b)}static measureFont(b){if(a._fonts[b])return a._fonts[b];let c=a._context;c.font=b;let d=c.measureText(a.METRICS_STRING+a.BASELINE_SYMBOL),e={ascent:d.actualBoundingBoxAscent,descent:d.actualBoundingBoxDescent,fontSize:d.actualBoundingBoxAscent+d.actualBoundingBoxDescent};return a._fonts[b]=e,e}static clearMetrics(b=""){b?delete a._fonts[b]:a._fonts={}}static get _canvas(){if(!a.__canvas){let b;try{let c=new OffscreenCanvas(0,0),d=c.getContext("2d",o);if(d?.measureText)return a.__canvas=c,c;b=e.DOMAdapter.get().createCanvas()}catch(a){b=e.DOMAdapter.get().createCanvas()}b.width=b.height=10,a.__canvas=b}return a.__canvas}static get _context(){return a.__context||(a.__context=a._canvas.getContext("2d",o)),a.__context}};p.METRICS_STRING="|q",p.BASELINE_SYMBOL="M",p.BASELINE_MULTIPLIER=1.4,p.HEIGHT_MULTIPLIER=2,p.graphemeSegmenter=(()=>{if("function"==typeof Intl?.Segmenter){let a=new Intl.Segmenter;return b=>{let c=a.segment(b),d=[],e=0;for(let a of c)d[e++]=a.segment;return d}}return a=>[...a]})(),p.experimentalLetterSpacing=!1,p._fonts={},p._newlines=[10,13],p._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],p._measurementCache=l(1e3),a.s(["CanvasTextMetrics",()=>p],92158);var q=a.i(67309),r=a.i(71805),s=a.i(51983),t=a.i(13753),u=a.i(89376);function v(a,c,d,e=0){if(a.texture===r.Texture.WHITE&&!a.fill)return b.Color.shared.setValue(a.color).setAlpha(a.alpha??1).toHexa();if(a.fill){if(a.fill instanceof u.FillPattern){let b=a.fill,d=c.createPattern(b.texture.source.resource,"repeat"),e=b.transform.copyTo(q.Matrix.shared);return e.scale(b.texture.frame.width,b.texture.frame.height),d.setTransform(e),d}else if(a.fill instanceof t.FillGradient){let f,g=a.fill,h="linear"===g.type,i="local"===g.textureSpace,j=1,k=1;i&&d&&(j=d.width+e,k=d.height+e);let l=!1;if(h){let{start:a,end:b}=g;f=c.createLinearGradient(a.x*j,a.y*k,b.x*j,b.y*k),l=Math.abs(b.x-a.x)<Math.abs((b.y-a.y)*.1)}else{let{center:a,innerRadius:b,outerCenter:d,outerRadius:e}=g;f=c.createRadialGradient(a.x*j,a.y*k,b*j,d.x*j,d.y*k,e*j)}if(l&&i&&d){let a=d.lineHeight/k;for(let c=0;c<d.lines.length;c++){let h=(c*d.lineHeight+e/2)/k;g.colorStops.forEach(c=>{let d=h+c.offset*a;f.addColorStop(Math.floor(1e5*d)/1e5,b.Color.shared.setValue(c.color).toHex())})}}else g.colorStops.forEach(a=>{f.addColorStop(a.offset,b.Color.shared.setValue(a.color).toHex())});return f}}else{let b=c.createPattern(a.texture.source.resource,"repeat"),d=a.matrix.copyTo(q.Matrix.shared);return d.scale(a.texture.frame.width,a.texture.frame.height),b.setTransform(d),b}return(0,s.warn)("FillStyle not recognised",a),"red"}a.s(["getCanvasFillStyle",()=>v],98051);let w=new c.Rectangle,x=new class{getCanvasAndContext(a){let{text:b,style:k,resolution:l=1}=a,m=k._getFinalPadding(),n=p.measureText(b||" ",k),o=Math.ceil(Math.ceil(Math.max(1,n.width)+2*m)*l),q=Math.ceil(Math.ceil(Math.max(1,n.height)+2*m)*l),r=d.CanvasPool.getOptimalCanvasAndContext(o,q);this._renderTextToCanvas(b,k,m,l,r);let s=k.trim?function(...a){let b=a[0];b.canvas||(b={canvas:a[0],resolution:a[1]});let{canvas:d}=b,k=Math.min(b.resolution??1,1),l=b.width??d.width,m=b.height??d.height,n=b.output;if(g||((h=(g=e.DOMAdapter.get().createCanvas(256,128)).getContext("2d",{willReadFrequently:!0})).globalCompositeOperation="copy",h.globalAlpha=1),(g.width<l||g.height<m)&&(g.width=(0,f.nextPow2)(l),g.height=(0,f.nextPow2)(m)),!h)throw TypeError("Failed to get canvas 2D context");h.drawImage(d,0,0,l,m,0,0,l*k,m*k);let o=h.getImageData(0,0,l,m).data,p=0,q=0,r=l-1,s=m-1;for(;q<m&&i(o,l,q);)++q;if(q===m)return c.Rectangle.EMPTY;for(;i(o,l,s);)--s;for(;j(o,l,p,q,s);)++p;for(;j(o,l,r,q,s);)--r;return++r,++s,h.globalCompositeOperation="source-over",h.strokeRect(p,q,r-p,s-q),h.globalCompositeOperation="copy",n??(n=new c.Rectangle),n.set(p/k,q/k,(r-p)/k,(s-q)/k),n}({canvas:r.canvas,width:o,height:q,resolution:1,output:w}):w.set(0,0,o,q);return{canvasAndContext:r,frame:s}}returnCanvasAndContext(a){d.CanvasPool.returnCanvasAndContext(a)}_renderTextToCanvas(a,c,d,e,f){let g,h,{canvas:i,context:j}=f,k=n(c),l=p.measureText(a||" ",c),m=l.lines,o=l.lineHeight,q=l.lineWidths,r=l.maxLineWidth,s=l.fontProperties,t=i.height;if(j.resetTransform(),j.scale(e,e),j.textBaseline=c.textBaseline,c._stroke?.width){let a=c._stroke;j.lineWidth=a.width,j.miterLimit=a.miterLimit,j.lineJoin=a.join,j.lineCap=a.cap}j.font=k;let u=c.dropShadow?2:1;for(let a=0;a<u;++a){let i=c.dropShadow&&0===a,k=i?Math.ceil(Math.max(1,t)+2*d):0,n=k*e;if(i){j.fillStyle="black",j.strokeStyle="black";let a=c.dropShadow,d=a.color,f=a.alpha;j.shadowColor=b.Color.shared.setValue(d).setAlpha(f).toRgbaString();let g=a.blur*e,h=a.distance*e;j.shadowBlur=g,j.shadowOffsetX=Math.cos(a.angle)*h,j.shadowOffsetY=Math.sin(a.angle)*h+n}else{if(j.fillStyle=c._fill?v(c._fill,j,l,2*d):null,c._stroke?.width){let a=.5*c._stroke.width+2*d;j.strokeStyle=v(c._stroke,j,l,a)}j.shadowColor="black"}let p=(o-s.fontSize)/2;o-s.fontSize<0&&(p=0);let u=c._stroke?.width??0;for(let a=0;a<m.length;a++)g=u/2,h=u/2+a*o+s.ascent+p,"right"===c.align?g+=r-q[a]:"center"===c.align&&(g+=(r-q[a])/2),c._stroke?.width&&this._drawLetterSpacing(m[a],c,f,g+d,h+d-k,!0),void 0!==c._fill&&this._drawLetterSpacing(m[a],c,f,g+d,h+d-k)}}_drawLetterSpacing(a,b,c,d,e,f=!1){let{context:g}=c,h=b.letterSpacing,i=!1;if(p.experimentalLetterSpacingSupported&&(p.experimentalLetterSpacing?(g.letterSpacing=`${h}px`,g.textLetterSpacing=`${h}px`,i=!0):(g.letterSpacing="0px",g.textLetterSpacing="0px")),0===h||i)return void(f?g.strokeText(a,d,e):g.fillText(a,d,e));let j=d,k=p.graphemeSegmenter(a),l=g.measureText(a).width,m=0;for(let a=0;a<k.length;++a){let b=k[a];f?g.strokeText(b,j,e):g.fillText(b,j,e);let c="";for(let b=a+1;b<k.length;++b)c+=k[b];j+=l-(m=g.measureText(c).width)+h,l=m}}};a.s(["CanvasTextGenerator",()=>x],37897)},25974,a=>{"use strict";var b=a.i(61607),c=a.i(98063),d=a.i(90423),e=a.i(2897),f=a.i(51983),g=a.i(13753),h=a.i(89376),i=a.i(96781),j=a.i(52820);let k=class a extends b.default{constructor(b={}){super(),this.uid=(0,d.uid)("textStyle"),this._tick=0,function(a){if("boolean"==typeof a.dropShadow&&a.dropShadow){let b=k.defaultDropShadow;a.dropShadow={alpha:a.dropShadowAlpha??b.alpha,angle:a.dropShadowAngle??b.angle,blur:a.dropShadowBlur??b.blur,color:a.dropShadowColor??b.color,distance:a.dropShadowDistance??b.distance}}if(void 0!==a.strokeThickness){(0,e.deprecation)(e.v8_0_0,"strokeThickness is now a part of stroke");let b=a.stroke,d={};if(c.Color.isColorLike(b))d.color=b;else if(b instanceof g.FillGradient||b instanceof h.FillPattern)d.fill=b;else if(Object.hasOwnProperty.call(b,"color")||Object.hasOwnProperty.call(b,"fill"))d=b;else throw Error("Invalid stroke value.");a.stroke={...d,width:a.strokeThickness}}if(Array.isArray(a.fillGradientStops)){if((0,e.deprecation)(e.v8_0_0,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(a.fill)||0===a.fill.length)throw Error("Invalid fill value. Expected an array of colors for gradient fill.");a.fill.length!==a.fillGradientStops.length&&(0,f.warn)("The number of fill colors must match the number of fill gradient stops.");let b=new g.FillGradient({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),d=a.fillGradientStops.slice(),h=a.fill.map(a=>c.Color.shared.setValue(a).toNumber());d.forEach((a,c)=>{b.addColorStop(a,h[c])}),a.fill={fill:b}}}(b);const i={...a.defaultTextStyle,...b};for(const a in i)this[a]=i[a];this.update(),this._tick=0}get align(){return this._align}set align(a){this._align!==a&&(this._align=a,this.update())}get breakWords(){return this._breakWords}set breakWords(a){this._breakWords!==a&&(this._breakWords=a,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(b){this._dropShadow!==b&&(null!==b&&"object"==typeof b?this._dropShadow=this._createProxy({...a.defaultDropShadow,...b}):this._dropShadow=b?this._createProxy({...a.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(a){this._fontFamily!==a&&(this._fontFamily=a,this.update())}get fontSize(){return this._fontSize}set fontSize(a){this._fontSize!==a&&("string"==typeof a?this._fontSize=parseInt(a,10):this._fontSize=a,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(a){this._fontStyle!==a&&(this._fontStyle=a.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(a){this._fontVariant!==a&&(this._fontVariant=a,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(a){this._fontWeight!==a&&(this._fontWeight=a,this.update())}get leading(){return this._leading}set leading(a){this._leading!==a&&(this._leading=a,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(a){this._letterSpacing!==a&&(this._letterSpacing=a,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(a){this._lineHeight!==a&&(this._lineHeight=a,this.update())}get padding(){return this._padding}set padding(a){this._padding!==a&&(this._padding=a,this.update())}get filters(){return this._filters}set filters(a){this._filters!==a&&(this._filters=Object.freeze(a),this.update())}get trim(){return this._trim}set trim(a){this._trim!==a&&(this._trim=a,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(a){this._textBaseline!==a&&(this._textBaseline=a,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(a){this._whiteSpace!==a&&(this._whiteSpace=a,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(a){this._wordWrap!==a&&(this._wordWrap=a,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(a){this._wordWrapWidth!==a&&(this._wordWrapWidth=a,this.update())}get fill(){return this._originalFill}set fill(a){a!==this._originalFill&&(this._originalFill=a,this._isFillStyle(a)&&(this._originalFill=this._createProxy({...i.GraphicsContext.defaultFillStyle,...a},()=>{this._fill=(0,j.toFillStyle)({...this._originalFill},i.GraphicsContext.defaultFillStyle)})),this._fill=(0,j.toFillStyle)(0===a?"black":a,i.GraphicsContext.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(a){a!==this._originalStroke&&(this._originalStroke=a,this._isFillStyle(a)&&(this._originalStroke=this._createProxy({...i.GraphicsContext.defaultStrokeStyle,...a},()=>{this._stroke=(0,j.toStrokeStyle)({...this._originalStroke},i.GraphicsContext.defaultStrokeStyle)})),this._stroke=(0,j.toStrokeStyle)(a,i.GraphicsContext.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){let b=a.defaultTextStyle;for(let a in b)this[a]=b[a]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new a({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let a=0;if(this._filters)for(let b=0;b<this._filters.length;b++)a+=this._filters[b].padding;return Math.max(this._padding,a)}destroy(a=!1){if(this.removeAllListeners(),"boolean"==typeof a?a:a?.texture){let b="boolean"==typeof a?a:a?.textureSource;this._fill?.texture&&this._fill.texture.destroy(b),this._originalFill?.texture&&this._originalFill.texture.destroy(b),this._stroke?.texture&&this._stroke.texture.destroy(b),this._originalStroke?.texture&&this._originalStroke.texture.destroy(b)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(a,b){return new Proxy(a,{set:(a,c,d)=>a[c]===d||(a[c]=d,b?.(c,d),this.update(),!0)})}_isFillStyle(a){return(a??null)!==null&&!(c.Color.isColorLike(a)||a instanceof g.FillGradient||a instanceof h.FillPattern)}};k.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5},k.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100},a.s(["TextStyle",()=>k])}];

//# sourceMappingURL=node_modules_3d0ad5fb._.js.map